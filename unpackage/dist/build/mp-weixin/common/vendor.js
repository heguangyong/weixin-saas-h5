(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/vendor"],{"0502":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerRealtime=s;var r=n("d340"),o=n("06af"),i={target:"database",entity:function(){var e=this.platform,t=e.adapter,n=e.runtime;(0,o.setWsClass)(t.wsClass),(0,o.setRuntime)(n)}},a={name:"realtime",IIFE:!0,entity:function(){this.prototype.wsClientClass=r.RealtimeWebSocketClient}};try{cloudbase.registerComponent(a),cloudbase.registerHook(i)}catch(u){}function s(e){try{e.registerComponent(a),e.registerHook(i)}catch(u){console.warn(u)}}},"052b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailAuthProvider=void 0;var r=n("5fbe"),o=n("fd2f"),i=n("2707"),a=n("be7e"),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p=r.utils.throwError,h=r.utils.isString,d=r.constants.ERRORS,y=r.constants.COMMUNITY_SITE_URL,g=r.helpers.catchErrorsDecorator,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.signIn=function(e,t){return f(this,void 0,void 0,(function(){var n,r,o,s,u;return l(this,(function(c){switch(c.label){case 0:return h(e)||p(d.INVALID_PARAMS,"email must be a string"),n=this._cache.keys.refreshTokenKey,[4,this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(n)||""})];case 1:return r=c.sent(),o=r.refresh_token,s=r.access_token,u=r.access_token_expire,o?[4,this.setRefreshToken(o)]:[3,8];case 2:return c.sent(),s&&u?[4,this.setAccessToken(s,u)]:[3,4];case 3:return c.sent(),[3,6];case 4:return[4,this._request.refreshAccessToken()];case 5:c.sent(),c.label=6;case 6:return[4,this.refreshUserInfo()];case 7:return c.sent(),a.eventBus.fire(a.EVENTS.LOGIN_STATE_CHANGED),a.eventBus.fire(a.EVENTS.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:i.LOGINTYPE.EMAIL,persistence:this._config.persistence}),[2,new a.LoginState({envId:this._config.env,cache:this._cache,request:this._request})];case 8:r.code?p(d.OPERATION_FAIL,"Email login fail["+r.code+"] "+r.message):p(d.OPERATION_FAIL,"Email login fail"),c.label=9;case 9:return[2]}}))}))},t.prototype.signUp=function(e,t){return f(this,void 0,void 0,(function(){return l(this,(function(n){return[2,this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})]}))}))},t.prototype.resetPassword=function(e){return f(this,void 0,void 0,(function(){return l(this,(function(t){return[2,this._request.send("auth.sendPasswordResetEmail",{email:e})]}))}))},t.prototype.resetPasswordWithToken=function(e,t){return f(this,void 0,void 0,(function(){return l(this,(function(n){return[2,this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})]}))}))},t.prototype.activate=function(e){return f(this,void 0,void 0,(function(){return l(this,(function(t){return[2,this._request.send("auth.activateEndUserMail",{token:e})]}))}))},u([g({title:"邮箱密码登录失败",messages:["请确认以下各项：","  1 - 调用 auth().emailAuthProvider() 的语法或参数是否正确","  2 - 当前环境是否开通了邮箱登录","  3 - 邮箱地址与密码是否匹配","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+y]}),c("design:type",Function),c("design:paramtypes",[String,String]),c("design:returntype",Promise)],t.prototype,"signIn",null),u([g({title:"邮箱注册失败",messages:["请确认以下各项：","  1 - 调用 auth().signUpWithEmailAndPassword() 的语法或参数是否正确","  2 - 当前环境是否开通了邮箱登录","  3 - 此邮箱地址是否已经被其他用户占用","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+y]}),c("design:type",Function),c("design:paramtypes",[String,String]),c("design:returntype",Promise)],t.prototype,"signUp",null),u([g({title:"重置密码失败",messages:["请确认以下各项：","  1 - 调用 auth().sendPasswordResetEmail() 的语法或参数是否正确","  2 - 当前环境是否开通了邮箱登录","  3 - 此邮箱地址是否已经与当前用户绑定","  4 - 此邮箱地址是否已经被其他用户占用","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+y]}),c("design:type",Function),c("design:paramtypes",[String]),c("design:returntype",Promise)],t.prototype,"resetPassword",null),u([g({title:"重置密码失败",messages:["请确认以下各项：","  1 - 调用语法或参数是否正确","  2 - 当前环境是否开通了邮箱登录","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+y]}),c("design:type",Function),c("design:paramtypes",[String,String]),c("design:returntype",Promise)],t.prototype,"resetPasswordWithToken",null),u([g({title:"邮箱激活失败",messages:["请确认以下各项：","  1 - 调用语法或参数是否正确","  2 - 当前环境是否开通了邮箱登录","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+y]}),c("design:type",Function),c("design:paramtypes",[String]),c("design:returntype",Promise)],t.prototype,"activate",null),t}(o.AuthProvider);t.EmailAuthProvider=v},"0682":function(e,t,n){(function(t,r,o){e.exports=r(n("36b8"),n("9d1a"),n("5b91"))})(0,(function(e){return e.HmacSHA256}))},"06af":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWsClass=i,t.setWsClass=a,t.getRuntime=s,t.setRuntime=u;var r=null,o="web";function i(){return r}function a(e){r=e}function s(){return o}function u(e){o=e}},"0fc8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operatorToString=f,t.OperatorMap=void 0;var r=n("fe94"),o=n("8fd0"),i=n("a8f7"),a={};for(var s in t.OperatorMap=a,r.QUERY_COMMANDS_LITERAL)a[s]="$"+s;for(var u in o.LOGIC_COMMANDS_LITERAL)a[u]="$"+u;for(var c in i.UPDATE_COMMANDS_LITERAL)a[c]="$"+c;function f(e){return a[e]||"$"+e}a[r.QUERY_COMMANDS_LITERAL.NEQ]="$ne",a[i.UPDATE_COMMANDS_LITERAL.REMOVE]="$unset",a[i.UPDATE_COMMANDS_LITERAL.SHIFT]="$pop",a[i.UPDATE_COMMANDS_LITERAL.UNSHIFT]="$push"},"12de":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerComponent=s,t.registerHook=c;var r=n("5fbe"),o=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},i=r.constants.ERRORS,a={};function s(e,t){var n=t.name,r=t.namespace,s=t.entity,c=t.injectEvents,f=t.IIFE,l=void 0!==f&&f;if(a[n]||r&&e[r])throw new Error(JSON.stringify({code:i.INVALID_OPERATION,msg:"Duplicate component "+n}));if(l){if(!s||"function"!==typeof s)throw new Error(JSON.stringify({code:i.INVALID_PARAMS,msg:"IIFE component's entity must be a function"}));s.call(e)}if(a[n]=t,r?e.prototype[r]=s:u(e.prototype,s),c){var p=c.bus,h=c.events;if(!p||!h||0===h.length)return;var d=e.prototype.fire||function(){};e.prototype.events||(e.prototype.events={});var y=e.prototype.events||{};y[n]?e.prototype.events[n].events=o(e.prototype.events[n].events,h):e.prototype.events[n]={bus:p,events:h},e.prototype.fire=function(e,t){for(var n in d(e,t),this.events){var r=this.events[n],o=r.bus,i=r.events;if(i.includes(e)){o.fire(e,t);break}}}}}function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=u(e[r],t[r]));return e}function c(e,t){var n=t.entity,r=t.target;if(!e.prototype.hasOwnProperty(r))throw new Error(JSON.stringify({code:i.INVALID_OPERATION,msg:"target:"+r+" is not exist"}));var a=e.prototype[r];if("function"!==typeof a)throw new Error(JSON.stringify({code:i.INVALID_OPERATION,msg:"target:"+r+" is not a function which is the only type supports hook"}));e.prototype[r]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.call.apply(n,o([this],e)),a.call.apply(a,o([this],e))}}},"1a3f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RealtimeWebSocketClient=void 0;var r=p(n("a34a")),o=n("3d1a"),i=n("d877"),a=n("a405"),s=n("ca7a"),u=n("7e98"),c=n("752b"),f=n("36ac"),l=n("f399");function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return g(e)||y(e,t)||_(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(u){o=!0,i=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(o)throw i}}return n}}function g(e){if(Array.isArray(e))return e}function v(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _(e,t){if(e){if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){b(i,r,o,a,s,"next",e)}function s(e){b(i,r,o,a,s,"throw",e)}a(void 0)}))}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}var A={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},I=3,T=5e3,N=1e4,R=5,D=1e4,P=2,C=2,L=5e3,B=function(){function e(t){var n=this;w(this,e),this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._pingFailed=0,this._pongMissed=0,this._logins=new Map,this._wsReadySubsribers=[],this._wsResponseWait=new Map,this._rttObserved=[],this.initWebSocketConnection=function(){var e=E(r.default.mark((function e(t){var o,a=arguments;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=a.length>1&&void 0!==a[1]?a[1]:n._maxReconnect,!t||!n._reconnectState){e.next=3;break}return e.abrupt("return");case 3:if(t&&(n._reconnectState=!0),!n._wsInitPromise){e.next=6;break}return e.abrupt("return",n._wsInitPromise);case 6:return t&&n.pauseClients(),n.close(s.CLOSE_EVENT_CODE.ReconnectWebSocket),n._wsInitPromise=new Promise(function(){var e=E(r.default.mark((function e(a,s){var c,p;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getWsSign();case 3:return c=e.sent,e.next=6,new Promise((function(e){var t=c.wsUrl||"wss://tcb-ws.tencentcloudapi.com";n._ws=l.Db.wsClass?new l.Db.wsClass(t):new WebSocket(t),e()}));case 6:if(!n._ws.connect){e.next=9;break}return e.next=9,n._ws.connect();case 9:return e.next=11,n.initWebSocketEvent();case 11:a(),t&&(n.resumeClients(),n._reconnectState=!1),e.next=30;break;case 15:if(e.prev=15,e.t0=e["catch"](0),console.error("[realtime] initWebSocketConnection connect fail",e.t0),!(o>0)){e.next=28;break}if(p=!0,n._wsInitPromise=void 0,!p){e.next=25;break}return e.next=24,(0,i.sleep)(n._reconnectInterval);case 24:t&&(n._reconnectState=!1);case 25:a(n.initWebSocketConnection(t,o-1)),e.next=30;break;case 28:s(e.t0),t&&n.closeAllClients(new u.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL,errMsg:e.t0}));case 30:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}()),e.prev=9,e.next=12,n._wsInitPromise;case 12:n._wsReadySubsribers.forEach((function(e){var t=e.resolve;return t()})),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](9),n._wsReadySubsribers.forEach((function(e){var t=e.reject;return t()}));case 18:return e.prev=18,n._wsInitPromise=void 0,n._wsReadySubsribers=[],e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[9,15,18,22]])})));return function(t){return e.apply(this,arguments)}}(),this.initWebSocketEvent=function(){return new Promise((function(e,t){if(!n._ws)throw new Error("can not initWebSocketEvent, ws not exists");var r=!1;n._ws.onopen=function(t){console.warn("[realtime] ws event: open",t),r=!0,e()},n._ws.onerror=function(e){n._logins=new Map,r?(console.error("[realtime] ws event: error",e),n.clearHeartbeat(),n._virtualWSClient.forEach((function(t){return t.closeWithError(new u.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR,errMsg:e}))}))):(console.error("[realtime] ws open failed with ws event: error",e),t(e))},n._ws.onclose=function(e){switch(console.warn("[realtime] ws event: close",e),n._logins=new Map,n.clearHeartbeat(),e.code){case s.CLOSE_EVENT_CODE.ReconnectWebSocket:break;case s.CLOSE_EVENT_CODE.NoRealtimeListeners:break;case s.CLOSE_EVENT_CODE.HeartbeatPingError:case s.CLOSE_EVENT_CODE.HeartbeatPongTimeoutError:case s.CLOSE_EVENT_CODE.NormalClosure:case s.CLOSE_EVENT_CODE.AbnormalClosure:n._maxReconnect>0?n.initWebSocketConnection(!0,n._maxReconnect):n.closeAllClients((0,s.getWSCloseError)(e.code));break;case s.CLOSE_EVENT_CODE.NoAuthentication:n.closeAllClients((0,s.getWSCloseError)(e.code,e.reason));break;default:n._maxReconnect>0?n.initWebSocketConnection(!0,n._maxReconnect):n.closeAllClients((0,s.getWSCloseError)(e.code))}},n._ws.onmessage=function(e){var t,r=e.data;n.heartbeat();try{t=JSON.parse(r)}catch(d){throw new Error("[realtime] onMessage parse res.data error: ".concat(d))}if("ERROR"===t.msgType){var o=null;n._virtualWSClient.forEach((function(e){e.watchId===t.watchId&&(o=e)})),o&&o.listener.onError(t)}var i=n._wsResponseWait.get(t.requestId);if(i){try{"ERROR"===t.msgType?i.reject(new c.RealtimeErrorMessageError(t)):i.resolve(t)}catch(d){console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",d)}finally{n._wsResponseWait.delete(t.requestId)}if(i.skipOnMessage)return}if("PONG"!==t.msgType){var a=t.watchId&&n._watchIdClientMap.get(t.watchId);if(a)a.onMessage(t);else switch(console.error("[realtime] no realtime listener found responsible for watchId ".concat(t.watchId,": "),t),t.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":a=n._queryIdClientMap.get(t.msgData.queryID),a&&a.onMessage(t);break;default:var s,u=v(n._watchIdClientMap);try{for(u.s();!(s=u.n()).done;){var f=h(s.value,2),l=f[1];l.onMessage(t);break}}catch(y){u.e(y)}finally{u.f()}}}else if(n._lastPingSendTS){var p=Date.now()-n._lastPingSendTS;if(p>N)return void console.warn("[realtime] untrusted rtt observed: ".concat(p));n._rttObserved.length>=I&&n._rttObserved.splice(0,n._rttObserved.length-I+1),n._rttObserved.push(p)}},n.heartbeat()}))},this.isWSConnected=function(){return Boolean(n._ws&&n._ws.readyState===A.OPEN)},this.onceWSConnected=E(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.isWSConnected()){e.next=2;break}return e.abrupt("return");case 2:if(!n._wsInitPromise){e.next=4;break}return e.abrupt("return",n._wsInitPromise);case 4:return e.abrupt("return",new Promise((function(e,t){n._wsReadySubsribers.push({resolve:e,reject:t})})));case 5:case"end":return e.stop()}}),e)}))),this.webLogin=function(){var e=E(r.default.mark((function e(t,o){var i,s,u,c,f,p,h;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o){e.next=15;break}if(!t){e.next=12;break}if(i=n._logins.get(t),!i){e.next=10;break}if(!i.loggedIn||!i.loginResult){e.next=8;break}return e.abrupt("return",i.loginResult);case 8:if(!i.loggingInPromise){e.next=10;break}return e.abrupt("return",i.loggingInPromise);case 10:e.next=15;break;case 12:if(s=n._logins.get(""),!s||!s.loggingInPromise){e.next=15;break}return e.abrupt("return",s.loggingInPromise);case 15:return u=new Promise(function(){var e=E(r.default.mark((function e(t,o){var i,s,u,c;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getWsSign();case 3:return i=e.sent,s={envId:i.envId||"",accessToken:"",referrer:"web",sdkVersion:"",dataVersion:l.Db.dataVersion||""},u={watchId:void 0,requestId:(0,a.genRequestId)(),msgType:"LOGIN",msgData:s,exMsgData:{runtime:l.Db.runtime,signStr:i.signStr,secretVersion:i.secretVersion}},e.next=8,n.send({msg:u,waitResponse:!0,skipOnMessage:!0,timeout:L});case 8:c=e.sent,c.msgData.code?o(new Error("".concat(c.msgData.code," ").concat(c.msgData.message))):t({envId:i.envId}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),o(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()),c=t&&n._logins.get(t),f=Date.now(),c?(c.loggedIn=!1,c.loggingInPromise=u,c.loginStartTS=f):(c={loggedIn:!1,loggingInPromise:u,loginStartTS:f},n._logins.set(t||"",c)),e.prev=19,e.next=22,u;case 22:if(p=e.sent,h=t&&n._logins.get(t),!h||h!==c||h.loginStartTS!==f){e.next=32;break}return c.loggedIn=!0,c.loggingInPromise=void 0,c.loginStartTS=void 0,c.loginResult=p,e.abrupt("return",p);case 32:if(!h){e.next=44;break}if(!h.loggedIn||!h.loginResult){e.next=37;break}return e.abrupt("return",h.loginResult);case 37:if(!h.loggingInPromise){e.next=41;break}return e.abrupt("return",h.loggingInPromise);case 41:throw new Error("ws unexpected login info");case 42:e.next=45;break;case 44:throw new Error("ws login info reset");case 45:e.next=54;break;case 47:throw e.prev=47,e.t0=e["catch"](19),c.loggedIn=!1,c.loggingInPromise=void 0,c.loginStartTS=void 0,c.loginResult=void 0,e.t0;case 54:case"end":return e.stop()}}),e,null,[[19,47]])})));return function(t,n){return e.apply(this,arguments)}}(),this.getWsSign=E(r.default.mark((function e(){var t,o,i,a,s,u,c;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(n._wsSign&&n._wsSign.expiredTs>Date.now())){e.next=2;break}return e.abrupt("return",n._wsSign);case 2:return t=Date.now()+6e4,e.next=5,n._context.appConfig.request.send("auth.wsWebSign",{runtime:l.Db.runtime});case 5:if(o=e.sent,!o.code){e.next=8;break}throw new Error("[tcb-js-sdk] 获取实时数据推送登录票据失败: ".concat(o.code));case 8:if(!o.data){e.next=13;break}return i=o.data,a=i.signStr,s=i.wsUrl,u=i.secretVersion,c=i.envId,e.abrupt("return",{signStr:a,wsUrl:s,secretVersion:u,envId:c,expiredTs:t});case 13:throw new Error("[tcb-js-sdk] 获取实时数据推送登录票据失败");case 14:case"end":return e.stop()}}),e)}))),this.getWaitExpectedTimeoutLength=function(){return n._rttObserved.length?n._rttObserved.reduce((function(e,t){return e+t}))/n._rttObserved.length*1.5:T},this.ping=E(r.default.mark((function e(){var t;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={watchId:void 0,requestId:(0,a.genRequestId)(),msgType:"PING",msgData:null},e.next=3,n.send({msg:t});case 3:case"end":return e.stop()}}),e)}))),this.send=function(){var e=E(r.default.mark((function e(t){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=E(r.default.mark((function e(o,a){var s,c,f,l,p;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=!1,f=!1,l=function(e){c=!0,s&&clearTimeout(s),o(e)},p=function(e){f=!0,s&&clearTimeout(s),a(e)},t.timeout&&(s=setTimeout(E(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c&&f){e.next=4;break}return e.next=3,(0,i.sleep)(0);case 3:c&&f||p(new u.TimeoutError("wsclient.send timedout"));case 4:case"end":return e.stop()}}),e)}))),t.timeout)),e.prev=5,!n._wsInitPromise){e.next=9;break}return e.next=9,n._wsInitPromise;case 9:if(n._ws){e.next=12;break}return p(new Error("invalid state: ws connection not exists, can not send message")),e.abrupt("return");case 12:if(n._ws.readyState===A.OPEN){e.next=15;break}return p(new Error("ws readyState invalid: ".concat(n._ws.readyState,", can not send message"))),e.abrupt("return");case 15:return t.waitResponse&&n._wsResponseWait.set(t.msg.requestId,{resolve:l,reject:p,skipOnMessage:t.skipOnMessage}),e.prev=16,e.next=19,n._ws.send(JSON.stringify(t.msg));case 19:t.waitResponse||l(),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](16),e.t0&&(p(e.t0),t.waitResponse&&n._wsResponseWait.delete(t.msg.requestId));case 25:e.next=30;break;case 27:e.prev=27,e.t1=e["catch"](5),p(e.t1);case 30:case"end":return e.stop()}}),e,null,[[5,27],[16,22]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.closeAllClients=function(e){n._virtualWSClient.forEach((function(t){t.closeWithError(e)}))},this.pauseClients=function(e){(e||n._virtualWSClient).forEach((function(e){e.pause()}))},this.resumeClients=function(e){(e||n._virtualWSClient).forEach((function(e){e.resume()}))},this.onWatchStart=function(e,t){n._queryIdClientMap.set(t,e)},this.onWatchClose=function(e,t){t&&n._queryIdClientMap.delete(t),n._watchIdClientMap.delete(e.watchId),n._virtualWSClient.delete(e),n._virtualWSClient.size||n.close(s.CLOSE_EVENT_CODE.NoRealtimeListeners)},this._maxReconnect=t.maxReconnect||R,this._reconnectInterval=t.reconnectInterval||D,this._context=t.context}return O(e,[{key:"heartbeat",value:function(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout(E(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t._ws&&t._ws.readyState===A.OPEN){e.next=3;break}return e.abrupt("return");case 3:return t._lastPingSendTS=Date.now(),e.next=6,t.ping();case 6:t._pingFailed=0,t._pongTimeoutId=setTimeout((function(){console.error("pong timed out"),t._pongMissed<C?(t._pongMissed++,t.heartbeat(!0)):t.initWebSocketConnection(!0)}),t._context.appConfig.realtimePongWaitTimeout),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t._pingFailed<P?(t._pingFailed++,t.heartbeat()):t.close(s.CLOSE_EVENT_CODE.HeartbeatPingError);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),e?0:this._context.appConfig.realtimePingInterval)}},{key:"clearHeartbeat",value:function(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)}},{key:"close",value:function(e){this.clearHeartbeat(),this._ws&&(this._ws.close(e,s.CLOSE_EVENT_CODE_INFO[e].name),this._ws=void 0)}},{key:"watch",value:function(e){this._ws||this._wsInitPromise||this.initWebSocketConnection(!1);var t=new o.VirtualWebSocketClient(Object.assign(Object.assign({},e),{send:this.send,login:this.webLogin,isWSConnected:this.isWSConnected,onceWSConnected:this.onceWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,debug:!0}));return this._virtualWSClient.add(t),this._watchIdClientMap.set(t.watchId,t),t.listener}}]),e}();t.RealtimeWebSocketClient=B},"1d25":function(e,t){function n(e){return""===e||("null"===e||("undefined"===e||(!e&&0!==e&&""!==e||(!(!Array.prototype.isPrototypeOf(e)||0!==e.length)||!(!Object.prototype.isPrototypeOf(e)||0!==Object.keys(e).length)))))}function r(e,t){if(e){switch(t||(t="yyyy-MM-dd"),typeof e){case"string":e=new Date(e.replace(/-/,"/"));break;case"number":e=new Date(e);break}if(!(!e instanceof Date)){var n={yyyy:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),MM:(""+(e.getMonth()+101)).substr(1),dd:(""+(e.getDate()+100)).substr(1),HH:(""+(e.getHours()+100)).substr(1),mm:(""+(e.getMinutes()+100)).substr(1),ss:(""+(e.getSeconds()+100)).substr(1)};return t.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return n[arguments[0]]}))}}}function o(){return this.dateFormat(new Date,"yyyyMMdd")}function i(e,t){if(e){switch(t||(t="yyyy-MM-dd"),typeof e){case"string":e=new Date(e);break;case"number":e=new Date(e);break}if(!(!e instanceof Date)){var n={yyyy:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),MM:(""+(e.getMonth()+101)).substr(1),dd:(""+(e.getDate()+100)).substr(1),HH:(""+(e.getHours()+100)).substr(1),mm:(""+(e.getMinutes()+100)).substr(1),ss:(""+(e.getSeconds()+100)).substr(1)};return t.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,(function(){return n[arguments[0]]}))}}}function a(e,t){var n=!1,r=Date.parse(e),o=Date.parse(t),i=new Date(o).setHours(0,0,0,0);return r<i&&(n=!0),n}function s(e,t){var n=!1,r=Date.parse(e),o=Date.parse(t);return r<o&&(n=!0),n}function u(e){if(e){var t=Date.parse(e),n=Date.parse(new Date),r=Math.abs(n-t);if(r>6048e5){var o=new Date(t),i=o.getFullYear(),a=o.getMonth()+1,s=o.getDate(),u=(new Date).getFullYear();return u==i?a+"月"+s+"日":i+"年"+a+"月"+s+"日"}if(r<6048e5&&r>864e5){var c=Math.floor(r/864e5);return c+"天前"}if(r<864e5&&r>36e5){c=Math.floor(r/36e5);return c+"小时前"}if(r<36e5&&r>=0)return"刚刚"}}function c(e){var t=/^[1][3,4,5,7,8,9][0-9]{9}$/;return!(!t.test(e)||11!=e.length)}function f(){var e=new Date,t="user/"+e.getFullYear()+(""+(e.getMonth()+101)).substr(1)+"/";return t}function l(e){var t="",n=6e4,r=60*n,o=24*r,i=30*o,a=(new Date).getTime(),s=a-e;if(!(s<0)){var u=s/i,c=s/(7*o),f=s/o,l=s/r,p=s/n;return t=u>=1?parseInt(u)+"月前":c>=1?parseInt(c)+"周前":f>=1?parseInt(f)+"天前":l>=1?parseInt(l)+"小时前":p>=1?parseInt(p)+"分钟前":"刚刚",t}}e.exports={isEmpty:n,dateFormat:r,today:o,formatTime:i,isDayBefore:a,isTimeBefore:s,formatCreateTime:u,isPhoneAvailable:c,cloudUploadPath:f,getDateDiff:l}},"1e0c":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setSdkVersion=u,t.getSdkVersion=c,t.setSdkName=f,t.getSdkName=l,t.setEndPoint=g,t.setRegionLevelEndpoint=v,t.getEndPoint=_,t.LOGINTYPE=t.DATA_VERSION=void 0;var r=n("5fbe"),o=r.constants.setSdkName,i=r.constants.setProtocol,a="",s="@cloudbase/js-sdk";function u(e){a=e}function c(){return a}function f(e){s=e,o(e)}function l(){return s}var p="2020-01-10";t.DATA_VERSION=p;var h,d="undefined"!==typeof location&&"http:"===location.protocol?"http:":"https:",y="//tcb-api.tencentcloudapi.com/web";function g(e,t){y=e,t&&(d=t,i(t))}function v(e,t,n){var r=t?"//"+e+"."+t+".tcb-api.tencentcloudapi.com/web":"//"+e+".ap-shanghai.tcb-api.tencentcloudapi.com/web";g(r,n)}function _(){return{BASE_URL:y,PROTOCOL:d}}t.LOGINTYPE=h,function(e){e["ANONYMOUS"]="ANONYMOUS",e["WECHAT"]="WECHAT",e["CUSTOM"]="CUSTOM",e["NULL"]="NULL"}(h||(t.LOGINTYPE=h={}))}).call(this,n("4362"))},"1f74":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={SYMBOL_UNSET_FIELD_NAME:!0,SYMBOL_UPDATE_COMMAND:!0,SYMBOL_QUERY_COMMAND:!0,SYMBOL_LOGIC_COMMAND:!0,SYMBOL_GEO_POINT:!0,SYMBOL_GEO_LINE_STRING:!0,SYMBOL_GEO_POLYGON:!0,SYMBOL_GEO_MULTI_POINT:!0,SYMBOL_GEO_MULTI_LINE_STRING:!0,SYMBOL_GEO_MULTI_POLYGON:!0,SYMBOL_SERVER_DATE:!0,SYMBOL_REGEXP:!0};t.SYMBOL_REGEXP=t.SYMBOL_SERVER_DATE=t.SYMBOL_GEO_MULTI_POLYGON=t.SYMBOL_GEO_MULTI_LINE_STRING=t.SYMBOL_GEO_MULTI_POINT=t.SYMBOL_GEO_POLYGON=t.SYMBOL_GEO_LINE_STRING=t.SYMBOL_GEO_POINT=t.SYMBOL_LOGIC_COMMAND=t.SYMBOL_QUERY_COMMAND=t.SYMBOL_UPDATE_COMMAND=t.SYMBOL_UNSET_FIELD_NAME=void 0;var o=a(n("d4ea"));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=o.default.for("UNSET_FIELD_NAME");t.SYMBOL_UNSET_FIELD_NAME=s;var u=o.default.for("UPDATE_COMMAND");t.SYMBOL_UPDATE_COMMAND=u;var c=o.default.for("QUERY_COMMAND");t.SYMBOL_QUERY_COMMAND=c;var f=o.default.for("LOGIC_COMMAND");t.SYMBOL_LOGIC_COMMAND=f;var l=o.default.for("GEO_POINT");t.SYMBOL_GEO_POINT=l;var p=o.default.for("SYMBOL_GEO_LINE_STRING");t.SYMBOL_GEO_LINE_STRING=p;var h=o.default.for("SYMBOL_GEO_POLYGON");t.SYMBOL_GEO_POLYGON=h;var d=o.default.for("SYMBOL_GEO_MULTI_POINT");t.SYMBOL_GEO_MULTI_POINT=d;var y=o.default.for("SYMBOL_GEO_MULTI_LINE_STRING");t.SYMBOL_GEO_MULTI_LINE_STRING=y;var g=o.default.for("SYMBOL_GEO_MULTI_POLYGON");t.SYMBOL_GEO_MULTI_POLYGON=g;var v=o.default.for("SERVER_DATE");t.SYMBOL_SERVER_DATE=v;var _=o.default.for("REGEXP");t.SYMBOL_REGEXP=_},"1fb5":function(e,t,n){"use strict";t.byteLength=f,t.toByteArray=p,t.fromByteArray=y;for(var r=[],o=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function f(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function l(e,t,n){return 3*(t+n)/4-n}function p(e){var t,n,r=c(e),a=r[0],s=r[1],u=new i(l(e,a,s)),f=0,p=s>0?a-4:a;for(n=0;n<p;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],u[f++]=t>>16&255,u[f++]=t>>8&255,u[f++]=255&t;return 2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,u[f++]=255&t),1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,u[f++]=t>>8&255,u[f++]=255&t),u}function h(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function d(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(h(r));return o.join("")}function y(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,u=n-o;s<u;s+=a)i.push(d(e,s,s+a>u?u:s+a));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},"21da":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuerySerializer=void 0;var r=n("fe94"),o=n("8fd0"),i=n("1f74"),a=n("7319"),s=n("0fc8"),u=n("caf4"),c=n("d877"),f=n("9911");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var y=function(){function e(){p(this,e)}return d(e,null,[{key:"encode",value:function(e){var t=new g;return t.encodeQuery(e)}},{key:"encodeEJSON",value:function(e){var t=new g;return(0,c.stringifyByEJSON)(t.encodeQuery(e))}}]),e}();t.QuerySerializer=y;var g=function(){function e(){p(this,e)}return d(e,[{key:"encodeQuery",value:function(e,t){return(0,u.isConversionRequired)(e)?(0,o.isLogicCommand)(e)?this.encodeLogicCommand(e):(0,r.isQueryCommand)(e)?this.encodeQueryCommand(e):(0,a.isRegExp)(e)?l({},t,this.encodeRegExp(e)):(0,a.isDate)(e)?l({},t,e):l({},t,this.encodeQueryObject(e)):(0,a.isObject)(e)?this.encodeQueryObject(e):e}},{key:"encodeRegExp",value:function(e){return{$regularExpression:{pattern:e.source,options:e.flags}}}},{key:"encodeLogicCommand",value:function(e){var t=this;switch(e.operator){case o.LOGIC_COMMANDS_LITERAL.NOR:case o.LOGIC_COMMANDS_LITERAL.AND:case o.LOGIC_COMMANDS_LITERAL.OR:var n=(0,s.operatorToString)(e.operator),r=e.operands.map((function(n){return t.encodeQuery(n,e.fieldName)}));return l({},n,r);case o.LOGIC_COMMANDS_LITERAL.NOT:var i=(0,s.operatorToString)(e.operator),u=e.operands[0];if((0,a.isRegExp)(u))return l({},e.fieldName,l({},i,this.encodeRegExp(u)));var c=this.encodeQuery(u)[e.fieldName];return l({},e.fieldName,l({},i,c));default:var f=(0,s.operatorToString)(e.operator);if(1===e.operands.length){var p=this.encodeQuery(e.operands[0]);return l({},f,p)}var h=e.operands.map(this.encodeQuery.bind(this));return l({},f,h)}}},{key:"encodeQueryCommand",value:function(e){return(0,r.isComparisonCommand)(e),this.encodeComparisonCommand(e)}},{key:"encodeComparisonCommand",value:function(e){if(e.fieldName===i.SYMBOL_UNSET_FIELD_NAME)throw new Error("Cannot encode a comparison command with unset field name");var t=(0,s.operatorToString)(e.operator);switch(e.operator){case r.QUERY_COMMANDS_LITERAL.EQ:case r.QUERY_COMMANDS_LITERAL.NEQ:case r.QUERY_COMMANDS_LITERAL.LT:case r.QUERY_COMMANDS_LITERAL.LTE:case r.QUERY_COMMANDS_LITERAL.GT:case r.QUERY_COMMANDS_LITERAL.GTE:case r.QUERY_COMMANDS_LITERAL.ELEM_MATCH:case r.QUERY_COMMANDS_LITERAL.EXISTS:case r.QUERY_COMMANDS_LITERAL.SIZE:case r.QUERY_COMMANDS_LITERAL.MOD:return l({},e.fieldName,l({},t,(0,u.encodeInternalDataType)(e.operands[0])));case r.QUERY_COMMANDS_LITERAL.IN:case r.QUERY_COMMANDS_LITERAL.NIN:case r.QUERY_COMMANDS_LITERAL.ALL:return l({},e.fieldName,l({},t,(0,u.encodeInternalDataType)(e.operands)));case r.QUERY_COMMANDS_LITERAL.GEO_NEAR:var n=e.operands[0];return l({},e.fieldName,{$nearSphere:{$geometry:n.geometry.toJSON(),$maxDistance:n.maxDistance,$minDistance:n.minDistance}});case r.QUERY_COMMANDS_LITERAL.GEO_WITHIN:var o=e.operands[0];if(o.centerSphere){f.Validate.isCentersPhere(o.centerSphere);var a=o.centerSphere;return a[0]._internalType===i.SYMBOL_GEO_POINT?l({},e.fieldName,{$geoWithin:{$centerSphere:[a[0].toJSON().coordinates,a[1]]}}):l({},e.fieldName,{$geoWithin:{$centerSphere:o.centerSphere}})}return l({},e.fieldName,{$geoWithin:{$geometry:o.geometry.toJSON()}});case r.QUERY_COMMANDS_LITERAL.GEO_INTERSECTS:var c=e.operands[0];return l({},e.fieldName,{$geoIntersects:{$geometry:c.geometry.toJSON()}});default:return l({},e.fieldName,l({},t,(0,u.encodeInternalDataType)(e.operands[0])))}}},{key:"encodeQueryObject",value:function(e){var t=(0,u.flattenQueryObject)(e);for(var n in t){var i=t[n];if((0,o.isLogicCommand)(i)){t[n]=i._setFieldName(n);var a=this.encodeLogicCommand(t[n]);this.mergeConditionAfterEncode(t,a,n)}else if((0,r.isComparisonCommand)(i)){t[n]=i._setFieldName(n);var s=this.encodeComparisonCommand(t[n]);this.mergeConditionAfterEncode(t,s,n)}else(0,u.isConversionRequired)(i)&&(t[n]=(0,u.encodeInternalDataType)(i))}return t}},{key:"mergeConditionAfterEncode",value:function(e,t,n){for(var r in t[n]||delete e[n],t)e[r]?(0,a.isArray)(e[r])?e[r]=e[r].concat(t[r]):(0,a.isObject)(e[r])?(0,a.isObject)(t[r])?Object.assign(e,t):(console.warn("unmergable condition, query is object but condition is ".concat((0,a.getType)(t),", can only overwrite"),t,n),e[r]=t[r]):(console.warn("to-merge query is of type ".concat((0,a.getType)(e),", can only overwrite"),e,t,n),e[r]=t[r]):e[r]=t[r]}}]),e}()},"221a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnonymousAuthProvider=void 0;var r=n("fd2f"),o=n("5fbe"),i=n("2707"),a=n("be7e"),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p=o.constants.ERRORS,h=o.constants.COMMUNITY_SITE_URL,d=o.utils.throwError,y=o.utils.isString,g=o.events.addEventListener,v=o.helpers.catchErrorsDecorator,_=function(e){function t(t){var n=e.call(this,t)||this;return n._onConverted=n._onConverted.bind(n),g(a.EVENTS.ANONYMOUS_CONVERTED,n._onConverted),n}return s(t,e),t.prototype.signIn=function(){return f(this,void 0,void 0,(function(){var e,t,n,r,o,s,u;return l(this,(function(c){switch(c.label){case 0:return[4,this._cache.updatePersistenceAsync("local")];case 1:return c.sent(),e=this._cache.keys,t=e.anonymousUuidKey,n=e.refreshTokenKey,[4,this._cache.getStoreAsync(t)];case 2:return r=c.sent(),[4,this._cache.getStoreAsync(n)];case 3:return o=c.sent(),[4,this._request.send("auth.signInAnonymously",{anonymous_uuid:r,refresh_token:o})];case 4:return s=c.sent(),s.uuid&&s.refresh_token?[4,this._setAnonymousUUID(s.uuid)]:[3,10];case 5:return c.sent(),[4,this.setRefreshToken(s.refresh_token)];case 6:return c.sent(),[4,this._request.refreshAccessToken()];case 7:return c.sent(),a.eventBus.fire(a.EVENTS.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:i.LOGINTYPE.ANONYMOUS,persistence:"local"}),a.eventBus.fire(a.EVENTS.LOGIN_STATE_CHANGED),u=new a.LoginState({envId:this._config.env,cache:this._cache,request:this._request}),[4,u.checkLocalStateAsync()];case 8:return c.sent(),[4,u.user.refresh()];case 9:return c.sent(),[2,u];case 10:throw new Error(JSON.stringify({code:p.OPERATION_FAIL,msg:JSON.stringify(s)||"anonymous signIn failed"}))}}))}))},t.prototype.linkAndRetrieveDataWithTicket=function(e){return f(this,void 0,void 0,(function(){var t,n,r,o,s,u,c;return l(this,(function(f){switch(f.label){case 0:return y(e)||d(p.INVALID_PARAMS,"ticket must be a string"),t=this._cache.keys,n=t.anonymousUuidKey,r=t.refreshTokenKey,[4,this._cache.getStoreAsync(n)];case 1:return o=f.sent(),[4,this._cache.getStoreAsync(r)];case 2:return s=f.sent(),[4,this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:o,refresh_token:s,ticket:e})];case 3:return u=f.sent(),u.refresh_token?[4,this._clearAnonymousUUID()]:[3,8];case 4:return f.sent(),[4,this.setRefreshToken(u.refresh_token)];case 5:return f.sent(),[4,this._request.refreshAccessToken()];case 6:return f.sent(),a.eventBus.fire(a.EVENTS.ANONYMOUS_CONVERTED,{env:this._config.env}),a.eventBus.fire(a.EVENTS.LOGIN_TYPE_CHANGED,{loginType:i.LOGINTYPE.CUSTOM,persistence:"local"}),c=new a.LoginState({envId:this._config.env,cache:this._cache,request:this._request}),[4,c.checkLocalStateAsync()];case 7:return f.sent(),[2,c];case 8:d(p.OPERATION_FAIL,JSON.stringify(u)||"linkAndRetrieveDataWithTicket failed"),f.label=9;case 9:return[2]}}))}))},t.prototype._setAnonymousUUID=function(e){return f(this,void 0,void 0,(function(){var t,n,r;return l(this,(function(o){switch(o.label){case 0:return t=this._cache.keys,n=t.anonymousUuidKey,r=t.loginTypeKey,[4,this._cache.removeStoreAsync(n)];case 1:return o.sent(),[4,this._cache.setStoreAsync(n,e)];case 2:return o.sent(),[4,this._cache.setStoreAsync(r,i.LOGINTYPE.ANONYMOUS)];case 3:return o.sent(),[2]}}))}))},t.prototype._clearAnonymousUUID=function(){return f(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,this._cache.removeStoreAsync(this._cache.keys.anonymousUuidKey)];case 1:return e.sent(),[2]}}))}))},t.prototype._onConverted=function(e){return f(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=e.data.env,t!==this._config.env?[2]:[4,this._cache.updatePersistenceAsync(this._config.persistence)];case 1:return n.sent(),[2]}}))}))},u([v({title:"匿名登录失败",messages:["请确认以下各项：","  1 - 当前环境是否开启了匿名登录","  2 - 调用 auth().anonymouseProvider().signIn() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+h]}),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",Promise)],t.prototype,"signIn",null),t}(r.AuthProvider);t.AnonymousAuthProvider=_},2249:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractStorage=t.AbstractSDKRequest=t.StorageType=void 0,t.StorageType=r,function(e){e["local"]="local",e["none"]="none",e["session"]="session"}(r||(t.StorageType=r={}));var o=function(){function e(){}return e}();t.AbstractSDKRequest=o;var i=function(){function e(){}return e}();t.AbstractStorage=i},2365:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.transformPhone=t.sleep=t.printGroupLog=t.throwError=t.printInfo=t.printError=t.printWarn=t.execCallback=t.createPromiseCallback=t.removeParam=t.getHash=t.getQuery=t.toQueryString=t.createSign=t.formatUrl=t.genSeqId=t.isFormData=t.isInstanceOf=t.isNull=t.isPalinObject=t.isUndefined=t.isString=t.isArray=void 0;var o=r(n("0682")),i=r(n("46be")),a=r(n("e668")),s=n("e032");function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"string"===typeof e}function f(e){return"undefined"===typeof e}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function p(e){return"[object Null]"===Object.prototype.toString.call(e)}function h(e,t){return e instanceof t}function d(e){return"[object FormData]"===Object.prototype.toString.call(e)}function y(){return Math.random().toString(16).slice(2)}function g(e,t,n){void 0===n&&(n={});var r=/\?/.test(t),o="";for(var i in n)""===o?!r&&(t+="?"):o+="&",o+=i+"="+encodeURIComponent(n[i]);return t+=o,/^http(s)?\:\/\//.test(t)?t:""+e+t}function v(e){var t=i.default.stringify(e);return t=t.replace(/=+$/,""),t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t}function _(e,t){var n={alg:"HS256",typ:"JWT"},r=v(a.default.parse(JSON.stringify(n))),i=v(a.default.parse(JSON.stringify(e))),s=r+"."+i,u=v(o.default(s,t));return s+"."+u}function m(e){void 0===e&&(e={});var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function b(e,t){if("undefined"===typeof window)return!1;var n=t||window.location.search,r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=n.substr(n.indexOf("?")+1).match(r);return null!=o?o[2]:""}function E(e,t){var n,r=t.split("?")[0],o=[],i=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==i){o=i.split("&");for(var a=o.length-1;a>=0;a-=1)n=o[a].split("=")[0],n===e&&o.splice(a,1);r=r+"?"+o.join("&")}return r}function w(){var e;if(!Promise){e=function(){},e.promise={};var t=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}var n=new Promise((function(t,n){e=function(e,r){return e?n(e):t(r)}}));return e.promise=n,e}function S(e,t,n){if(void 0===n&&(n=null),e&&"function"===typeof e)return e(t,n);if(t)throw t;return n}function O(e,t){console.warn("["+s.getSdkName()+"]["+e+"]:"+t)}function A(e,t){console.error({code:e,msg:"["+s.getSdkName()+"]["+e+"]:"+t})}function I(e,t){console.log("["+s.getSdkName()+"]["+e+"]:"+t)}function T(e,t){throw new Error(JSON.stringify({code:e,msg:"["+s.getSdkName()+"]["+e+"]:"+t}))}function N(e){var t=e.title,n=e.subtitle,r=void 0===n?"":n,o=e.content,i=void 0===o?[]:o,a=e.printTrace,s=void 0!==a&&a,u=e.collapsed,c=void 0!==u&&u;c?console.groupCollapsed(t,r):console.group(t,r);for(var f=0,l=i;f<l.length;f++){var p=l[f],h=p.type,d=p.body;switch(h){case"info":console.log(d);break;case"warn":console.warn(d);break;case"error":console.error(d);break}}s&&console.trace("stack trace:"),console.groupEnd()}function R(e){return"+86"+e}t.isArray=u,t.isString=c,t.isUndefined=f,t.isPalinObject=l,t.isNull=p,t.isInstanceOf=h,t.isFormData=d,t.genSeqId=y,t.formatUrl=g,t.createSign=_,t.toQueryString=m,t.getQuery=b,t.getHash=function(e){if("undefined"===typeof window)return"";var t=window.location.hash.match(new RegExp("[#?&/]"+e+"=([^&#]*)"));return t?t[1]:""},t.removeParam=E,t.createPromiseCallback=w,t.execCallback=S,t.printWarn=O,t.printError=A,t.printInfo=I,t.throwError=T,t.printGroupLog=N,t.sleep=function(e){return void 0===e&&(e=0),new Promise((function(t){return setTimeout(t,e)}))},t.transformPhone=R},2707:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LOGINTYPE=void 0,t.LOGINTYPE=r,function(e){e["ANONYMOUS"]="ANONYMOUS",e["WECHAT"]="WECHAT",e["WECHAT_PUBLIC"]="WECHAT-PUBLIC",e["WECHAT_OPEN"]="WECHAT-OPEN",e["CUSTOM"]="CUSTOM",e["EMAIL"]="EMAIL",e["USERNAME"]="USERNAME",e["NULL"]="NULL",e["PHONE"]="PHONE"}(r||(t.LOGINTYPE=r={}))},"282d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPoint=void 0;var r=n("1f74"),o=n("6f5e"),i=n("7319");function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(t){if(f(this,e),!(0,i.isArray)(t))throw new TypeError('"points" must be of type Point[]. Received type '.concat(typeof t));if(0===t.length)throw new Error('"points" must contain 1 point at least');t.forEach((function(e){if(!(e instanceof o.Point))throw new TypeError('"points" must be of type Point[]. Received type '.concat(typeof e,"[]"))})),this.points=t}return p(e,[{key:"parse",value:function(e){return c({},e,{type:"MultiPoint",coordinates:this.points.map((function(e){return e.toJSON().coordinates}))})}},{key:"toJSON",value:function(){return{type:"MultiPoint",coordinates:this.points.map((function(e){return e.toJSON().coordinates}))}}},{key:"_internalType",get:function(){return r.SYMBOL_GEO_MULTI_POINT}}],[{key:"validate",value:function(e){if("MultiPoint"!==e.type||!(0,i.isArray)(e.coordinates))return!1;var t,n=a(e.coordinates);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!(0,i.isNumber)(r[0])||!(0,i.isNumber)(r[1]))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}}]),e}();t.MultiPoint=h},"295d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERRORS=void 0;var r={CREATE_WATCH_NET_ERROR:{code:"CREATE_WATCH_NET_ERROR",message:"create watch network error"},CREATE_WACTH_EXCEED_ERROR:{code:"CREATE_WACTH_EXCEED_ERROR",message:"maximum connections exceed"},CREATE_WATCH_SERVER_ERROR:{code:"CREATE_WATCH_SERVER_ERROR",message:"create watch server error"},CONN_ERROR:{code:"CONN_ERROR",message:"connection error"},INVALID_PARAM:{code:"INVALID_PARAM",message:"Invalid request param"},INSERT_DOC_FAIL:{code:"INSERT_DOC_FAIL",message:"insert document failed"},DATABASE_TRANSACTION_CONFLICT:{code:"DATABASE_TRANSACTION_CONFLICT",message:"database transaction conflict"},DATABASE_REQUEST_FAILED:{code:"DATABASE_REQUEST_FAILED",message:"database request failed"}};t.ERRORS=r},"2e91":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UsernameAuthProvider=void 0;var r=n("fd2f"),o=n("be7e"),i=n("2707"),a=n("5fbe"),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p=a.utils.printWarn,h=a.constants.ERRORS,d=a.constants.COMMUNITY_SITE_URL,y=a.helpers.catchErrorsDecorator,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.signIn=function(e,t){return f(this,void 0,void 0,(function(){var n,r,a,s,u,c,f,d,y;return l(this,(function(l){switch(l.label){case 0:if("string"!==typeof e)throw new Error(JSON.stringify({code:h.INVALID_PARAMS,msg:"username must be a string"}));return"string"!==typeof t&&(t="",p(h.INVALID_PARAMS,"password is empty")),n=this._cache.keys.refreshTokenKey,s=(a=this._request).send,u=["auth.signIn"],c={loginType:i.LOGINTYPE.USERNAME,username:e,password:t},[4,this._cache.getStoreAsync(n)];case 1:return[4,s.apply(a,u.concat([(c.refresh_token=l.sent()||"",c)]))];case 2:return r=l.sent(),f=r.refresh_token,d=r.access_token_expire,y=r.access_token,f?[4,this.setRefreshToken(f)]:[3,9];case 3:return l.sent(),y&&d?[4,this.setAccessToken(y,d)]:[3,5];case 4:return l.sent(),[3,7];case 5:return[4,this._request.refreshAccessToken()];case 6:l.sent(),l.label=7;case 7:return[4,this.refreshUserInfo()];case 8:return l.sent(),o.eventBus.fire(o.EVENTS.LOGIN_STATE_CHANGED),o.eventBus.fire(o.EVENTS.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:i.LOGINTYPE.USERNAME,persistence:this._config.persistence}),[2,new o.LoginState({envId:this._config.env,cache:this._cache,request:this._request})];case 9:throw r.code?new Error(JSON.stringify({code:h.OPERATION_FAIL,msg:"login by username failed:["+r.code+"] "+r.message})):new Error(JSON.stringify({code:h.OPERATION_FAIL,msg:"login by username failed"}));case 10:return[2]}}))}))},u([y({title:"用户名密码登录失败",messages:["请确认以下各项：","  1 - 调用 auth().signInWithUsernameAndPassword() 的语法或参数是否正确","  2 - 当前环境是否开通了用户名密码登录","  3 - 用户名密码是否匹配","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+d]}),c("design:type",Function),c("design:paramtypes",[String,String]),c("design:returntype",Promise)],t.prototype,"signIn",null),t}(r.AuthProvider);t.UsernameAuthProvider=g},"2f62":function(e,t,n){"use strict";n.r(t),function(e){
/*!
 * vuex v3.4.0
 * (c) 2020 Evan You
 * @license MIT
 */
function r(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:r});else{var n=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[r].concat(e.init):r,n.call(this,e)}}function r(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}n.d(t,"Store",(function(){return g})),n.d(t,"createNamespacedHelpers",(function(){return M})),n.d(t,"install",(function(){return D})),n.d(t,"mapActions",(function(){return B})),n.d(t,"mapGetters",(function(){return L})),n.d(t,"mapMutations",(function(){return C})),n.d(t,"mapState",(function(){return P}));var o="undefined"!==typeof window?window:"undefined"!==typeof e?e:{},i=o.__VUE_DEVTOOLS_GLOBAL_HOOK__;function a(e){i&&(e._devtoolHook=i,i.emit("vuex:init",e),i.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){i.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){i.emit("vuex:action",e,t)}),{prepend:!0}))}function s(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function u(e){return null!==e&&"object"===typeof e}function c(e){return e&&"function"===typeof e.then}function f(e,t){return function(){return e(t)}}var l=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},p={namespaced:{configurable:!0}};p.namespaced.get=function(){return!!this._rawModule.namespaced},l.prototype.addChild=function(e,t){this._children[e]=t},l.prototype.removeChild=function(e){delete this._children[e]},l.prototype.getChild=function(e){return this._children[e]},l.prototype.hasChild=function(e){return e in this._children},l.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},l.prototype.forEachChild=function(e){s(this._children,e)},l.prototype.forEachGetter=function(e){this._rawModule.getters&&s(this._rawModule.getters,e)},l.prototype.forEachAction=function(e){this._rawModule.actions&&s(this._rawModule.actions,e)},l.prototype.forEachMutation=function(e){this._rawModule.mutations&&s(this._rawModule.mutations,e)},Object.defineProperties(l.prototype,p);var h=function(e){this.register([],e,!1)};function d(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return void 0;d(e.concat(r),t.getChild(r),n.modules[r])}}h.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},h.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},h.prototype.update=function(e){d([],this.root,e)},h.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var o=new l(t,n);if(0===e.length)this.root=o;else{var i=this.get(e.slice(0,-1));i.addChild(e[e.length-1],o)}t.modules&&s(t.modules,(function(t,o){r.register(e.concat(o),t,n)}))},h.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];t.getChild(n).runtime&&t.removeChild(n)},h.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return t.hasChild(n)};var y;var g=function(e){var t=this;void 0===e&&(e={}),!y&&"undefined"!==typeof window&&window.Vue&&D(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new h(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new y,this._makeLocalGettersCache=Object.create(null);var o=this,i=this,s=i.dispatch,u=i.commit;this.dispatch=function(e,t){return s.call(o,e,t)},this.commit=function(e,t,n){return u.call(o,e,t,n)},this.strict=r;var c=this._modules.root.state;E(this,c,[],this._modules.root),b(this,c),n.forEach((function(e){return e(t)}));var f=void 0!==e.devtools?e.devtools:y.config.devtools;f&&a(this)},v={state:{configurable:!0}};function _(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function m(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;E(e,n,[],e._modules.root,!0),b(e,n,t)}function b(e,t,n){var r=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,i={};s(o,(function(t,n){i[n]=f(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var a=y.config.silent;y.config.silent=!0,e._vm=new y({data:{$$state:t},computed:i}),y.config.silent=a,e.strict&&T(e),r&&(n&&e._withCommit((function(){r._data.$$state=null})),y.nextTick((function(){return r.$destroy()})))}function E(e,t,n,r,o){var i=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=r),!i&&!o){var s=N(t,n.slice(0,-1)),u=n[n.length-1];e._withCommit((function(){y.set(s,u,r.state)}))}var c=r.context=w(e,a,n);r.forEachMutation((function(t,n){var r=a+n;O(e,r,t,c)})),r.forEachAction((function(t,n){var r=t.root?n:a+n,o=t.handler||t;A(e,r,o,c)})),r.forEachGetter((function(t,n){var r=a+n;I(e,r,t,c)})),r.forEachChild((function(r,i){E(e,t,n.concat(i),r,o)}))}function w(e,t,n){var r=""===t,o={dispatch:r?e.dispatch:function(n,r,o){var i=R(n,r,o),a=i.payload,s=i.options,u=i.type;return s&&s.root||(u=t+u),e.dispatch(u,a)},commit:r?e.commit:function(n,r,o){var i=R(n,r,o),a=i.payload,s=i.options,u=i.type;s&&s.root||(u=t+u),e.commit(u,a,s)}};return Object.defineProperties(o,{getters:{get:r?function(){return e.getters}:function(){return S(e,t)}},state:{get:function(){return N(e.state,n)}}}),o}function S(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(o){if(o.slice(0,r)===t){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return e.getters[o]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function O(e,t,n,r){var o=e._mutations[t]||(e._mutations[t]=[]);o.push((function(t){n.call(e,r.state,t)}))}function A(e,t,n,r){var o=e._actions[t]||(e._actions[t]=[]);o.push((function(t){var o=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return c(o)||(o=Promise.resolve(o)),e._devtoolHook?o.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):o}))}function I(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)})}function T(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function N(e,t){return t.reduce((function(e,t){return e[t]}),e)}function R(e,t,n){return u(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function D(e){y&&e===y||(y=e,r(y))}v.state.get=function(){return this._vm._data.$$state},v.state.set=function(e){0},g.prototype.commit=function(e,t,n){var r=this,o=R(e,t,n),i=o.type,a=o.payload,s=(o.options,{type:i,payload:a}),u=this._mutations[i];u&&(this._withCommit((function(){u.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(s,r.state)})))},g.prototype.dispatch=function(e,t){var n=this,r=R(e,t),o=r.type,i=r.payload,a={type:o,payload:i},s=this._actions[o];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,n.state)}))}catch(c){0}var u=s.length>1?Promise.all(s.map((function(e){return e(i)}))):s[0](i);return new Promise((function(e,t){u.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,n.state)}))}catch(c){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,n.state,e)}))}catch(c){0}t(e)}))}))}},g.prototype.subscribe=function(e,t){return _(e,this._subscribers,t)},g.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return _(n,this._actionSubscribers,t)},g.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch((function(){return e(r.state,r.getters)}),t,n)},g.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},g.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),E(this,this.state,e,this._modules.get(e),n.preserveState),b(this,this.state)},g.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=N(t.state,e.slice(0,-1));y.delete(n,e[e.length-1])})),m(this)},g.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},g.prototype.hotUpdate=function(e){this._modules.update(e),m(this,!0)},g.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(g.prototype,v);var P=j((function(e,t){var n={};return x(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=U(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"===typeof o?o.call(this,t,n):t[o]},n[r].vuex=!0})),n})),C=j((function(e,t){var n={};return x(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.commit;if(e){var i=U(this.$store,"mapMutations",e);if(!i)return;r=i.context.commit}return"function"===typeof o?o.apply(this,[r].concat(t)):r.apply(this.$store,[o].concat(t))}})),n})),L=j((function(e,t){var n={};return x(t).forEach((function(t){var r=t.key,o=t.val;o=e+o,n[r]=function(){if(!e||U(this.$store,"mapGetters",e))return this.$store.getters[o]},n[r].vuex=!0})),n})),B=j((function(e,t){var n={};return x(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var i=U(this.$store,"mapActions",e);if(!i)return;r=i.context.dispatch}return"function"===typeof o?o.apply(this,[r].concat(t)):r.apply(this.$store,[o].concat(t))}})),n})),M=function(e){return{mapState:P.bind(null,e),mapGetters:L.bind(null,e),mapMutations:C.bind(null,e),mapActions:B.bind(null,e)}};function x(e){return k(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function k(e){return Array.isArray(e)||u(e)}function j(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function U(e,t,n){var r=e._modulesNamespaceMap[n];return r}var $={Store:g,install:D,version:"3.4.0",mapState:P,mapMutations:C,mapGetters:L,mapActions:B,createNamespacedHelpers:M};t["default"]=$}.call(this,n("c8ba"))},"2f7e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=h(n("a996")),o=n("be7e"),i=n("502e"),a=n("93dc"),s=n("0502"),u=n("b0d0"),c=n("31ce"),f=p(n("7145"));function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function h(e){return e&&e.__esModule?e:{default:e}}var d=f.version;r.default.registerVersion(d);try{(0,o.registerAuth)(r.default),(0,i.registerFunctions)(r.default),(0,a.registerStorage)(r.default),(0,c.registerDatabase)(r.default),(0,s.registerRealtime)(r.default),(0,u.registerAnalytics)(r.default)}catch(g){}try{window.cloudbase=r.default}catch(g){}var y=r.default;t.default=y},"31ce":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerDatabase=u;var r=n("f399"),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)},i="database";function a(e){var t=this.platform,n=t.adapter,i=t.runtime;return r.Db.reqClass=this.request.constructor,r.Db.getAccessToken=this.authInstance?this.authInstance.getAccessToken.bind(this.authInstance):function(){return""},r.Db.runtime=i,this.wsClientClass&&(r.Db.wsClass=n.wsClass,r.Db.wsClientClass=this.wsClientClass),r.Db.ws||(r.Db.ws=null),new r.Db(o(o({},this.config),e))}var s={name:i,entity:{database:a}};try{cloudbase.registerComponent(s)}catch(c){}function u(e){try{e.registerComponent(s)}catch(c){console.warn(c)}}},"36ac":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERR_CODE=void 0;var r={UNKNOWN_ERROR:"UNKNOWN_ERROR",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:"SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:"SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:"SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR"};t.ERR_CODE=r},"36b8":function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},i=o.Base=function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=o.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){t=t;var n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var o=(n<<16)+t&r;return o/=4294967296,o+=.5,o*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=o(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,t)}}),s=r.enc={},u=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},f=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,s=4*i,u=o/s;u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var c=u*i,f=e.min(4*c,o);if(c){for(var l=0;l<c;l+=i)this._doProcessBlock(r,l);var p=r.splice(0,c);n.sigBytes-=f}return new a.init(p,f)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(o.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math);return e}))},"3a5e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiLineString=void 0;var r=n("1f74"),o=n("7319"),i=n("6958");function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(t){if(f(this,e),!(0,o.isArray)(t))throw new TypeError('"lines" must be of type LineString[]. Received type '.concat(typeof t));if(0===t.length)throw new Error("Polygon must contain 1 linestring at least");t.forEach((function(e){if(!(e instanceof i.LineString))throw new TypeError('"lines" must be of type LineString[]. Received type '.concat(typeof e,"[]"))})),this.lines=t}return p(e,[{key:"parse",value:function(e){return c({},e,{type:"MultiLineString",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))})}},{key:"toJSON",value:function(){return{type:"MultiLineString",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}}},{key:"_internalType",get:function(){return r.SYMBOL_GEO_MULTI_LINE_STRING}}],[{key:"validate",value:function(e){if("MultiLineString"!==e.type||!(0,o.isArray)(e.coordinates))return!1;var t,n=a(e.coordinates);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,s=a(i);try{for(s.s();!(r=s.n()).done;){var u=r.value;if(!(0,o.isNumber)(u[0])||!(0,o.isNumber)(u[1]))return!1}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}return!0}}]),e}();t.MultiLineString=h},"3b46":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERRORS=void 0,t.ERRORS={INVALID_PARAMS:"INVALID_PARAMS",INVALID_SYNTAX:"INVALID_SYNTAX",INVALID_OPERATION:"INVALID_OPERATION",OPERATION_FAIL:"OPERATION_FAIL",NETWORK_ERROR:"NETWORK_ERROR",UNKOWN_ERROR:"UNKOWN_ERROR"}},"3d1a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualWebSocketClient=void 0;var r,o=y(n("a34a")),i=y(n("a6ea")),a=y(n("f418")),s=y(n("cd3f")),u=n("a405"),c=n("7e98"),f=n("36ac"),l=n("d877"),p=n("8844"),h=n("7484"),d=n("752b");function y(e){return e&&e.__esModule?e:{default:e}}function g(e){return m(e)||_(e)||E(e)||v()}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function m(e){if(Array.isArray(e))return w(e)}function b(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=E(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function E(e,t){if(e){if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){S(i,r,o,a,s,"next",e)}function s(e){S(i,r,o,a,s,"throw",e)}a(void 0)}))}}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}(function(e){e["LOGGINGIN"]="LOGGINGIN",e["INITING"]="INITING",e["REBUILDING"]="REBUILDING",e["ACTIVE"]="ACTIVE",e["ERRORED"]="ERRORED",e["CLOSING"]="CLOSING",e["CLOSED"]="CLOSED",e["PAUSED"]="PAUSED",e["RESUMING"]="RESUMING"})(r||(r={}));var N=100,R=2,D=2,P=1e4,C=1e4,L=1e4,B=function(){function e(t){var n=this;A(this,e),this.watchStatus=r.INITING,this._login=function(){var e=O(o.default.mark((function e(t,i){var a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.watchStatus=r.LOGGINGIN,e.next=3,n.login(t,i);case 3:return a=e.sent,n.envId||(n.envId=a.envId),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.initWatch=function(){var e=O(o.default.mark((function e(t){var i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n._initWatchPromise){e.next=2;break}return e.abrupt("return",n._initWatchPromise);case 2:return n._initWatchPromise=new Promise(function(){var e=O(o.default.mark((function e(i,a){var s,c,f,l,p,d,y,g,v,_,m;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n.watchStatus!==r.PAUSED){e.next=4;break}return console.log("[realtime] initWatch cancelled on pause"),e.abrupt("return",i());case 4:return e.next=6,n._login(n.envId,t);case 6:if(s=e.sent,c=s.envId,n.watchStatus!==r.PAUSED){e.next=11;break}return console.log("[realtime] initWatch cancelled on pause"),e.abrupt("return",i());case 11:return n.watchStatus=r.INITING,f={watchId:n.watchId,requestId:(0,u.genRequestId)(),msgType:"INIT_WATCH",msgData:{envId:c,collName:n.collectionName,query:n.query,limit:n.limit,orderBy:n.orderBy}},e.next=15,n.send({msg:f,waitResponse:!0,skipOnMessage:!0,timeout:C});case 15:if(l=e.sent,p=l.msgData,d=p.events,y=p.currEvent,n.sessionInfo={queryID:l.msgData.queryID,currentEventId:y-1,currentDocs:[]},d.length>0){g=b(d);try{for(g.s();!(v=g.n()).done;)_=v.value,_.ID=y}catch(o){g.e(o)}finally{g.f()}n.handleServerEvents(l)}else n.sessionInfo.currentEventId=y,m=new h.Snapshot({id:y,docChanges:[],docs:[],type:"init"}),n.listener.onChange(m),n.scheduleSendACK();n.onWatchStart(n,n.sessionInfo.queryID),n.watchStatus=r.ACTIVE,n._availableRetries.INIT_WATCH=R,i(),e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](0),n.handleWatchEstablishmentError(e.t0,{operationName:"INIT_WATCH",resolve:i,reject:a});case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n){return e.apply(this,arguments)}}()),i=!1,e.prev=4,e.next=7,n._initWatchPromise;case 7:i=!0;case 8:return e.prev=8,n._initWatchPromise=void 0,e.finish(8);case 11:console.log("[realtime] initWatch ".concat(i?"success":"fail"));case 12:case"end":return e.stop()}}),e,null,[[4,,8,11]])})));return function(t){return e.apply(this,arguments)}}(),this.rebuildWatch=function(){var e=O(o.default.mark((function e(t){var i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n._rebuildWatchPromise){e.next=2;break}return e.abrupt("return",n._rebuildWatchPromise);case 2:return n._rebuildWatchPromise=new Promise(function(){var e=O(o.default.mark((function e(i,a){var s,c,f,l;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n.watchStatus!==r.PAUSED){e.next=4;break}return console.log("[realtime] rebuildWatch cancelled on pause"),e.abrupt("return",i());case 4:return e.next=6,n._login(n.envId,t);case 6:if(s=e.sent,c=s.envId,n.sessionInfo){e.next=10;break}throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");case 10:if(n.watchStatus!==r.PAUSED){e.next=13;break}return console.log("[realtime] rebuildWatch cancelled on pause"),e.abrupt("return",i());case 13:return n.watchStatus=r.REBUILDING,f={watchId:n.watchId,requestId:(0,u.genRequestId)(),msgType:"REBUILD_WATCH",msgData:{envId:c,collName:n.collectionName,queryID:n.sessionInfo.queryID,eventID:n.sessionInfo.currentEventId}},e.next=17,n.send({msg:f,waitResponse:!0,skipOnMessage:!1,timeout:L});case 17:l=e.sent,n.handleServerEvents(l),n.watchStatus=r.ACTIVE,n._availableRetries.REBUILD_WATCH=R,i(),e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](0),n.handleWatchEstablishmentError(e.t0,{operationName:"REBUILD_WATCH",resolve:i,reject:a});case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,n){return e.apply(this,arguments)}}()),i=!1,e.prev=4,e.next=7,n._rebuildWatchPromise;case 7:i=!0;case 8:return e.prev=8,n._rebuildWatchPromise=void 0,e.finish(8);case 11:console.log("[realtime] rebuildWatch ".concat(i?"success":"fail"));case 12:case"end":return e.stop()}}),e,null,[[4,,8,11]])})));return function(t){return e.apply(this,arguments)}}(),this.handleWatchEstablishmentError=function(){var e=O(o.default.mark((function e(t,i){var a,s,u;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a="INIT_WATCH"===i.operationName,s=function(){n.closeWithError(new c.CloudSDKError({errCode:a?f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:t})),i.reject(t)},u=function(e){n.useRetryTicket(i.operationName)?a?(n._initWatchPromise=void 0,i.resolve(n.initWatch(e))):(n._rebuildWatchPromise=void 0,i.resolve(n.rebuildWatch(e))):s()},n.handleCommonError(t,{onSignError:function(){return u(!0)},onTimeoutError:function(){return u(!1)},onNotRetryableError:s,onCancelledError:i.reject,onUnknownError:function(){var e=O(o.default.mark((function e(){var t;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=function(){var e=O(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.pause(),e.next=3,n.onceWSConnected();case 3:u(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.isWSConnected()){e.next=7;break}return e.next=5,t();case 5:e.next=19;break;case 7:return e.next=9,(0,l.sleep)(N);case 9:if(n.watchStatus!==r.PAUSED){e.next=13;break}i.reject(new c.CancelledError("".concat(i.operationName," cancelled due to pause after unknownError"))),e.next=19;break;case 13:if(n.isWSConnected()){e.next=18;break}return e.next=16,t();case 16:e.next=19;break;case 18:u(!1);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](0),u(!0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));function t(){return e.apply(this,arguments)}return t}()});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.closeWatch=O(o.default.mark((function e(){var t,i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.sessionInfo?n.sessionInfo.queryID:"",n.watchStatus===r.ACTIVE){e.next=5;break}return n.watchStatus=r.CLOSED,n.onWatchClose(n,t),e.abrupt("return");case 5:return e.prev=5,n.watchStatus=r.CLOSING,i={watchId:n.watchId,requestId:(0,u.genRequestId)(),msgType:"CLOSE_WATCH",msgData:null},e.next=10,n.send({msg:i});case 10:n.sessionInfo=void 0,n.watchStatus=r.CLOSED,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),n.closeWithError(new c.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL,errMsg:e.t0}));case 17:return e.prev=17,n.onWatchClose(n,t),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,14,17,20]])}))),this.scheduleSendACK=function(){n.clearACKSchedule(),n._ackTimeoutId=setTimeout((function(){n._waitExpectedTimeoutId?n.scheduleSendACK():n.sendACK()}),P)},this.clearACKSchedule=function(){n._ackTimeoutId&&clearTimeout(n._ackTimeoutId)},this.sendACK=O(o.default.mark((function e(){var t,i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n.watchStatus===r.ACTIVE){e.next=4;break}return n.scheduleSendACK(),e.abrupt("return");case 4:if(n.sessionInfo){e.next=7;break}return console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)"),e.abrupt("return");case 7:return t={watchId:n.watchId,requestId:(0,u.genRequestId)(),msgType:"CHECK_LAST",msgData:{queryID:n.sessionInfo.queryID,eventID:n.sessionInfo.currentEventId}},e.next=10,n.send({msg:t});case 10:n.scheduleSendACK(),e.next=26;break;case 13:if(e.prev=13,e.t0=e["catch"](0),!(0,d.isRealtimeErrorMessageError)(e.t0)){e.next=25;break}i=e.t0.payload,e.t1=i.msgData.code,e.next="CHECK_LOGIN_FAILED"===e.t1||"SIGN_EXPIRED_ERROR"===e.t1||"SIGN_INVALID_ERROR"===e.t1||"SIGN_PARAM_INVALID"===e.t1?20:"QUERYID_INVALID_ERROR"===e.t1||"SYS_ERR"===e.t1||"INVALIID_ENV"===e.t1||"COLLECTION_PERMISSION_DENIED"===e.t1?22:24;break;case 20:return n.rebuildWatch(),e.abrupt("return");case 22:return n.closeWithError(new c.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:i.msgData.code})),e.abrupt("return");case 24:return e.abrupt("break",25);case 25:n._availableRetries.CHECK_LAST&&n._availableRetries.CHECK_LAST>0?(n._availableRetries.CHECK_LAST--,n.scheduleSendACK()):n.closeWithError(new c.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:e.t0}));case 26:case"end":return e.stop()}}),e,null,[[0,13]])}))),this.handleCommonError=function(e,t){if((0,d.isRealtimeErrorMessageError)(e)){var n=e.payload;switch(n.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return void t.onNotRetryableError(e);default:return void t.onNotRetryableError(e)}}else{if((0,c.isTimeoutError)(e))return void t.onTimeoutError(e);if((0,c.isCancelledError)(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId="watchid_".concat(+new Date,"_").concat(Math.random()),this.envId=t.envId,this.collectionName=t.collectionName,this.query=t.query,this.limit=t.limit,this.orderBy=t.orderBy,this.send=t.send,this.login=t.login,this.isWSConnected=t.isWSConnected,this.onceWSConnected=t.onceWSConnected,this.getWaitExpectedTimeoutLength=t.getWaitExpectedTimeoutLength,this.onWatchStart=t.onWatchStart,this.onWatchClose=t.onWatchClose,this.debug=t.debug,this._availableRetries={INIT_WATCH:R,REBUILD_WATCH:R,CHECK_LAST:D},this.listener=new p.RealtimeListener({close:this.closeWatch,onChange:t.onChange,onError:t.onError,debug:this.debug,virtualClient:this}),this.initWatch()}return T(e,[{key:"useRetryTicket",value:function(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,console.log("[realtime] ".concat(e," use a retry ticket, now only ").concat(this._availableRetries[e]," retry left")),!0)}},{key:"handleServerEvents",value:function(){var e=O(o.default.mark((function e(t){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.scheduleSendACK(),e.next=4,this._handleServerEvents(t);case 4:this._postHandleServerEventsValidityCheck(t),e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](0),console.error("[realtime listener] internal non-fatal error: handle server events failed with error: ",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_handleServerEvents",value:function(){var e=O(o.default.mark((function e(t){var n,r,u,l,p,d,y,v,_,m,E,w=this;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.requestId,r=t.msgData.events,u=t.msgType,r.length&&this.sessionInfo){e.next=5;break}return e.abrupt("return");case 5:l=this.sessionInfo,e.prev=6,p=r.map(M),e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](6),this.closeWithError(new c.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e.t0})),e.abrupt("return");case 14:d=g(l.currentDocs),y=!1,v=o.default.mark((function e(r,v){var _,m,E,S,O,A,I,T,N,R,D,P,C,L,B,M,x;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(_=p[r],!(l.currentEventId>=_.id)){e.next=6;break}return!p[r-1]||_.id>p[r-1].id?console.warn("[realtime] duplicate event received, cur ".concat(l.currentEventId," but got ").concat(_.id)):console.error("[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ".concat(n,")")),e.abrupt("return","continue");case 6:if(l.currentEventId!==_.id-1){e.next=58;break}e.t0=_.dataType,e.next="update"===e.t0?10:"replace"===e.t0?22:"remove"===e.t0?27:"limit"===e.t0?30:42;break;case 10:if(_.doc){e.next=21;break}e.t1=_.queueType,e.next="update"===e.t1||"dequeue"===e.t1?14:"enqueue"===e.t1?17:20;break;case 14:if(m=d.find((function(e){return e._id===_.docId})),m){if(E=(0,s.default)(m),_.updatedFields)for(S in _.updatedFields)(0,i.default)(E,S,_.updatedFields[S]);if(_.removedFields){O=b(_.removedFields);try{for(O.s();!(A=O.n()).done;)I=A.value,(0,a.default)(E,I)}catch(o){O.e(o)}finally{O.f()}}_.doc=E}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated.");return e.abrupt("break",21);case 17:throw T=new c.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId '.concat(t.requestId,")")}),w.closeWithError(T),T;case 20:return e.abrupt("break",21);case 21:return e.abrupt("break",42);case 22:if(_.doc){e.next=26;break}throw N=new c.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="replace" (requestId '.concat(t.requestId,")")}),w.closeWithError(N),N;case 26:return e.abrupt("break",42);case 27:return R=d.find((function(e){return e._id===_.docId})),R?_.doc=R:console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),e.abrupt("break",42);case 30:if(_.doc){e.next=41;break}e.t2=_.queueType,e.next="dequeue"===e.t2?34:"enqueue"===e.t2?37:40;break;case 34:return D=d.find((function(e){return e._id===_.docId})),D?_.doc=D:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType event where no doc is associated."),e.abrupt("break",41);case 37:throw P=new c.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="limit" and queueType="enqueue" (requestId '.concat(t.requestId,")")}),w.closeWithError(P),P;case 40:return e.abrupt("break",41);case 41:return e.abrupt("break",42);case 42:e.t3=_.queueType,e.next="init"===e.t3?45:"enqueue"===e.t3?47:"dequeue"===e.t3?49:"update"===e.t3?52:55;break;case 45:return y?d.push(_.doc):(y=!0,d=[_.doc]),e.abrupt("break",55);case 47:return d.push(_.doc),e.abrupt("break",55);case 49:return C=d.findIndex((function(e){return e._id===_.docId})),C>-1?d.splice(C,1):console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),e.abrupt("break",55);case 52:return L=d.findIndex((function(e){return e._id===_.docId})),L>-1?d[L]=_.doc:console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),e.abrupt("break",55);case 55:(r===v-1||p[r+1]&&p[r+1].id!==_.id)&&(B=g(d),M=p.slice(0,r+1).filter((function(e){return e.id===_.id})),w.sessionInfo.currentEventId=_.id,w.sessionInfo.currentDocs=d,x=new h.Snapshot({id:_.id,docChanges:M,docs:B,msgType:u}),w.listener.onChange(x)),e.next=62;break;case 58:return console.warn("[realtime listener] event received is out of order, cur ".concat(w.sessionInfo.currentEventId," but got ").concat(_.id)),e.next=61,w.rebuildWatch();case 61:return e.abrupt("return",{v:void 0});case 62:case"end":return e.stop()}}),e)})),_=0,m=p.length;case 18:if(!(_<m)){e.next=30;break}return e.delegateYield(v(_,m),"t1",20);case 20:E=e.t1,e.t2=E,e.next="continue"===e.t2?24:25;break;case 24:return e.abrupt("continue",27);case 25:if("object"!==typeof E){e.next=27;break}return e.abrupt("return",E.v);case 27:_++,e.next=18;break;case 30:case"end":return e.stop()}}),e,this,[[6,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_postHandleServerEventsValidityCheck",value:function(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn("[realtime listener] internal non-fatal error: client eventId does not match with server event id after server event handling")):console.error("[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur")}},{key:"clearWaitExpectedEvent",value:function(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)}},{key:"onMessage",value:function(e){var t=this;switch(this.watchStatus){case r.PAUSED:if("ERROR"!==e.msgType)return;break;case r.LOGGINGIN:case r.INITING:case r.REBUILDING:return void console.warn("[realtime listener] internal non-fatal error: unexpected message received while ".concat(this.watchStatus));case r.CLOSED:return void console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has closed");case r.ERRORED:return void console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has ended with error")}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":console.warn("nextevent ".concat(e.msgData.currEvent," ignored"),e),this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((function(){t.rebuildWatch()}),this.getWaitExpectedTimeoutLength()),console.log("[realtime] waitExpectedTimeoutLength ".concat(this.getWaitExpectedTimeoutLength())));break;case"ERROR":this.closeWithError(new c.CloudSDKError({errCode:f.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:"".concat(e.msgData.code," - ").concat(e.msgData.message)}));break;default:console.warn("[realtime listener] virtual client receive unexpected msg ".concat(e.msgType,": "),e);break}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")}},{key:"closeWithError",value:function(e){this.watchStatus=r.ERRORED,this.clearACKSchedule(),this.listener.onError(e),this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),console.log("[realtime] client closed (".concat(this.collectionName," ").concat(this.query,") (watchId ").concat(this.watchId,")"))}},{key:"pause",value:function(){this.watchStatus=r.PAUSED,console.log("[realtime] client paused (".concat(this.collectionName," ").concat(this.query,") (watchId ").concat(this.watchId,")"))}},{key:"resume",value:function(){var e=O(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.watchStatus=r.RESUMING,console.log("[realtime] client resuming with ".concat(this.sessionInfo?"REBUILD_WATCH":"INIT_WATCH"," (").concat(this.collectionName," ").concat(this.query,") (").concat(this.watchId,")")),e.prev=2,e.next=5,this.sessionInfo?this.rebuildWatch():this.initWatch();case 5:console.log("[realtime] client successfully resumed (".concat(this.collectionName," ").concat(this.query,") (").concat(this.watchId,")")),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),console.error("[realtime] client resume failed (".concat(this.collectionName," ").concat(this.query,") (").concat(this.watchId,")"),e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function M(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=JSON.parse(e.removedFields))),t}t.VirtualWebSocketClient=B},"3d9a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0;var r=function(e){return void 0===e&&(e=0),new Promise((function(t){return setTimeout(t,e)}))};t.sleep=r},4201:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RealtimeListener=void 0;var r=function(){function e(e){this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:function(){return e.virtualClient}})}return e}();t.RealtimeListener=r},4249:function(e,t,n){var r;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(o,i){r=function(){return i(o)}.call(t,n,t,e),void 0===r||(e.exports=r)}(window,(function(e,t){if(!e.jWeixin){var n,r,i={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},a=function(){var e={};for(var t in i)e[i[t]]=t;return e}(),s=e.document,u=s.title,c=navigator.userAgent.toLowerCase(),f=navigator.platform.toLowerCase(),l=!(!f.match("mac")&&!f.match("win")),p=-1!=c.indexOf("wxdebugger"),h=-1!=c.indexOf("micromessenger"),d=-1!=c.indexOf("android"),y=-1!=c.indexOf("iphone")||-1!=c.indexOf("ipad"),g=(r=c.match(/micromessenger\/(\d+\.\d+\.\d+)/)||c.match(/micromessenger\/(\d+\.\d+)/))?r[1]:"",v={initStartTime:B(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},_={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:y?1:d?2:-1,clientVersion:g,url:encodeURIComponent(location.href)},m={},b={_completes:[]},E={state:0,data:{}};M((function(){v.initEndTime=B()}));var w=!1,S=[],O=(n={config:function(t){L("config",m=t);var n=!1!==m.check;M((function(){if(n)T(i.config,{verifyJsApiList:C(m.jsApiList),verifyOpenTagList:C(m.openTagList)},function(){b._complete=function(e){v.preVerifyEndTime=B(),E.state=1,E.data=e},b.success=function(e){_.isPreVerifyOk=0},b.fail=function(e){b._fail?b._fail(e):E.state=-1};var e=b._completes;return e.push((function(){!function(){if(!(l||p||m.debug||g<"6.0.2"||_.systemType<0)){var e=new Image;_.appId=m.appId,_.initTime=v.initEndTime-v.initStartTime,_.preVerifyTime=v.preVerifyEndTime-v.preVerifyStartTime,O.getNetworkType({isInnerInvoke:!0,success:function(t){_.networkType=t.networkType;var n="https://open.weixin.qq.com/sdk/report?v="+_.version+"&o="+_.isPreVerifyOk+"&s="+_.systemType+"&c="+_.clientVersion+"&a="+_.appId+"&n="+_.networkType+"&i="+_.initTime+"&p="+_.preVerifyTime+"&u="+_.url;e.src=n}})}}()})),b.complete=function(t){for(var n=0,r=e.length;n<r;++n)e[n]();b._completes=[]},b}()),v.preVerifyStartTime=B();else{E.state=1;for(var e=b._completes,t=0,r=e.length;t<r;++t)e[t]();b._completes=[]}})),O.invoke||(O.invoke=function(t,n,r){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,R(n),r)},O.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})},ready:function(e){0!=E.state?e():(b._completes.push(e),!h&&m.debug&&e())},error:function(e){g<"6.0.2"||(-1==E.state?e(E.data):b._fail=e)},checkJsApi:function(e){T("checkJsApi",{jsApiList:C(e.jsApiList)},(e._complete=function(e){if(d){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t))}e=function(e){var t=e.checkResult;for(var n in t){var r=a[n];r&&(t[r]=t[n],delete t[n])}return e}(e)},e))},onMenuShareTimeline:function(e){N(i.onMenuShareTimeline,{complete:function(){T("shareTimeline",{title:e.title||u,desc:e.title||u,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){N(i.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?T("sendAppMessage",{title:e.title||u,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):T("sendAppMessage",{title:e.title||u,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){N(i.onMenuShareQQ,{complete:function(){T("shareQQ",{title:e.title||u,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){N(i.onMenuShareWeibo,{complete:function(){T("shareWeiboApp",{title:e.title||u,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){N(i.onMenuShareQZone,{complete:function(){T("shareQZone",{title:e.title||u,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){T("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){T("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){T("startRecord",{},e)},stopRecord:function(e){T("stopRecord",{},e)},onVoiceRecordEnd:function(e){N("onVoiceRecordEnd",e)},playVoice:function(e){T("playVoice",{localId:e.localId},e)},pauseVoice:function(e){T("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){T("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){N("onVoicePlayEnd",e)},uploadVoice:function(e){T("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){T("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){T("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){T("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(d){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(e){},previewImage:function(e){T(i.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){T("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){T("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===w?(w=!0,T("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(w=!1,0<S.length){var t=S.shift();wx.getLocalImgData(t)}},e))):S.push(e)},getNetworkType:function(e){T("getNetworkType",{},(e._complete=function(e){e=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var n=e.subtype;if(delete e.subtype,n)e.networkType=n;else{var r=t.indexOf(":"),o=t.substring(r+1);switch(o){case"wifi":case"edge":case"wwan":e.networkType=o;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){T("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)}},o(n,"getLocation",(function(e){T(i.getLocation,{type:(e=e||{}).type||"wgs84"},(e._complete=function(e){delete e.type},e))})),o(n,"hideOptionMenu",(function(e){T("hideOptionMenu",{},e)})),o(n,"showOptionMenu",(function(e){T("showOptionMenu",{},e)})),o(n,"closeWindow",(function(e){T("closeWindow",{},e=e||{})})),o(n,"hideMenuItems",(function(e){T("hideMenuItems",{menuList:e.menuList},e)})),o(n,"showMenuItems",(function(e){T("showMenuItems",{menuList:e.menuList},e)})),o(n,"hideAllNonBaseMenuItem",(function(e){T("hideAllNonBaseMenuItem",{},e)})),o(n,"showAllNonBaseMenuItem",(function(e){T("showAllNonBaseMenuItem",{},e)})),o(n,"scanQRCode",(function(e){T("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(y){var t=e.resultStr;if(t){var n=JSON.parse(t);e.resultStr=n&&n.scan_code&&n.scan_code.scan_result}}},e))})),o(n,"openAddress",(function(e){T(i.openAddress,{},(e._complete=function(e){e=function(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}(e)},e))})),o(n,"openProductSpecificView",(function(e){T(i.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)})),o(n,"addCard",(function(e){for(var t=e.cardList,n=[],r=0,o=t.length;r<o;++r){var a=t[r],s={card_id:a.cardId,card_ext:a.cardExt};n.push(s)}T(i.addCard,{card_list:n},(e._complete=function(e){var t=e.card_list;if(t){for(var n=0,r=(t=JSON.parse(t)).length;n<r;++n){var o=t[n];o.cardId=o.card_id,o.cardExt=o.card_ext,o.isSuccess=!!o.is_succ,delete o.card_id,delete o.card_ext,delete o.is_succ}e.cardList=t,delete e.card_list}},e))})),o(n,"chooseCard",(function(e){T("chooseCard",{app_id:m.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))})),o(n,"openCard",(function(e){for(var t=e.cardList,n=[],r=0,o=t.length;r<o;++r){var a=t[r],s={card_id:a.cardId,code:a.code};n.push(s)}T(i.openCard,{card_list:n},e)})),o(n,"consumeAndShareCard",(function(e){T(i.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)})),o(n,"chooseWXPay",(function(e){T(i.chooseWXPay,D(e),e)})),o(n,"openEnterpriseRedPacket",(function(e){T(i.openEnterpriseRedPacket,D(e),e)})),o(n,"startSearchBeacons",(function(e){T(i.startSearchBeacons,{ticket:e.ticket},e)})),o(n,"stopSearchBeacons",(function(e){T(i.stopSearchBeacons,{},e)})),o(n,"onSearchBeacons",(function(e){N(i.onSearchBeacons,e)})),o(n,"openEnterpriseChat",(function(e){T("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)})),o(n,"launchMiniProgram",(function(e){T("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){if("string"==typeof e&&0<e.length){var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t}}(e.path),envVersion:e.envVersion},e)})),o(n,"openBusinessView",(function(e){T("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion},(e._complete=function(e){if(d){var t=e.extraData;if(t)try{e.extraData=JSON.parse(t)}catch(t){e.extraData={}}}},e))})),o(n,"miniProgram",{navigateBack:function(e){e=e||{},M((function(){T("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)}))},navigateTo:function(e){M((function(){T("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)}))},redirectTo:function(e){M((function(){T("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)}))},switchTab:function(e){M((function(){T("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)}))},reLaunch:function(e){M((function(){T("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)}))},postMessage:function(e){M((function(){T("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)}))},getEnv:function(t){M((function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})}))}}),n),A=1,I={};return s.addEventListener("error",(function(e){if(!d){var t=e.target,n=t.tagName,r=t.src;if(("IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n)&&-1!=r.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var o=t["wx-id"];if(o||(o=A++,t["wx-id"]=o),I[o])return;I[o]=!0,wx.ready((function(){wx.getLocalImgData({localId:r,success:function(e){t.src=e.localData}})}))}}}),!0),s.addEventListener("load",(function(e){if(!d){var t=e.target,n=t.tagName;if(t.src,"IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){var r=t["wx-id"];r&&(I[r]=!1)}}}),!0),t&&(e.wx=e.jWeixin=O),O}function T(t,n,r){e.WeixinJSBridge?WeixinJSBridge.invoke(t,R(n),(function(e){P(t,e,r)})):L(t,r)}function N(t,n,r){e.WeixinJSBridge?WeixinJSBridge.on(t,(function(e){r&&r.trigger&&r.trigger(e),P(t,e,n)})):L(t,r||n)}function R(e){return(e=e||{}).appId=m.appId,e.verifyAppId=m.appId,e.verifySignType="sha1",e.verifyTimestamp=m.timestamp+"",e.verifyNonceStr=m.nonceStr,e.verifySignature=m.signature,e}function D(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function P(e,t,n){"openEnterpriseChat"!=e&&"openBusinessView"!==e||(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var r=t.errMsg;r||(r=t.err_msg,delete t.err_msg,r=function(e,t){var n=e,r=a[n];r&&(n=r);var o="ok";if(t){var i=t.indexOf(":");"confirm"==(o=t.substring(i+1))&&(o="ok"),"failed"==o&&(o="fail"),-1!=o.indexOf("failed_")&&(o=o.substring(7)),-1!=o.indexOf("fail_")&&(o=o.substring(5)),"access denied"!=(o=(o=o.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=o||(o="permission denied"),"config"==n&&"function not exist"==o&&(o="ok"),""==o&&(o="fail")}return n+":"+o}(e,r),t.errMsg=r),(n=n||{})._complete&&(n._complete(t),delete n._complete),r=t.errMsg||"",m.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t));var o=r.indexOf(":");switch(r.substring(o+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function C(e){if(e){for(var t=0,n=e.length;t<n;++t){var r=e[t],o=i[r];o&&(e[t]=o)}return e}}function L(e,t){if(!(!m.debug||t&&t.isInnerInvoke)){var n=a[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function B(){return(new Date).getTime()}function M(t){h&&(e.WeixinJSBridge?t():s.addEventListener&&s.addEventListener("WeixinJSBridgeReady",t,!1))}}))},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44a5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMMUNITY_SITE_URL=t.IS_DEBUG_MODE=t.getProtocol=t.setProtocol=t.getSdkName=t.setSdkName=void 0;var r="@cloudbase/js-sdk";function o(e){r=e}function i(){return r}t.setSdkName=o,t.getSdkName=i;var a="undefined"!==typeof location&&"http:"===location.protocol?"http:":"https:";function s(e){a=e}function u(){return a}t.setProtocol=s,t.getProtocol=u,t.IS_DEBUG_MODE=!1,t.COMMUNITY_SITE_URL="https://support.qq.com/products/148793"},"46be":function(e,t,n){(function(t,r){e.exports=r(n("36b8"))})(0,(function(e){return function(){var t=e,n=t.lib,r=n.WordArray,o=t.enc;o.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=t[i>>>2]>>>24-i%4*8&255,s=t[i+1>>>2]>>>24-(i+1)%4*8&255,u=t[i+2>>>2]>>>24-(i+2)%4*8&255,c=a<<16|s<<8|u,f=0;f<4&&i+.75*f<n;f++)o.push(r.charAt(c>>>6*(3-f)&63));var l=r.charAt(64);if(l)while(o.length%4)o.push(l);return o.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return i(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function i(e,t,n){for(var o=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,u=n[e.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=(s|u)<<24-i%4*8,i++}return r.create(o,i)}}(),e.enc.Base64}))},4895:function(e,t,n){"use strict";function r(e){return void 0===e&&(e=""),(e?e+"_":"")+ +new Date+"_"+Math.random()}function o(e){return"INIT_EVENT"===e.msgType}Object.defineProperty(t,"__esModule",{value:!0}),t.genRequestId=r,t.isInitEventMessage=o},"502e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerFunctions=v;var r=n("5fbe"),o=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},u=r.constants.getSdkName,c=r.constants.ERRORS,f=r.constants.COMMUNITY_SITE_URL,l=r.utils.execCallback,p=r.helpers.catchErrorsDecorator,h="functions",d=function(){function e(){}return e.prototype.callFunction=function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,i,a,f,p,d,y,g,v,_;return s(this,(function(s){switch(s.label){case 0:if(n=e.name,r=e.data,o=e.query,i=e.parse,a=e.search,!n)throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+h+".callFunction] invalid function name"}));try{f=r?JSON.stringify(r):""}catch(m){throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+h+".callFunction] invalid data"}))}p="functions.invokeFunction",d={inQuery:o,parse:i,search:a,function_name:n,request_data:f},y=this.request,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,y.send(p,d)];case 2:if(g=s.sent(),g.code)return[2,l(t,null,g)];if(v=g.data.response_data,i)return[2,l(t,null,{result:v,requestId:g.requestId})];try{return v=JSON.parse(g.data.response_data),[2,l(t,null,{result:v,requestId:g.requestId})]}catch(m){l(t,new Error("["+u()+"]["+c.INVALID_PARAMS+"]["+h+".callFunction] response data must be json"))}return[3,4];case 3:return _=s.sent(),l(t,_),[3,4];case 4:return[2]}}))}))},o([p({customInfo:{className:"Cloudbase",methodName:"callFunction"},title:"函数调用失败",messages:["请确认以下各项：","  1 - 调用 callFunction() 的语法或参数是否正确","  2 - 当前环境下是否存在此函数","  3 - 函数安全规则是否限制了当前登录状态访问","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+f]}),i("design:type",Function),i("design:paramtypes",[Object,Function]),i("design:returntype",Promise)],e.prototype,"callFunction",null),e}(),y=new d,g={name:h,entity:{callFunction:y.callFunction}};try{cloudbase.registerComponent(g)}catch(_){}function v(e){try{e.registerComponent(g)}catch(_){console.warn(_)}}},"543d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createApp=xt,t.createComponent=Kt,t.createPage=Ht,t.createPlugin=Jt,t.createSubpackageApp=zt,t.default=void 0;var r=o(n("66fd"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){return f(e)||c(e,t)||d(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(u){o=!0,i=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(o)throw i}}return n}}function f(e){if(Array.isArray(e))return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return g(e)||y(e)||d(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function y(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function g(e){if(Array.isArray(e))return v(e)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function m(){var e,t=wx.getStorageSync("uni_id_token")||"",n=t.split(".");if(!t||3!==n.length)return{uid:null,role:[],permission:[],tokenExpired:0};try{e=JSON.parse(_(n[1]))}catch(r){throw new Error("获取当前用户信息出错，详细错误信息为："+r.message)}return e.tokenExpired=1e3*e.exp,delete e.exp,delete e.iat,e}function b(e){e.prototype.uniIDHasRole=function(e){var t=m(),n=t.role;return n.indexOf(e)>-1},e.prototype.uniIDHasPermission=function(e){var t=m(),n=t.permission;return this.uniIDHasRole("admin")||n.indexOf(e)>-1},e.prototype.uniIDTokenValid=function(){var e=m(),t=e.tokenExpired;return t>Date.now()}}var E=Object.prototype.toString,w=Object.prototype.hasOwnProperty;function S(e){return"function"===typeof e}function O(e){return"string"===typeof e}function A(e){return"[object Object]"===E.call(e)}function I(e,t){return w.call(e,t)}function T(){}function N(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var R=/-(\w)/g,D=N((function(e){return e.replace(R,(function(e,t){return t?t.toUpperCase():""}))})),P=["invoke","success","fail","complete","returnValue"],C={},L={};function B(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?M(n):n}function M(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function x(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function k(e,t){Object.keys(t).forEach((function(n){-1!==P.indexOf(n)&&S(t[n])&&(e[n]=B(e[n],t[n]))}))}function j(e,t){e&&t&&Object.keys(t).forEach((function(n){-1!==P.indexOf(n)&&S(t[n])&&x(e[n],t[n])}))}function U(e,t){"string"===typeof e&&A(t)?k(L[e]||(L[e]={}),t):A(e)&&k(C,e)}function $(e,t){"string"===typeof e?A(t)?j(L[e],t):delete L[e]:A(e)&&j(C,e)}function W(e){return function(t){return e(t)||t}}function F(e){return!!e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof e.then}function q(e,t){for(var n=!1,r=0;r<e.length;r++){var o=e[r];if(n)n=Promise.resolve(W(o));else{var i=o(t);if(F(i)&&(n=Promise.resolve(i)),!1===i)return{then:function(){}}}}return n||{then:function(e){return e(t)}}}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["success","fail","complete"].forEach((function(n){if(Array.isArray(e[n])){var r=t[n];t[n]=function(t){q(e[n],t).then((function(e){return S(r)&&r(e)||e}))}}})),t}function V(e,t){var n=[];Array.isArray(C.returnValue)&&n.push.apply(n,p(C.returnValue));var r=L[e];return r&&Array.isArray(r.returnValue)&&n.push.apply(n,p(r.returnValue)),n.forEach((function(e){t=e(t)||t})),t}function G(e){var t=Object.create(null);Object.keys(C).forEach((function(e){"returnValue"!==e&&(t[e]=C[e].slice())}));var n=L[e];return n&&Object.keys(n).forEach((function(e){"returnValue"!==e&&(t[e]=(t[e]||[]).concat(n[e]))})),t}function H(e,t,n){for(var r=arguments.length,o=new Array(r>3?r-3:0),i=3;i<r;i++)o[i-3]=arguments[i];var a=G(e);if(a&&Object.keys(a).length){if(Array.isArray(a.invoke)){var s=q(a.invoke,n);return s.then((function(e){return t.apply(void 0,[Y(a,e)].concat(o))}))}return t.apply(void 0,[Y(a,n)].concat(o))}return t.apply(void 0,[n].concat(o))}var K={returnValue:function(e){return F(e)?new Promise((function(t,n){e.then((function(e){e[0]?n(e[0]):t(e[1])}))})):e}},z=/^\$|Window$|WindowStyle$|sendNativeEvent|restoreGlobal|getCurrentSubNVue|getMenuButtonBoundingClientRect|^report|interceptors|Interceptor$|getSubNVueById|requireNativePlugin|upx2px|hideKeyboard|canIUse|^create|Sync$|Manager$|base64ToArrayBuffer|arrayBufferToBase64/,J=/^create|Manager$/,Q=["createBLEConnection"],X=["createBLEConnection"],Z=/^on|^off/;function ee(e){return J.test(e)&&-1===Q.indexOf(e)}function te(e){return z.test(e)&&-1===X.indexOf(e)}function ne(e){return Z.test(e)&&"onPush"!==e}function re(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e]}))}function oe(e){return!(ee(e)||te(e)||ne(e))}function ie(e,t){return oe(e)?function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return S(n.success)||S(n.fail)||S(n.complete)?V(e,H.apply(void 0,[e,t,n].concat(o))):V(e,re(new Promise((function(r,i){H.apply(void 0,[e,t,Object.assign({},n,{success:r,fail:i})].concat(o))}))))}:t}Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))});var ae=1e-4,se=750,ue=!1,ce=0,fe=0;function le(){var e=wx.getSystemInfoSync(),t=e.platform,n=e.pixelRatio,r=e.windowWidth;ce=r,fe=n,ue="ios"===t}function pe(e,t){if(0===ce&&le(),e=Number(e),0===e)return 0;var n=e/se*(t||ce);return n<0&&(n=-n),n=Math.floor(n+ae),0===n&&(n=1!==fe&&ue?.5:1),e<0?-n:n}var he={promiseInterceptor:K},de=Object.freeze({__proto__:null,upx2px:pe,addInterceptor:U,removeInterceptor:$,interceptors:he});function ye(e){var t=getCurrentPages(),n=t.length;while(n--){var r=t[n];if(r.$page&&r.$page.fullPath===e)return n}return-1}var ge,ve={name:function(e){return"back"===e.exists&&e.delta?"navigateBack":"redirectTo"},args:function(e){if("back"===e.exists&&e.url){var t=ye(e.url);if(-1!==t){var n=getCurrentPages().length-1-t;n>0&&(e.delta=n)}}}},_e={args:function(e){var t=parseInt(e.current);if(!isNaN(t)){var n=e.urls;if(Array.isArray(n)){var r=n.length;if(r)return t<0?t=0:t>=r&&(t=r-1),t>0?(e.current=n[t],e.urls=n.filter((function(e,r){return!(r<t)||e!==n[t]}))):e.current=n[0],{indicator:!1,loop:!1}}}}},me="__DC_STAT_UUID";function be(e){ge=ge||wx.getStorageSync(me),ge||(ge=Date.now()+""+Math.floor(1e7*Math.random()),wx.setStorage({key:me,data:ge})),e.deviceId=ge}function Ee(e){if(e.safeArea){var t=e.safeArea;e.safeAreaInsets={top:t.top,left:t.left,right:e.windowWidth-t.right,bottom:e.windowHeight-t.bottom}}}var we={returnValue:function(e){be(e),Ee(e)}},Se={redirectTo:ve,previewImage:_e,getSystemInfo:we,getSystemInfoSync:we},Oe=["vibrate","preloadPage","unPreloadPage","loadSubPackage"],Ae=[],Ie=["success","fail","cancel","complete"];function Te(e,t,n){return function(r){return t(Re(e,r,n))}}function Ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(A(t)){var i=!0===o?t:{};for(var a in S(n)&&(n=n(t,i)||{}),t)if(I(n,a)){var s=n[a];S(s)&&(s=s(t[a],t,i)),s?O(s)?i[s]=t[a]:A(s)&&(i[s.name?s.name:a]=s.value):console.warn("The '".concat(e,"' method of platform '微信小程序' does not support option '").concat(a,"'"))}else-1!==Ie.indexOf(a)?S(t[a])&&(i[a]=Te(e,t[a],r)):o||(i[a]=t[a]);return i}return S(t)&&(t=Te(e,t,r)),t}function Re(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return S(Se.returnValue)&&(t=Se.returnValue(e,t)),Ne(e,t,n,{},r)}function De(e,t){if(I(Se,e)){var n=Se[e];return n?function(t,r){var o=n;S(n)&&(o=n(t)),t=Ne(e,t,o.args,o.returnValue);var i=[t];"undefined"!==typeof r&&i.push(r),S(o.name)?e=o.name(t):O(o.name)&&(e=o.name);var a=wx[e].apply(wx,i);return te(e)?Re(e,a,o.returnValue,ee(e)):a}:function(){console.error("Platform '微信小程序' does not support '".concat(e,"'."))}}return t}var Pe=Object.create(null),Ce=["onTabBarMidButtonTap","subscribePush","unsubscribePush","onPush","offPush","share"];function Le(e){return function(t){var n=t.fail,r=t.complete,o={errMsg:"".concat(e,":fail method '").concat(e,"' not supported")};S(n)&&n(o),S(r)&&r(o)}}Ce.forEach((function(e){Pe[e]=Le(e)}));var Be={oauth:["weixin"],share:["weixin"],payment:["wxpay"],push:["weixin"]};function Me(e){var t=e.service,n=e.success,r=e.fail,o=e.complete,i=!1;Be[t]?(i={errMsg:"getProvider:ok",service:t,provider:Be[t]},S(n)&&n(i)):(i={errMsg:"getProvider:fail service not found"},S(r)&&r(i)),S(o)&&o(i)}var xe=Object.freeze({__proto__:null,getProvider:Me}),ke=function(){var e;return function(){return e||(e=new r.default),e}}();function je(e,t,n){return e[t].apply(e,n)}function Ue(){return je(ke(),"$on",Array.prototype.slice.call(arguments))}function $e(){return je(ke(),"$off",Array.prototype.slice.call(arguments))}function We(){return je(ke(),"$once",Array.prototype.slice.call(arguments))}function Fe(){return je(ke(),"$emit",Array.prototype.slice.call(arguments))}var qe=Object.freeze({__proto__:null,$on:Ue,$off:$e,$once:We,$emit:Fe}),Ye=Object.freeze({__proto__:null}),Ve=Page,Ge=Component,He=/:/g,Ke=N((function(e){return D(e.replace(He,"-"))}));function ze(e){if(wx.canIUse&&wx.canIUse("nextTick")){var t=e.triggerEvent;e.triggerEvent=function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.apply(e,[Ke(n)].concat(o))}}}function Je(e,t){var n=t[e];t[e]=n?function(){ze(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(this,t)}:function(){ze(this)}}Ve.__$wrappered||(Ve.__$wrappered=!0,Page=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Je("onLoad",e),Ve(e)},Page.after=Ve.after,Component=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Je("created",e),Ge(e)});var Qe=["onPullDownRefresh","onReachBottom","onAddToFavorites","onShareTimeline","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function Xe(e,t){var n=e.$mp[e.mpType];t.forEach((function(t){I(n,t)&&(e[t]=n[t])}))}function Ze(e,t){if(!t)return!0;if(r.default.options&&Array.isArray(r.default.options[e]))return!0;if(t=t.default||t,S(t))return!!S(t.extendOptions[e])||!!(t.super&&t.super.options&&Array.isArray(t.super.options[e]));if(S(t[e]))return!0;var n=t.mixins;return Array.isArray(n)?!!n.find((function(t){return Ze(e,t)})):void 0}function et(e,t,n){t.forEach((function(t){Ze(t,n)&&(e[t]=function(e){return this.$vm&&this.$vm.__call_hook(t,e)})}))}function tt(e,t){var n;return t=t.default||t,n=S(t)?t:e.extend(t),t=n.options,[n,t]}function nt(e,t){if(Array.isArray(t)&&t.length){var n=Object.create(null);t.forEach((function(e){n[e]=!0})),e.$scopedSlots=e.$slots=n}}function rt(e,t){e=(e||"").split(",");var n=e.length;1===n?t._$vueId=e[0]:2===n&&(t._$vueId=e[0],t._$vuePid=e[1])}function ot(e,t){var n=e.data||{},r=e.methods||{};if("function"===typeof n)try{n=n.call(t)}catch(o){Object({NODE_ENV:"production",VUE_APP_NAME:"升阶助手",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG&&console.warn("根据 Vue 的 data 函数初始化小程序 data 失败，请尽量确保 data 函数中不访问 vm 对象，否则可能影响首次数据渲染速度。",n)}else try{n=JSON.parse(JSON.stringify(n))}catch(o){}return A(n)||(n={}),Object.keys(r).forEach((function(e){-1!==t.__lifecycle_hooks__.indexOf(e)||I(n,e)||(n[e]=r[e])})),n}var it=[String,Number,Boolean,Object,Array,null];function at(e){return function(t,n){this.$vm&&(this.$vm[e]=t)}}function st(e,t){var n=e.behaviors,r=e.extends,o=e.mixins,i=e.props;i||(e.props=i=[]);var a=[];return Array.isArray(n)&&n.forEach((function(e){a.push(e.replace("uni://","wx".concat("://"))),"uni://form-field"===e&&(Array.isArray(i)?(i.push("name"),i.push("value")):(i.name={type:String,default:""},i.value={type:[String,Number,Boolean,Array,Object,Date],default:""}))})),A(r)&&r.props&&a.push(t({properties:ct(r.props,!0)})),Array.isArray(o)&&o.forEach((function(e){A(e)&&e.props&&a.push(t({properties:ct(e.props,!0)}))})),a}function ut(e,t,n,r){return Array.isArray(t)&&1===t.length?t[0]:t}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return t||(n.vueId={type:String,value:""},n.generic={type:Object,value:null},n.scopedSlotsCompiler={type:String,value:""},n.vueSlots={type:null,value:[],observer:function(e,t){var n=Object.create(null);e.forEach((function(e){n[e]=!0})),this.setData({$slots:n})}}),Array.isArray(e)?e.forEach((function(e){n[e]={type:null,observer:at(e)}})):A(e)&&Object.keys(e).forEach((function(t){var r=e[t];if(A(r)){var o=r.default;S(o)&&(o=o()),r.type=ut(t,r.type),n[t]={type:-1!==it.indexOf(r.type)?r.type:null,value:o,observer:at(t)}}else{var i=ut(t,r);n[t]={type:-1!==it.indexOf(i)?i:null,observer:at(t)}}})),n}function ft(e){try{e.mp=JSON.parse(JSON.stringify(e))}catch(t){}return e.stopPropagation=T,e.preventDefault=T,e.target=e.target||{},I(e,"detail")||(e.detail={}),I(e,"markerId")&&(e.detail="object"===typeof e.detail?e.detail:{},e.detail.markerId=e.markerId),A(e.detail)&&(e.target=Object.assign({},e.target,e.detail)),e}function lt(e,t){var n=e;return t.forEach((function(t){var r=t[0],o=t[2];if(r||"undefined"!==typeof o){var i,a=t[1],s=t[3];Number.isInteger(r)?i=r:r?"string"===typeof r&&r&&(i=0===r.indexOf("#s#")?r.substr(3):e.__get_value(r,n)):i=n,Number.isInteger(i)?n=o:a?Array.isArray(i)?n=i.find((function(t){return e.__get_value(a,t)===o})):A(i)?n=Object.keys(i).find((function(t){return e.__get_value(a,i[t])===o})):console.error("v-for 暂不支持循环数据：",i):n=i[o],s&&(n=e.__get_value(s,n))}})),n}function pt(e,t,n){var r={};return Array.isArray(t)&&t.length&&t.forEach((function(t,o){"string"===typeof t?t?"$event"===t?r["$"+o]=n:"arguments"===t?n.detail&&n.detail.__args__?r["$"+o]=n.detail.__args__:r["$"+o]=[n]:0===t.indexOf("$event.")?r["$"+o]=e.__get_value(t.replace("$event.",""),n):r["$"+o]=e.__get_value(t):r["$"+o]=e:r["$"+o]=lt(e,t)})),r}function ht(e){for(var t={},n=1;n<e.length;n++){var r=e[n];t[r[0]]=r[1]}return t}function dt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=!1;if(o&&(a=t.currentTarget&&t.currentTarget.dataset&&"wx"===t.currentTarget.dataset.comType,!n.length))return a?[t]:t.detail.__args__||t.detail;var s=pt(e,r,t),u=[];return n.forEach((function(e){"$event"===e?"__set_model"!==i||o?o&&!a?u.push(t.detail.__args__[0]):u.push(t):u.push(t.target.value):Array.isArray(e)&&"o"===e[0]?u.push(ht(e)):"string"===typeof e&&I(s,e)?u.push(s[e]):u.push(e)})),u}var yt="~",gt="^";function vt(e,t){return e===t||"regionchange"===t&&("begin"===e||"end"===e)}function _t(e){var t=e.$parent;while(t&&t.$parent&&(t.$options.generic||t.$parent.$options.generic||t.$scope._$vuePid))t=t.$parent;return t&&t.$parent}function mt(e){var t=this;e=ft(e);var n=(e.currentTarget||e.target).dataset;if(!n)return console.warn("事件信息不存在");var r=n.eventOpts||n["event-opts"];if(!r)return console.warn("事件信息不存在");var o=e.type,i=[];return r.forEach((function(n){var r=n[0],a=n[1],s=r.charAt(0)===gt;r=s?r.slice(1):r;var u=r.charAt(0)===yt;r=u?r.slice(1):r,a&&vt(o,r)&&a.forEach((function(n){var r=n[0];if(r){var o=t.$vm;if(o.$options.generic&&(o=_t(o)||o),"$emit"===r)return void o.$emit.apply(o,dt(t.$vm,e,n[1],n[2],s,r));var a=o[r];if(!S(a))throw new Error(" _vm.".concat(r," is not a function"));if(u){if(a.once)return;a.once=!0}var c=dt(t.$vm,e,n[1],n[2],s,r);c=Array.isArray(c)?c:[],/=\s*\S+\.eventParams\s*\|\|\s*\S+\[['"]event-params['"]\]/.test(a.toString())&&(c=c.concat([,,,,,,,,,,e])),i.push(a.apply(o,c))}}))})),"input"===o&&1===i.length&&"undefined"!==typeof i[0]?i[0]:void 0}var bt={},Et=[];function wt(e){if(e){var t=bt[e];return delete bt[e],t}return Et.shift()}var St=["onShow","onHide","onError","onPageNotFound","onThemeChange","onUnhandledRejection"];function Ot(){r.default.prototype.getOpenerEventChannel=function(){return this.$scope.getOpenerEventChannel()};var e=r.default.prototype.__call_hook;r.default.prototype.__call_hook=function(t,n){return"onLoad"===t&&n&&n.__id__&&(this.__eventChannel__=wt(n.__id__),delete n.__id__),e.call(this,t,n)}}function At(){var e={},t={};r.default.prototype.$hasScopedSlotsParams=function(n){var r=e[n];return r||(t[n]=this,this.$on("hook:destory",(function(){delete t[n]}))),r},r.default.prototype.$getScopedSlotsParams=function(n,r,o){var i=e[n];if(i){var a=i[r]||{};return o?a[o]:a}t[n]=this,this.$on("hook:destory",(function(){delete t[n]}))},r.default.prototype.$setScopedSlotsParams=function(n,r){var o=this.$options.propsData.vueId;if(o){var i=o.split(",")[0],a=e[i]=e[i]||{};a[n]=r,t[i]&&t[i].$forceUpdate()}},r.default.mixin({destroyed:function(){var n=this.$options.propsData,r=n&&n.vueId;r&&(delete e[r],delete t[r])}})}function It(e,t){var n=t.mocks,o=t.initRefs;Ot(),At(),e.$options.store&&(r.default.prototype.$store=e.$options.store),b(r.default),r.default.prototype.mpHost="mp-weixin",r.default.mixin({beforeCreate:function(){if(this.$options.mpType){if(this.mpType=this.$options.mpType,this.$mp=l({data:{}},this.mpType,this.$options.mpInstance),this.$scope=this.$options.mpInstance,delete this.$options.mpType,delete this.$options.mpInstance,"page"===this.mpType&&"function"===typeof getApp){var e=getApp();e.$vm&&e.$vm.$i18n&&(this._i18n=e.$vm.$i18n)}"app"!==this.mpType&&(o(this),Xe(this,n))}}});var i={onLaunch:function(t){this.$vm||(wx.canIUse&&!wx.canIUse("nextTick")&&console.error("当前微信基础库版本过低，请将 微信开发者工具-详情-项目设置-调试基础库版本 更换为`2.3.0`以上"),this.$vm=e,this.$vm.$mp={app:this},this.$vm.$scope=this,this.$vm.globalData=this.globalData,this.$vm._isMounted=!0,this.$vm.__call_hook("mounted",t),this.$vm.__call_hook("onLaunch",t))}};i.globalData=e.$options.globalData||{};var a=e.$options.methods;return a&&Object.keys(a).forEach((function(e){i[e]=a[e]})),et(i,St),i}var Tt=["__route__","__wxExparserNodeId__","__wxWebviewId__"];function Nt(e,t){for(var n,r=e.$children,o=r.length-1;o>=0;o--){var i=r[o];if(i.$scope._$vueId===t)return i}for(var a=r.length-1;a>=0;a--)if(n=Nt(r[a],t),n)return n}function Rt(e){return Behavior(e)}function Dt(){return!!this.route}function Pt(e){this.triggerEvent("__l",e)}function Ct(e,t,n){var r=e.selectAllComponents(t);r.forEach((function(e){var r=e.dataset.ref;n[r]=e.$vm||e,"scoped"===e.dataset.vueGeneric&&e.selectAllComponents(".scoped-ref").forEach((function(e){Ct(e,t,n)}))}))}function Lt(e){var t=e.$scope;Object.defineProperty(e,"$refs",{get:function(){var e={};Ct(t,".vue-ref",e);var n=t.selectAllComponents(".vue-ref-in-for");return n.forEach((function(t){var n=t.dataset.ref;e[n]||(e[n]=[]),e[n].push(t.$vm||t)})),e}})}function Bt(e){var t,n=e.detail||e.value,r=n.vuePid,o=n.vueOptions;r&&(t=Nt(this.$vm,r)),t||(t=this.$vm),o.parent=t}function Mt(e){return It(e,{mocks:Tt,initRefs:Lt})}function xt(e){return App(Mt(e)),e}var kt=/[!'()*]/g,jt=function(e){return"%"+e.charCodeAt(0).toString(16)},Ut=/%2C/g,$t=function(e){return encodeURIComponent(e).replace(kt,jt).replace(Ut,",")};function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t,n=e?Object.keys(e).map((function(n){var r=e[n];if(void 0===r)return"";if(null===r)return t(n);if(Array.isArray(r)){var o=[];return r.forEach((function(e){void 0!==e&&(null===e?o.push(t(n)):o.push(t(n)+"="+t(e)))})),o.join("&")}return t(n)+"="+t(r)})).filter((function(e){return e.length>0})).join("&"):null;return n?"?".concat(n):""}function Ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isPage,o=t.initRelation,i=tt(r.default,e),u=s(i,2),c=u[0],f=u[1],l=a({multipleSlots:!0,addGlobalClass:!0},f.options||{});f["mp-weixin"]&&f["mp-weixin"].options&&Object.assign(l,f["mp-weixin"].options);var p={options:l,data:ot(f,r.default.prototype),behaviors:st(f,Rt),properties:ct(f.props,!1,f.__file),lifetimes:{attached:function(){var e=this.properties,t={mpType:n.call(this)?"page":"component",mpInstance:this,propsData:e};rt(e.vueId,this),o.call(this,{vuePid:this._$vuePid,vueOptions:t}),this.$vm=new c(t),nt(this.$vm,e.vueSlots),this.$vm.$mount()},ready:function(){this.$vm&&(this.$vm._isMounted=!0,this.$vm.__call_hook("mounted"),this.$vm.__call_hook("onReady"))},detached:function(){this.$vm&&this.$vm.$destroy()}},pageLifetimes:{show:function(e){this.$vm&&this.$vm.__call_hook("onPageShow",e)},hide:function(){this.$vm&&this.$vm.__call_hook("onPageHide")},resize:function(e){this.$vm&&this.$vm.__call_hook("onPageResize",e)}},methods:{__l:Bt,__e:mt}};return f.externalClasses&&(p.externalClasses=f.externalClasses),Array.isArray(f.wxsCallMethods)&&f.wxsCallMethods.forEach((function(e){p.methods[e]=function(t){return this.$vm[e](t)}})),n?p:[p,c]}function qt(e){return Ft(e,{isPage:Dt,initRelation:Pt})}var Yt=["onShow","onHide","onUnload"];function Vt(e,t){t.isPage,t.initRelation;var n=qt(e);return et(n.methods,Yt,e),n.methods.onLoad=function(e){this.options=e;var t=Object.assign({},e);delete t.__id__,this.$page={fullPath:"/"+(this.route||this.is)+Wt(t)},this.$vm.$mp.query=e,this.$vm.__call_hook("onLoad",e)},n}function Gt(e){return Vt(e,{isPage:Dt,initRelation:Pt})}function Ht(e){return Component(Gt(e))}function Kt(e){return Component(qt(e))}function zt(e){var t=Mt(e),n=getApp({allowDefault:!0});e.$scope=n;var r=n.globalData;if(r&&Object.keys(t.globalData).forEach((function(e){I(r,e)||(r[e]=t.globalData[e])})),Object.keys(t).forEach((function(e){I(n,e)||(n[e]=t[e])})),S(t.onShow)&&wx.onAppShow&&wx.onAppShow((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.__call_hook("onShow",n)})),S(t.onHide)&&wx.onAppHide&&wx.onAppHide((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.__call_hook("onHide",n)})),S(t.onLaunch)){var o=wx.getLaunchOptionsSync&&wx.getLaunchOptionsSync();e.__call_hook("onLaunch",o)}return e}function Jt(e){var t=Mt(e);if(S(t.onShow)&&wx.onAppShow&&wx.onAppShow((function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];t.onShow.apply(e,r)})),S(t.onHide)&&wx.onAppHide&&wx.onAppHide((function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];t.onHide.apply(e,r)})),S(t.onLaunch)){var n=wx.getLaunchOptionsSync&&wx.getLaunchOptionsSync();t.onLaunch.call(e,n)}return e}Yt.push.apply(Yt,Qe),Oe.forEach((function(e){Se[e]=!1})),Ae.forEach((function(e){var t=Se[e]&&Se[e].name?Se[e].name:e;wx.canIUse(t)||(Se[e]=!1)}));var Qt={};"undefined"!==typeof Proxy?Qt=new Proxy({},{get:function(e,t){return I(e,t)?e[t]:de[t]?de[t]:Ye[t]?ie(t,Ye[t]):xe[t]?ie(t,xe[t]):Pe[t]?ie(t,Pe[t]):qe[t]?qe[t]:I(wx,t)||I(Se,t)?ie(t,De(t,wx[t])):void 0},set:function(e,t,n){return e[t]=n,!0}}):(Object.keys(de).forEach((function(e){Qt[e]=de[e]})),Object.keys(Pe).forEach((function(e){Qt[e]=ie(e,Pe[e])})),Object.keys(xe).forEach((function(e){Qt[e]=ie(e,Pe[e])})),Object.keys(qe).forEach((function(e){Qt[e]=qe[e]})),Object.keys(Ye).forEach((function(e){Qt[e]=ie(e,Ye[e])})),Object.keys(wx).forEach((function(e){(I(wx,e)||I(Se,e))&&(Qt[e]=ie(e,De(e,wx[e])))}))),wx.createApp=xt,wx.createPage=Ht,wx.createComponent=Kt,wx.createSubpackageApp=zt,wx.createPlugin=Jt;var Xt=Qt,Zt=Xt;t.default=Zt},5731:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWSCloseError=t.CLOSE_EVENT_CODE=t.CLOSE_EVENT_CODE_INFO=void 0;var r,o=n("99b4"),i={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3050:{code:3050,name:"Server Close",description:"The client is terminating the connection because no heartbeat response is received from the server"}};t.CLOSE_EVENT_CODE_INFO=i,t.CLOSE_EVENT_CODE=r,function(e){e[e["NormalClosure"]=1e3]="NormalClosure",e[e["GoingAway"]=1001]="GoingAway",e[e["ProtocolError"]=1002]="ProtocolError",e[e["UnsupportedData"]=1003]="UnsupportedData",e[e["NoStatusReceived"]=1005]="NoStatusReceived",e[e["AbnormalClosure"]=1006]="AbnormalClosure",e[e["InvalidFramePayloadData"]=1007]="InvalidFramePayloadData",e[e["PolicyViolation"]=1008]="PolicyViolation",e[e["MessageTooBig"]=1009]="MessageTooBig",e[e["MissingExtension"]=1010]="MissingExtension",e[e["InternalError"]=1011]="InternalError",e[e["ServiceRestart"]=1012]="ServiceRestart",e[e["TryAgainLater"]=1013]="TryAgainLater",e[e["BadGateway"]=1014]="BadGateway",e[e["TLSHandshake"]=1015]="TLSHandshake",e[e["ReconnectWebSocket"]=3e3]="ReconnectWebSocket",e[e["NoRealtimeListeners"]=3001]="NoRealtimeListeners",e[e["HeartbeatPingError"]=3002]="HeartbeatPingError",e[e["HeartbeatPongTimeoutError"]=3003]="HeartbeatPongTimeoutError",e[e["NoAuthentication"]=3050]="NoAuthentication"}(r||(t.CLOSE_EVENT_CODE=r={}));var a=function(e,t){var n=i[e],r=n?n.name+", code "+e+", reason "+(t||n.description):"code "+e;return new o.CloudSDKError({errCode:o.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:r})};t.getWSCloseError=a},"58ef":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("2249");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var o=n("9eb6");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}))},"59ad":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.catchErrorsDecorator=void 0;var i=n("2365"),a=n("e032"),s=!1;"undefined"!==typeof navigator&&navigator.userAgent&&(s=-1!==navigator.userAgent.indexOf("Firefox"));var u=s?/(\.js\/)?__decorate(\$\d+)?<@.*\d$/:/(\/\w+\.js\.)?__decorate(\$\d+)?\s*\(.*\)$/,c=/https?\:\/\/.+\:\d*\/.*\.js\:\d+\:\d+/;function f(e){var t=e.mode,n=void 0===t?"async":t,s=e.customInfo,u=void 0===s?{}:s,c=e.title,f=e.messages,h=void 0===f?[]:f;return function(e,t,s){if(a.IS_DEBUG_MODE){var f=u.className||e.constructor.name,d=u.methodName||t,y=s.value,g=l(new Error);s.value="sync"===n?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=p({err:new Error,className:f,methodName:d,sourceLink:g});try{return y.apply(this,e)}catch(u){var r=u,o=u.message,a={title:c||f+"."+d+" failed",content:[{type:"error",body:u}]};if(o&&/^\{.*\}$/.test(o)){var s=JSON.parse(o);a.subtitle=o,s.code&&(r=n||u,a.content=h.map((function(e){return{type:"info",body:e}})))}throw i.printGroupLog(a),r}}:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,(function(){var t,n,r,a,s,u;return o(this,(function(o){switch(o.label){case 0:t=p({err:new Error,className:f,methodName:d,sourceLink:g}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,y.apply(this,e)];case 2:return[2,o.sent()];case 3:throw n=o.sent(),r=n,a=n.message,s={title:c||f+"."+d+" failed",content:[{type:"error",body:n}]},a&&/^\{.*\}$/.test(a)&&(u=JSON.parse(a),s.subtitle=u,u.code&&(r=t||n,s.content=h.map((function(e){return{type:"info",body:e}})))),i.printGroupLog(s),r;case 4:return[2]}}))}))}}}}function l(e){var t="",n=e.stack.split("\n"),r=n.findIndex((function(e){return u.test(e)}));if(-1!==r){var o=c.exec(n[r+1]||"");t=o?o[0]:""}return t}function p(e){var t=e.err,n=e.className,r=e.methodName,o=e.sourceLink;if(!o)return null;var i,a=t.stack.split("\n"),u=s?/^catchErrorsDecorator\/<\/descriptor.value@.*\d$/:new RegExp(n+"\\.descriptor.value\\s*\\[as\\s"+r+"\\]\\s*\\(.*\\)$"),f=s?/^catchErrorsDecorator\/<\/descriptor.value/:new RegExp(n+"\\.descriptor.value\\s*\\[as\\s"+r+"\\]"),l=a.findIndex((function(e){return u.test(e)}));if(-1!==l){var p=a.filter((function(e,t){return t>l}));p.unshift(a[l].replace(f,n+"."+r).replace(c,o)),i=new Error,i.stack=(s?"@debugger":"Error")+"\n"+p.join("\n")}return i}t.catchErrorsDecorator=f},"5b0f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionReference=void 0;var r=l(n("a34a")),o=n("a32c"),i=n("c508"),a=l(n("b93b")),s=n("8c42"),u=n("d877"),c=n("9911"),f=n("7319");function l(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,s,"next",e)}function s(e){p(i,r,o,a,s,"throw",e)}a(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function m(e){var t=w();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var O=function(e){v(n,e);var t=m(n);function n(e,r,o,i){var a;return d(this,n),a=t.call(this,e,r,"",o,i),i&&(a._transactionId=i),a}return g(n,[{key:"doc",value:function(e){if("string"!==typeof e&&"number"!==typeof e)throw new Error("docId必须为字符串或数字");return new o.DocumentReference(this._db,this._coll,this._apiOptions,e,this._transactionId)}},{key:"add",value:function(){var e=h(r.default.mark((function e(t){var n,o,i;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,(0,f.isArray)(t)||(n=[t]),n=n.map((function(e){return(0,u.stringifyByEJSON)((0,s.serialize)(e))})),o={collectionName:this._coll,data:n},this._transactionId&&(o.transactionId=this._transactionId),e.next=7,this._request.send("database.insertDocument",o,(0,u.getReqOpts)(this._apiOptions));case 7:if(i=e.sent,!i.code){e.next=10;break}return e.abrupt("return",i);case 10:if((0,f.isArray)(t)){e.next=14;break}if(!this._transactionId){e.next=13;break}return e.abrupt("return",{inserted:1,ok:1,id:i.data.insertedIds[0],requestId:i.requestId});case 13:return e.abrupt("return",{id:i.data.insertedIds[0],requestId:i.requestId});case 14:return e.abrupt("return",{ids:i.data.insertedIds,requestId:i.requestId});case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"aggregate",value:function(){return new a.default(this._db,this._coll)}},{key:"options",value:function(e){return c.Validate.isValidOptions(e),new n(this._db,this._coll,e,this._transactionId)}},{key:"name",get:function(){return this._coll}}]),n}(i.Query);t.CollectionReference=O},"5b91":function(e,t,n){(function(t,r){e.exports=r(n("36b8"))})(0,(function(e){(function(){var t=e,n=t.lib,r=n.Base,o=t.enc,i=o.Utf8,a=t.algo;a.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,u=a.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var r=t.finalize(this._oKey.clone().concat(n));return r}})})()}))},"5c2c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WeixinAuthProvider=void 0;var r=n("fd2f"),o=n("5fbe"),i=n("be7e"),a=n("2707"),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p=o.constants.getSdkName,h=o.constants.ERRORS,d=o.constants.COMMUNITY_SITE_URL,y=o.adapters.RUNTIME,g=o.utils.getQuery,v=o.utils.getHash,_=o.utils.removeParam,m=o.utils.printWarn,b=o.helpers.catchErrorsDecorator,E=function(e){function t(t,n,r,o){var i=e.call(this,t)||this;return i._runtime=t.runtime,i._appid=n,i._scope=r,i._state=o||"weixin",i}return s(t,e),t.prototype.signIn=function(){return f(this,void 0,void 0,(function(){return l(this,(function(e){return[2,m(h.OPERATION_FAIL,"API signIn has been deprecated, please use signInWithRedirect insteed")]}))}))},t.prototype.signInWithRedirect=function(){return f(this,void 0,void 0,(function(){return l(this,(function(e){return[2,this._redirect()]}))}))},t.prototype.getRedirectResult=function(e){return f(this,void 0,void 0,(function(){var t;return l(this,(function(n){return t=w(),t?[2,this._signInWithCode(t,e)]:[2,null]}))}))},t.prototype.getLinkRedirectResult=function(e){return void 0===e&&(e={}),f(this,void 0,void 0,(function(){var t,n,r,o,i,a;return l(this,(function(s){return t=e.withUnionId,n=void 0!==t&&t,r=w(),r?(o=this._appid,i=function(e){switch(e){case"snsapi_login":return"WECHAT-OPEN";default:return"WECHAT-PUBLIC"}}(this._scope),a=this._runtime===y.WX_MP?"1":"0",[2,this._request.send("auth.linkWithWeixinCode",{payload:{appid:o,loginType:i,code:r,hybridMiniapp:a,withUnionId:n}})]):[2,null]}))}))},t.prototype._redirect=function(){var e=_("code",location.href);e=_("state",e),e=encodeURIComponent(e);var t="//open.weixin.qq.com/connect/oauth2/authorize";"snsapi_login"===this._scope&&(t="//open.weixin.qq.com/connect/qrconnect");try{location.href=t+"?appid="+this._appid+"&redirect_uri="+e+"&response_type=code&scope="+this._scope+"&state="+this._state+"#wechat_redirect"}catch(n){throw new Error("["+p()+"]["+h.UNKOWN_ERROR+"]"+n)}},t.prototype._signInWithCode=function(e,t){return f(this,void 0,void 0,(function(){var n,r,o,s,u,c,f,p;return l(this,(function(l){switch(l.label){case 0:return n=this._cache.keys,r=n.accessTokenKey,o=n.accessTokenExpireKey,s=n.refreshTokenKey,u=function(e){switch(e){case"snsapi_login":return"WECHAT-OPEN";default:return"WECHAT-PUBLIC"}}(this._scope),[4,this._getRefreshTokenByWXCode(this._appid,u,e,t)];case 1:return c=l.sent(),f=c.refreshToken,[4,this._cache.setStoreAsync(s,f)];case 2:return l.sent(),c.accessToken?[4,this._cache.setStoreAsync(r,c.accessToken)]:[3,4];case 3:l.sent(),l.label=4;case 4:return c.accessTokenExpire?[4,this._cache.setStoreAsync(o,String(c.accessTokenExpire+Date.now()))]:[3,6];case 5:l.sent(),l.label=6;case 6:return i.eventBus.fire(i.EVENTS.LOGIN_STATE_CHANGED),i.eventBus.fire(i.EVENTS.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:a.LOGINTYPE.WECHAT,persistence:this._config.persistence}),[4,this.refreshUserInfo()];case 7:return l.sent(),p=new i.LoginState({envId:this._config.env,cache:this._cache,request:this._request}),[4,p.checkLocalStateAsync()];case 8:return l.sent(),[2,p]}}))}))},t.prototype._getRefreshTokenByWXCode=function(e,t,n,r){return void 0===r&&(r={}),f(this,void 0,void 0,(function(){var o,i,a,s,u,c,f;return l(this,(function(l){return o=r.withUnionId,i=void 0!==o&&o,a=r.createUser,s=void 0===a||a,u="snsapi_base"!==this._scope&&(r.syncUserInfo||!1),c="auth.signIn",f=this._runtime===y.WX_MP?"1":"0",[2,this._request.send(c,{appid:e,loginType:t,hybridMiniapp:f,syncUserInfo:u,loginCredential:n,withUnionId:i,createUser:s}).then((function(e){if(e.code)throw new Error("["+p()+"]["+h.OPERATION_FAIL+"] failed login via wechat: "+e.code);if(e.refresh_token)return{refreshToken:e.refresh_token,accessToken:e.access_token,accessTokenExpire:e.access_token_expire};throw new Error("["+p()+"]["+h.OPERATION_FAIL+"] action:getJwt not return refreshToken")}))]}))}))},u([b({title:"跳转微信公众号授权失败",messages:["请确认以下各项：","  1 - 调用 auth().weixinAuthProvider().signInWithRedirect() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+d]}),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",Promise)],t.prototype,"signInWithRedirect",null),u([b({title:"微信公众号登录失败",messages:["请确认以下各项：","  1 - 调用 auth().weixinAuthProvider().getRedirectResult() 的语法或参数是否正确","  2 - 当前环境是否开通了微信公众号登录授权","  3 - 微信公众号的 AppId 与 AppSecret 配置是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+d]}),c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",Promise)],t.prototype,"getRedirectResult",null),u([b({title:"获取微信重定向绑定结果",messages:["请确认以下各项：","  1 - 调用 auth().weixinAuthProvider().getLinkRedirectResult() 的语法或参数是否正确","  2 - 当前环境是否开通了微信公众号登录授权","  3 - 微信公众号的 AppId 与 AppSecret 配置是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+d]}),c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",Promise)],t.prototype,"getLinkRedirectResult",null),t}(r.AuthProvider);function w(){return g("code")||v("code")}t.WeixinAuthProvider=E},"5fbe":function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.helpers=t.utils=t.events=t.cache=t.adapters=t.constants=void 0;var a=i(n("e032"));t.constants=a;var s=i(n("ddd8"));t.adapters=s;var u=i(n("7562"));t.cache=u;var c=i(n("e0fa"));t.events=c;var f=i(n("2365"));t.utils=f;var l=i(n("76d0"));t.helpers=l},"60b4":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("66fd")),o=i(n("2f62"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r.default.use(o.default);var c=new o.default.Store({state:{version:"1.0.15",env:"prod-9goq82ctb17bd75f",user:{},cache:{},openid:"",bizCard:{},defaultBizCard:{_id:"SYS_DEFAULT_TEMPLATE_RECORD",name:"升阶助手",avatar:"cloud://prod-9goq82ctb17bd75f.7072-prod-9goq82ctb17bd75f-1306535128/resource/logo2.png",role:"normal"},cardAccount:{account_key:"0000",api_map:{},h5_link:"/pagesSys/card/CardDetail",is_forbidden:!1,is_show:!0,name:"vipcard",need_role:"normal",password:"",remark:"",support_h5:!0,title:"我的名片",url:"/pagesSys/card/CardDetail",user_name:"",view_count:0},resourceRootName:"",cloudRoot:"",httpRoot:"",filePath:"",needAuthFlag:!1},mutations:{convertFilePath:function(e,t){0==e.resourceRootName.length&&(e.resourceRootName="7072-"+e.env+"-1306535128",e.cloudRoot="cloud://"+e.env+"."+e.resourceRootName+"/",e.httpRoot="https://"+e.resourceRootName+".tcb.qcloud.la/"),e.filePath=e.httpRoot+t.split(e.resourceRootName)[1],console.log("convert url",e.filePath)},needWxAuth:function(t,n){var r=e.getStorageSync("version");if(r&&r==t.version||(t.user={},e.removeStorageSync("user"),e.setStorageSync("version",t.version)),t.needAuthFlag=0===Object.keys(t.user).length,console.log("needAuthFlag",t.needAuthFlag),!t.needAuthFlag){n&&n._id?n.role="normal":(t.user.bizCardId&&(t.defaultBizCard._id=t.user.bizCardId,t.defaultBizCard.name=t.user.bizCardName,t.defaultBizCard.avatar=t.user.bizCardAvatar,t.defaultBizCard.role=t.user.role),n=t.defaultBizCard),console.log("needWxAuth bizCard",n);var o=!1;for(var i in t.user.userInfo.sites)if(t.user.userInfo.sites[i].bizCardId==n._id){o=!0;break}if(o)return;var a={accounts:[],role:n.role,bizCardId:n._id,bizCardName:n.name,bizCardAvatar:n.avatar};t.user.userInfo.accounts||(t.user.userInfo.accounts=[]),0==t.user.userInfo.accounts.length&&(t.user.userInfo.accounts.push(t.cardAccount),t.user.userInfo.bizCardId=n._id,t.user.userInfo.bizCardName=n.name,t.user.userInfo.bizCardAvatar=n.avatar,t.user.userInfo.role=n.role),a.accounts.push(t.cardAccount),t.user.userInfo.sites||(t.user.userInfo.sites=[]),t.user.userInfo.sites.push(a),e.setStorageSync("user",t.user),e.setStorageSync("openid",t.user._openid),wx.cloud.callFunction({name:"sys",data:{$url:"updateUserInfo",id:t.user._id,userInfo:t.user.userInfo}})}},wxAuth:function(t,n){n?n.role="normal":(t.user.bizCardId&&(t.defaultBizCard._id=t.user.bizCardId,t.defaultBizCard.name=t.user.bizCardName,t.defaultBizCard.avatar=t.user.bizCardAvatar,t.defaultBizCard.role=t.user.role),n=t.defaultBizCard),console.log("wxAuth bizCard",n),wx.getUserProfile({desc:"用于完善会员资料",success:function(r){r.userInfo?(t.user.userInfo=r.userInfo,t.user.userInfo.role="normal",console.log("userInfo",t.user.userInfo),wx.cloud.callFunction({name:"sys",data:{$url:"registerUser",userInfo:t.user.userInfo},success:function(r){if(console.log("sys.registerUser",r.result),0==r.result.code){t.user=r.result.data||{},e.setStorageSync("user",t.user),e.setStorageSync("openid",t.user._openid);var o=!1;for(var i in t.user.userInfo.sites)if(t.user.userInfo.sites[i].bizCardId==n._id){o=!0;break}if(!o){var a={accounts:[],role:n.role,bizCardId:n._id,bizCardName:n.name,bizCardAvatar:n.avatar};t.user.userInfo.accounts||(t.user.userInfo.accounts=[]),0==t.user.userInfo.accounts.length&&(t.user.userInfo.accounts.push(t.cardAccount),t.user.userInfo.bizCardId=n._id,t.user.userInfo.bizCardName=n.name,t.user.userInfo.bizCardAvatar=n.avatar,t.user.userInfo.role=n.role),a.accounts.push(t.cardAccount),t.user.userInfo.sites||(t.user.userInfo.sites=[]),t.user.userInfo.sites.push(a),e.setStorageSync("user",t.user),e.setStorageSync("openid",t.user._openid)}wx.cloud.callFunction({name:"sys",data:{$url:"updateUserInfo",id:t.user._id,userInfo:t.user.userInfo}}).then((function(n){console.log("统一更新用户信息 updateUserInfo res",n),wx.cloud.callFunction({name:"sys",data:{$url:"getCardDetailByUserId",userId:t.user._id||"0"}}).then((function(n){console.log("寻找用户名片",n.result.data),n.result.data?t.needAuthFlag=!1:wx.cloud.callFunction({name:"sys",data:{$url:"addCard",user:t.user}}).then((function(n){console.log("不存在用户名片时 create My card",n),t.user.userInfo.cardId=n.result._id,e.setStorageSync("user",t.user),wx.cloud.callFunction({name:"sys",data:{$url:"genPersonCardQrcode",id:t.user._id,cardId:t.user.userInfo.cardId,userInfo:t.user.userInfo,page:"pagesSys/card/ShareCardDetail",width:430}}).then((function(e){console.log("生成名片码 genCardQrcode",e.result.data),wx.cloud.callFunction({name:"sys",data:{$url:"initCardHolder",card_id:t.user.userInfo.cardId,holder_name:t.user.userInfo.nickName,user_id:t.user._id}}).then((function(e){console.log("初始化名片收藏夹 initCardHolder success _id:",e.result._id),t.needAuthFlag=!1}))}))}))}))}))}},fail:function(e){console.log("失败"+e)}})):e.showToast({icon:"none",title:"授权失败,请重新授权!"})}})},updateUserAuth:function(t,n){var r=!1;for(var o in t.user.userInfo.sites)if(n._id==t.user.userInfo.sites[o].bizCardId){t.user.userInfo.bizCardId=t.user.userInfo.sites[o].bizCardId,t.user.userInfo.bizCardName=t.user.userInfo.sites[o].bizCardName,t.user.userInfo.bizCardAvatar=t.user.userInfo.sites[o].bizCardAvatar,t.user.userInfo.role=t.user.userInfo.sites[o].role,t.user.userInfo.accounts=t.user.userInfo.sites[o].accounts,r=!0,console.log("切换 updateUserAuth",n.name,n._id);break}if(!r){t.user.userInfo.bizCardId=n._id,t.user.userInfo.bizCardName=n.name,t.user.userInfo.bizCardAvatar=n.avatar,t.user.userInfo.role="normal",t.user.userInfo.accounts.push(t.cardAccount);var i={bizCardId:t.user.userInfo.bizCardId,bizCardName:t.user.userInfo.bizCardName,bizCardAvatar:t.user.userInfo.bizCardAvatar,role:t.user.userInfo.role,accounts:t.user.userInfo.accounts};t.user.userInfo.sites.push(i),console.log("新增 updateUserAuth",n.name,n._id)}e.setStorageSync("user",t.user),wx.cloud.callFunction({name:"sys",data:{$url:"updateUserInfo",id:t.user._id,userInfo:t.user.userInfo}})},logIn:function(t,n){t.user=n||{},t.openid=n._openid||"",e.setStorageSync("user",n),e.setStorageSync("openid",n._openid)},updateUser:function(t,n){t.user=n||{},e.setStorageSync("user",n)},logOut:function(t){t.user={},e.removeStorageSync("user")},isLogin:function(t){var n=e.getStorageSync("openid")||"";if(n){var r=e.getStorageSync("user");r&&(t.user=r)}else e.removeStorageSync("user")},setCache:function(e,t){e.cache=s(s({},e.cache),t)}}}),f=c;t.default=f}).call(this,n("543d")["default"])},"60fd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var r=n("bdc9"),o=n("6fe9");function i(e,t){return f(e)||c(e,t)||s(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(u){o=!0,i=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(o)throw i}}return n}}function f(e){if(Array.isArray(e))return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function e(){l(this,e)};t.Util=p,p.formatResDocumentData=function(e){return e.map((function(e){return p.formatField(e)}))},p.formatField=function(e){var t=Object.keys(e),n={};return Array.isArray(e)&&(n=[]),t.forEach((function(t){var a,s=e[t],u=p.whichType(s);switch(u){case r.FieldType.GeoPoint:a=new o.Point(s.coordinates[0],s.coordinates[1]);break;case r.FieldType.GeoLineString:a=new o.LineString(s.coordinates.map((function(e){return new o.Point(e[0],e[1])})));break;case r.FieldType.GeoPolygon:a=new o.Polygon(s.coordinates.map((function(e){return new o.LineString(e.map((function(e){var t=i(e,2),n=t[0],r=t[1];return new o.Point(n,r)})))})));break;case r.FieldType.GeoMultiPoint:a=new o.MultiPoint(s.coordinates.map((function(e){return new o.Point(e[0],e[1])})));break;case r.FieldType.GeoMultiLineString:a=new o.MultiLineString(s.coordinates.map((function(e){return new o.LineString(e.map((function(e){var t=i(e,2),n=t[0],r=t[1];return new o.Point(n,r)})))})));break;case r.FieldType.GeoMultiPolygon:a=new o.MultiPolygon(s.coordinates.map((function(e){return new o.Polygon(e.map((function(e){return new o.LineString(e.map((function(e){var t=i(e,2),n=t[0],r=t[1];return new o.Point(n,r)})))})))})));break;case r.FieldType.Date:a=s;break;case r.FieldType.Object:case r.FieldType.Array:a=p.formatField(s);break;case r.FieldType.ServerDate:a=new Date(s.$date);break;default:a=s}Array.isArray(n)?n.push(a):n[t]=a})),n},p.whichType=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);return t===r.FieldType.Date?r.FieldType.Date:(t===r.FieldType.Object&&(e.$date?t=r.FieldType.ServerDate:o.Point.validate(e)?t=r.FieldType.GeoPoint:o.LineString.validate(e)?t=r.FieldType.GeoLineString:o.Polygon.validate(e)?t=r.FieldType.GeoPolygon:o.MultiPoint.validate(e)?t=r.FieldType.GeoMultiPoint:o.MultiLineString.validate(e)?t=r.FieldType.GeoMultiLineString:o.MultiPolygon.validate(e)&&(t=r.FieldType.GeoMultiPolygon)),t)},p.generateDocId=function(){for(var e="ABCDEFabcdef0123456789",t="",n=0;n<24;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"63ea":function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setInternalBufferSize=t.serializeWithBufferAndIndex=t.serialize=t.deserializeStream=t.deserialize=t.calculateObjectSize=t.UUID=t.Timestamp=t.ObjectId=t.ObjectID=t.MinKey=t.MaxKey=t.Map=t.LongWithoutOverridesClass=t.Long=t.Int32=t.EJSON=t.Double=t.Decimal128=t.DBRef=t.Code=t.Binary=t.BSON_INT64_MIN=t.BSON_INT64_MAX=t.BSON_INT32_MIN=t.BSON_INT32_MAX=t.BSON_DATA_UNDEFINED=t.BSON_DATA_TIMESTAMP=t.BSON_DATA_SYMBOL=t.BSON_DATA_STRING=t.BSON_DATA_REGEXP=t.BSON_DATA_OID=t.BSON_DATA_OBJECT=t.BSON_DATA_NUMBER=t.BSON_DATA_NULL=t.BSON_DATA_MIN_KEY=t.BSON_DATA_MAX_KEY=t.BSON_DATA_LONG=t.BSON_DATA_INT=t.BSON_DATA_DECIMAL128=t.BSON_DATA_DBPOINTER=t.BSON_DATA_DATE=t.BSON_DATA_CODE_W_SCOPE=t.BSON_DATA_CODE=t.BSON_DATA_BOOLEAN=t.BSON_DATA_BINARY=t.BSON_DATA_ARRAY=t.BSON_BINARY_SUBTYPE_UUID_NEW=t.BSON_BINARY_SUBTYPE_UUID=t.BSON_BINARY_SUBTYPE_USER_DEFINED=t.BSON_BINARY_SUBTYPE_MD5=t.BSON_BINARY_SUBTYPE_FUNCTION=t.BSON_BINARY_SUBTYPE_DEFAULT=t.BSON_BINARY_SUBTYPE_BYTE_ARRAY=t.BSONSymbol=t.BSONRegExp=t.default=void 0;var r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function i(e,t){return t={exports:{}},e(t,t.exports),t.exports}for(var a=g,s=_,u=E,c=[],f=[],l="undefined"!==typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,d=p.length;h<d;++h)c[h]=p[h],f[p.charCodeAt(h)]=h;function y(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function g(e){var t=y(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function v(e,t,n){return 3*(t+n)/4-n}function _(e){var t,n,r=y(e),o=r[0],i=r[1],a=new l(v(e,o,i)),s=0,u=i>0?o-4:o;for(n=0;n<u;n+=4)t=f[e.charCodeAt(n)]<<18|f[e.charCodeAt(n+1)]<<12|f[e.charCodeAt(n+2)]<<6|f[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===i&&(t=f[e.charCodeAt(n)]<<2|f[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===i&&(t=f[e.charCodeAt(n)]<<10|f[e.charCodeAt(n+1)]<<4|f[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a}function m(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function b(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(m(r));return o.join("")}function E(e){for(var t,n=e.length,r=n%3,o=[],i=16383,a=0,s=n-r;a<s;a+=i)o.push(b(e,a,a+i>s?s:a+i));return 1===r?(t=e[n-1],o.push(c[t>>2]+c[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(c[t>>10]+c[t>>4&63]+c[t<<2&63]+"=")),o.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;var w={byteLength:a,toByteArray:s,fromByteArray:u},S=function(e,t,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?o-1:0,p=n?-1:1,h=e[t+l];for(l+=p,i=h&(1<<-f)-1,h>>=-f,f+=s;f>0;i=256*i+e[t+l],l+=p,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+e[t+l],l+=p,f-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},O=function(e,t,n,r,o,i){var a,s,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,d=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+l>=1?p/u:p*Math.pow(2,1-l),t*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(t*u-1)*Math.pow(2,o),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[n+h]=255&a,h+=d,a/=256,c-=8);e[n+h-d]|=128*y},A={read:S,write:O},I=i((function(e,t){var n="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;var r=2147483647;function o(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}function i(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return s(e,t,n)}function s(e,t,n){if("string"===typeof e)return l(e,t);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers["typeof"](e));if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var o=y(e);if(o)return o;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers["typeof"](e))}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e,t,n){return u(e),e<=0?i(e):void 0!==t?"string"===typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}function f(e){return u(e),i(e<0?0:0|g(e))}function l(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|_(e,t),r=i(n),o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}function p(e){for(var t=e.length<0?0:0|g(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e){if(J(e,Uint8Array)){var t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return p(e)}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function y(e){if(a.isBuffer(e)){var t=0|g(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!==typeof e.length||Q(e.length)?i(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}function g(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),a.alloc(+e)}function _(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers["typeof"](e));var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(o)return r?-1:V(e).length;t=(""+t).toLowerCase(),o=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return B(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return D(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function E(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Q(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:S(e,t,n,r,o);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,r,o){var i,a=1,s=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var f=-1;for(i=n;i<s;i++)if(c(e,i)===c(t,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){for(var l=!0,p=0;p<u;p++)if(c(e,i+p)!==c(t,p)){l=!1;break}if(l)return i}return-1}function O(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(Q(s))return a;e[n+a]=s}return a}function I(e,t,n,r){return z(V(t,e.length-n),e,n,r)}function T(e,t,n,r){return z(G(t),e,n,r)}function N(e,t,n,r){return z(K(t),e,n,r)}function R(e,t,n,r){return z(H(t,e.length-n),e,n,r)}function D(e,t,n){return 0===t&&n===e.length?w.fromByteArray(e):w.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);var r=[],o=t;while(o<n){var i,a,s,u,c=e[o],f=null,l=c>239?4:c>223?3:c>191?2:1;if(o+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:i=e[o+1],128===(192&i)&&(u=(31&c)<<6|63&i,u>127&&(f=u));break;case 3:i=e[o+1],a=e[o+2],128===(192&i)&&128===(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a,u>2047&&(u<55296||u>57343)&&(f=u));break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128===(192&i)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s,u>65535&&u<1114112&&(f=u))}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=l}return L(r)}t.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=o(),a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return c(e,t,n)},a.allocUnsafe=function(e){return f(e)},a.allocUnsafeSlow=function(e){return f(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(J(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(J(i,Uint8Array))o+i.length>r.length?a.from(i).copy(r,o):Uint8Array.prototype.set.call(r,i,o);else{if(!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o)}o+=i.length}return r},a.byteLength=_,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):m.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,o){if(J(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers["typeof"](e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var i=o-r,s=n-t,u=Math.min(i,s),c=this.slice(r,o),f=e.slice(t,n),l=0;l<u;++l)if(c[l]!==f[l]){i=c[l],s=f[l];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return E(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return E(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return O(this,e,t,n);case"utf8":case"utf-8":return I(this,e,t,n);case"ascii":case"latin1":case"binary":return T(this,e,t,n);case"base64":return N(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function L(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}function B(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=X[e[i]];return o}function k(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function j(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function $(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(e,t,n,r,o){return t=+t,n>>>=0,o||$(e,t,n,4),A.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return t=+t,n>>>=0,o||$(e,t,n,8),A.write(e,t,n,r,52,8),n+8}a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);var r=this[e],o=1,i=0;while(++i<t&&(o*=256))r+=this[e+i]*o;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);var r=this[e+--t],o=1;while(t>0&&(o*=256))r+=this[e+--t]*o;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);var r=this[e],o=1,i=0;while(++i<t&&(o*=256))r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);var r=t,o=1,i=this[e+--r];while(r>0&&(o*=256))i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),A.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),A.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),A.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),A.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=Math.pow(2,8*n)-1;U(this,e,t,n,o,0)}var i=1,a=0;this[t]=255&e;while(++a<n&&(i*=256))this[t+a]=e/i&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var o=Math.pow(2,8*n)-1;U(this,e,t,n,o,0)}var i=n-1,a=1;this[t+i]=255&e;while(--i>=0&&(a*=256))this[t+i]=e/a&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);U(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;this[t]=255&e;while(++i<n&&(a*=256))e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);U(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;this[t+i]=255&e;while(--i>=0&&(a*=256))e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return W(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return W(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},a.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%u]}return this};var q=/[^+/0-9A-Za-z-_]/g;function Y(e){if(e=e.split("=")[0],e=e.trim().replace(q,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function V(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,o,i=[],a=0;a<e.length;++a){if((t-=2)<0)break;n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r)}return i}function K(e){return w.toByteArray(Y(e))}function z(e,t,n,r){for(var o=0;o<r;++o){if(o+n>=t.length||o>=e.length)break;t[o+n]=e[o]}return o}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!==e}var X=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}()}));
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */I.Buffer,I.SlowBuffer,I.INSPECT_MAX_BYTES,I.kMaxLength;var T,N={};T="function"===typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var R=T,D=/%[sdj%]/g;function P(e){if(!Q(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(x(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,i=String(e).replace(D,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),a=r[n];n<o;a=r[++n])K(a)||!te(a)?i+=" "+a:i+=" "+x(a);return i}function C(t,n){if(Z(e.process))return function(){return C(t,n).apply(this,arguments)};var r=!1;function o(){return r||(console.error(n),r=!0),t.apply(this,arguments)}return o}var L,B={};function M(e){if(Z(L)&&(L=""),e=e.toUpperCase(),!B[e])if(new RegExp("\\b"+e+"\\b","i").test(L)){var t=0;B[e]=function(){var n=P.apply(null,arguments);console.error("%s %d: %s",e,t,n)}}else B[e]=function(){};return B[e]}function x(e,t){var n={seen:[],stylize:j};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),H(t)?n.showHidden=t:t&&pe(n,t),Z(n.showHidden)&&(n.showHidden=!1),Z(n.depth)&&(n.depth=2),Z(n.colors)&&(n.colors=!1),Z(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=k),$(n,e,n.depth)}function k(e,t){var n=x.styles[t];return n?"["+x.colors[n][0]+"m"+e+"["+x.colors[n][1]+"m":e}function j(e,t){return e}function U(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function $(e,t,n){if(e.customInspect&&t&&oe(t.inspect)&&t.inspect!==x&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return Q(r)||(r=$(e,r,n)),r}var o=W(e,t);if(o)return o;var i=Object.keys(t),a=U(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),re(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return F(t);if(0===i.length){if(oe(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(ee(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(ne(t))return e.stylize(Date.prototype.toString.call(t),"date");if(re(t))return F(t)}var u,c="",f=!1,l=["{","}"];if(G(t)&&(f=!0,l=["[","]"]),oe(t)){var p=t.name?": "+t.name:"";c=" [Function"+p+"]"}return ee(t)&&(c=" "+RegExp.prototype.toString.call(t)),ne(t)&&(c=" "+Date.prototype.toUTCString.call(t)),re(t)&&(c=" "+F(t)),0!==i.length||f&&0!=t.length?n<0?ee(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=f?q(e,t,n,a,i):i.map((function(r){return Y(e,t,n,a,r,f)})),e.seen.pop(),V(u,c,l)):l[0]+c+l[1]}function W(e,t){if(Z(t))return e.stylize("undefined","undefined");if(Q(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return J(t)?e.stylize(""+t,"number"):H(t)?e.stylize(""+t,"boolean"):K(t)?e.stylize("null","null"):void 0}function F(e){return"["+Error.prototype.toString.call(e)+"]"}function q(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)he(t,String(a))?i.push(Y(e,t,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(Y(e,t,n,r,o,!0))})),i}function Y(e,t,n,r,o,i){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),he(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(u.value)<0?(s=K(n)?$(e,u.value,null):$(e,u.value,n-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n"))):s=e.stylize("[Circular]","special")),Z(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function V(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function G(e){return Array.isArray(e)}function H(e){return"boolean"===typeof e}function K(e){return null===e}function z(e){return null==e}function J(e){return"number"===typeof e}function Q(e){return"string"===typeof e}function X(e){return"symbol"===babelHelpers["typeof"](e)}function Z(e){return void 0===e}function ee(e){return te(e)&&"[object RegExp]"===se(e)}function te(e){return"object"===babelHelpers["typeof"](e)&&null!==e}function ne(e){return te(e)&&"[object Date]"===se(e)}function re(e){return te(e)&&("[object Error]"===se(e)||e instanceof Error)}function oe(e){return"function"===typeof e}function ie(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===babelHelpers["typeof"](e)||"undefined"===typeof e}function ae(e){return n.isBuffer(e)}function se(e){return Object.prototype.toString.call(e)}function ue(e){return e<10?"0"+e.toString(10):e.toString(10)}x.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},x.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function fe(){var e=new Date,t=[ue(e.getHours()),ue(e.getMinutes()),ue(e.getSeconds())].join(":");return[e.getDate(),ce[e.getMonth()],t].join(" ")}function le(){console.log("%s - %s",fe(),P.apply(null,arguments))}function pe(e,t){if(!t||!te(t))return e;var n=Object.keys(t),r=n.length;while(r--)e[n[r]]=t[n[r]];return e}function he(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var de={inherits:R,_extend:pe,log:le,isBuffer:ae,isPrimitive:ie,isFunction:oe,isError:re,isDate:ne,isObject:te,isRegExp:ee,isUndefined:Z,isSymbol:X,isString:Q,isNumber:J,isNullOrUndefined:z,isNull:K,isBoolean:H,isArray:G,inspect:x,deprecate:C,format:P,debuglog:M},ye=i((function(e,t){function n(e){return e.toString().replace("function(","function (")}Object.defineProperty(t,"__esModule",{value:!0}),t.deprecate=t.isObjectLike=t.isDate=t.haveBuffer=t.isMap=t.isRegExp=t.isBigUInt64Array=t.isBigInt64Array=t.isUint8Array=t.isAnyArrayBuffer=t.randomBytes=t.normalizedFunctionString=void 0,t.normalizedFunctionString=n;var o="object"===typeof r.navigator&&"ReactNative"===r.navigator.product,i=o?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.",a=function(e){console.warn(i);for(var t=I.Buffer.alloc(e),n=0;n<e;++n)t[n]=Math.floor(256*Math.random());return t},s=function(){if("undefined"!==typeof window){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues)return function(t){return e.getRandomValues(I.Buffer.alloc(t))}}if("undefined"!==typeof r&&r.crypto&&r.crypto.getRandomValues)return function(e){return r.crypto.getRandomValues(I.Buffer.alloc(e))};var t;try{t=N.randomBytes}catch(n){}return t||a};function u(e){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e))}function c(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function f(e){return"[object BigInt64Array]"===Object.prototype.toString.call(e)}function l(e){return"[object BigUint64Array]"===Object.prototype.toString.call(e)}function p(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function h(e){return"[object Map]"===Object.prototype.toString.call(e)}function d(){return"undefined"!==typeof r&&"undefined"!==typeof r.Buffer}function y(e){return g(e)&&"[object Date]"===Object.prototype.toString.call(e)}function g(e){return"object"===typeof e&&null!==e}function v(e,t){if("undefined"===typeof window&&"undefined"===typeof self)return de.deprecate(e,t);var n=!1;function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(console.warn(t),n=!0),e.apply(this,r)}return r}t.randomBytes=s(),t.isAnyArrayBuffer=u,t.isUint8Array=c,t.isBigInt64Array=f,t.isBigUInt64Array=l,t.isRegExp=p,t.isMap=h,t.haveBuffer=d,t.isDate=y,t.isObjectLike=g,t.deprecate=v}));o(ye),ye.deprecate,ye.isObjectLike,ye.isDate,ye.haveBuffer,ye.isMap,ye.isRegExp,ye.isBigUInt64Array,ye.isBigInt64Array,ye.isUint8Array,ye.isAnyArrayBuffer,ye.randomBytes,ye.normalizedFunctionString;var ge=i((function(e,t){function n(e){if(ArrayBuffer.isView(e))return I.Buffer.from(e.buffer,e.byteOffset,e.byteLength);if(ye.isAnyArrayBuffer(e))return I.Buffer.from(e);throw new TypeError("Must use either Buffer or TypedArray")}Object.defineProperty(t,"__esModule",{value:!0}),t.ensureBuffer=void 0,t.ensureBuffer=n}));o(ge),ge.ensureBuffer;var ve=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToUuidHexString=t.uuidHexStringToBuffer=t.uuidValidateString=void 0;var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,r=function(e){return"string"===typeof e&&n.test(e)};t.uuidValidateString=r;var o=function(e){if(!t.uuidValidateString(e))throw new TypeError('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var n=e.replace(/-/g,"");return I.Buffer.from(n,"hex")};t.uuidHexStringToBuffer=o;var i=function(e,t){return void 0===t&&(t=!0),t?e.toString("hex",0,4)+"-"+e.toString("hex",4,6)+"-"+e.toString("hex",6,8)+"-"+e.toString("hex",8,10)+"-"+e.toString("hex",10,16):e.toString("hex")};t.bufferToUuidHexString=i}));o(ve),ve.bufferToUuidHexString,ve.uuidHexStringToBuffer,ve.uuidValidateString;var _e=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UUID=void 0;var n=16,r=Symbol("id"),o=function(){function e(t){if("undefined"===typeof t)this.id=e.generate();else if(t instanceof e)this[r]=I.Buffer.from(t.id),this.__id=t.__id;else if(ArrayBuffer.isView(t)&&t.byteLength===n)this.id=ge.ensureBuffer(t);else{if("string"!==typeof t)throw new TypeError("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");this.id=ve.uuidHexStringToBuffer(t)}}return Object.defineProperty(e.prototype,"id",{get:function(){return this[r]},set:function(t){this[r]=t,e.cacheHexString&&(this.__id=ve.bufferToUuidHexString(t))},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(t){if(void 0===t&&(t=!0),e.cacheHexString&&this.__id)return this.__id;var n=ve.bufferToUuidHexString(this.id,t);return e.cacheHexString&&(this.__id=n),n},e.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(!t)return!1;if(t instanceof e)return t.id.equals(this.id);try{return new e(t).id.equals(this.id)}catch(n){return!1}},e.prototype.toBinary=function(){return new me.Binary(this.id,me.Binary.SUBTYPE_UUID)},e.generate=function(){var e=ye.randomBytes(n);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,I.Buffer.from(e)},e.isValid=function(t){if(!t)return!1;if(t instanceof e)return!0;if("string"===typeof t)return ve.uuidValidateString(t);if(ye.isUint8Array(t)){if(t.length!==n)return!1;try{return parseInt(t[6].toString(16)[0],10)===me.Binary.SUBTYPE_UUID}catch(r){return!1}}return!1},e.createFromHexString=function(t){var n=ve.uuidHexStringToBuffer(t);return new e(n)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new UUID("'+this.toHexString()+'")'},e}();t.UUID=o,Object.defineProperty(o.prototype,"_bsontype",{value:"UUID"})}));o(_e),_e.UUID;var me=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Binary=void 0;var n=function(){function e(t,n){if(!(this instanceof e))return new e(t,n);if(null!=t&&"string"!==typeof t&&!ArrayBuffer.isView(t)&&!(t instanceof ArrayBuffer)&&!Array.isArray(t))throw new TypeError("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=null!==n&&void 0!==n?n:e.BSON_BINARY_SUBTYPE_DEFAULT,null==t?(this.buffer=I.Buffer.alloc(e.BUFFER_SIZE),this.position=0):("string"===typeof t?this.buffer=I.Buffer.from(t,"binary"):Array.isArray(t)?this.buffer=I.Buffer.from(t):this.buffer=ge.ensureBuffer(t),this.position=this.buffer.byteLength)}return e.prototype.put=function(t){if("string"===typeof t&&1!==t.length)throw new TypeError("only accepts single character String");if("number"!==typeof t&&1!==t.length)throw new TypeError("only accepts single character Uint8Array or Array");var n;if(n="string"===typeof t?t.charCodeAt(0):"number"===typeof t?t:t[0],n<0||n>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=n;else{var r=I.Buffer.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=n}},e.prototype.write=function(e,t){if(t="number"===typeof t?t:this.position,this.buffer.length<t+e.length){var n=I.Buffer.alloc(this.buffer.length+e.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(e)?(this.buffer.set(ge.ensureBuffer(e),t),this.position=t+e.byteLength>this.position?t+e.length:this.position):"string"===typeof e&&(this.buffer.write(e,t,e.length,"binary"),this.position=t+e.length>this.position?t+e.length:this.position)},e.prototype.read=function(e,t){return t=t&&t>0?t:this.position,this.buffer.slice(e,e+t)},e.prototype.value=function(e){return e=!!e,e&&this.buffer.length===this.position?this.buffer:e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},e.prototype.length=function(){return this.position},e.prototype.toJSON=function(){return this.buffer.toString("base64")},e.prototype.toString=function(e){return this.buffer.toString(e)},e.prototype.toExtendedJSON=function(e){e=e||{};var t=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===n.length?"0"+n:n}:{$binary:{base64:t,subType:1===n.length?"0"+n:n}}},e.prototype.toUUID=function(){if(this.sub_type===e.SUBTYPE_UUID)return new _e.UUID(this.buffer.slice(0,this.position));throw new Error('Binary sub_type "'+this.sub_type+'" is not supported for converting to UUID. Only "'+e.SUBTYPE_UUID+'" is currently supported.')},e.fromExtendedJSON=function(t,n){var r,o;if(n=n||{},"$binary"in t?n.legacy&&"string"===typeof t.$binary&&"$type"in t?(o=t.$type?parseInt(t.$type,16):0,r=I.Buffer.from(t.$binary,"base64")):"string"!==typeof t.$binary&&(o=t.$binary.subType?parseInt(t.$binary.subType,16):0,r=I.Buffer.from(t.$binary.base64,"base64")):"$uuid"in t&&(o=4,r=ve.uuidHexStringToBuffer(t.$uuid)),!r)throw new TypeError("Unexpected Binary Extended JSON format "+JSON.stringify(t));return new e(r,o)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var e=this.value(!0);return'new Binary(Buffer.from("'+e.toString("hex")+'", "hex"), '+this.sub_type+")"},e.BSON_BINARY_SUBTYPE_DEFAULT=0,e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_USER_DEFINED=128,e}();t.Binary=n,Object.defineProperty(n.prototype,"_bsontype",{value:"Binary"})}));o(me),me.Binary;var be=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Code=void 0;var n=function(){function e(t,n){if(!(this instanceof e))return new e(t,n);this.code=t,this.scope=n}return e.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},e.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},e.fromExtendedJSON=function(t){return new e(t.$code,t.$scope)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var e=this.toJSON();return'new Code("'+e.code+'"'+(e.scope?", "+JSON.stringify(e.scope):"")+")"},e}();t.Code=n,Object.defineProperty(n.prototype,"_bsontype",{value:"Code"})}));o(be),be.Code;var Ee=i((function(e,t){function n(e){return ye.isObjectLike(e)&&null!=e["$id"]&&null!=e["$ref"]}Object.defineProperty(t,"__esModule",{value:!0}),t.DBRef=t.isDBRefLike=void 0,t.isDBRefLike=n;var r=function(){function e(t,n,r,o){if(!(this instanceof e))return new e(t,n,r,o);var i=t.split(".");2===i.length&&(r=i.shift(),t=i.shift()),this.collection=t,this.oid=n,this.db=r,this.fields=o||{}}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e},e.prototype.toExtendedJSON=function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields)),t},e.fromExtendedJSON=function(t){var n=Object.assign({},t);return delete n.$ref,delete n.$id,delete n.$db,new e(t.$ref,t.$id,t.$db,n)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var e=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return'new DBRef("'+this.namespace+'", new ObjectId("'+e+'")'+(this.db?', "'+this.db+'"':"")+")"},e}();t.DBRef=r,Object.defineProperty(r.prototype,"_bsontype",{value:"DBRef"})}));o(Ee),Ee.DBRef,Ee.isDBRefLike;var we=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Long=void 0;var n=void 0;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(l){}var r=65536,o=1<<24,i=r*r,a=i*i,s=a/2,u={},c={},f=function(){function e(t,n,r){if(void 0===t&&(t=0),!(this instanceof e))return new e(t,n,r);"bigint"===typeof t?Object.assign(this,e.fromBigInt(t,!!n)):"string"===typeof t?Object.assign(this,e.fromString(t,!!n)):(this.low=0|t,this.high=0|n,this.unsigned=!!r),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return e.fromBits=function(t,n,r){return new e(t,n,r)},e.fromInt=function(t,n){var r,o,i;return n?(t>>>=0,(i=0<=t&&t<256)&&(o=c[t],o)?o:(r=e.fromBits(t,(0|t)<0?-1:0,!0),i&&(c[t]=r),r)):(t|=0,(i=-128<=t&&t<128)&&(o=u[t],o)?o:(r=e.fromBits(t,t<0?-1:0,!1),i&&(u[t]=r),r))},e.fromNumber=function(t,n){if(isNaN(t))return n?e.UZERO:e.ZERO;if(n){if(t<0)return e.UZERO;if(t>=a)return e.MAX_UNSIGNED_VALUE}else{if(t<=-s)return e.MIN_VALUE;if(t+1>=s)return e.MAX_VALUE}return t<0?e.fromNumber(-t,n).neg():e.fromBits(t%i|0,t/i|0,n)},e.fromBigInt=function(t,n){return e.fromString(t.toString(),n)},e.fromString=function(t,n,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"===typeof n?(r=n,n=!1):n=!!n,r=r||10,r<2||36<r)throw RangeError("radix");var o;if((o=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return e.fromString(t.substring(1),n,r).neg();for(var i=e.fromNumber(Math.pow(r,8)),a=e.ZERO,s=0;s<t.length;s+=8){var u=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+u),r);if(u<8){var f=e.fromNumber(Math.pow(r,u));a=a.mul(f).add(e.fromNumber(c))}else a=a.mul(i),a=a.add(e.fromNumber(c))}return a.unsigned=n,a},e.fromBytes=function(t,n,r){return r?e.fromBytesLE(t,n):e.fromBytesBE(t,n)},e.fromBytesLE=function(t,n){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)},e.fromBytesBE=function(t,n){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)},e.isLong=function(e){return ye.isObjectLike(e)&&!0===e["__isLong__"]},e.fromValue=function(t,n){return"number"===typeof t?e.fromNumber(t,n):"string"===typeof t?e.fromString(t,n):e.fromBits(t.low,t.high,"boolean"===typeof n?n:t.unsigned)},e.prototype.add=function(t){e.isLong(t)||(t=e.fromValue(t));var n=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,a=t.high>>>16,s=65535&t.high,u=t.low>>>16,c=65535&t.low,f=0,l=0,p=0,h=0;return h+=i+c,p+=h>>>16,h&=65535,p+=o+u,l+=p>>>16,p&=65535,l+=r+s,f+=l>>>16,l&=65535,f+=n+a,f&=65535,e.fromBits(p<<16|h,f<<16|l,this.unsigned)},e.prototype.and=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},e.prototype.compare=function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},e.prototype.comp=function(e){return this.compare(e)},e.prototype.divide=function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&-2147483648===this.high&&-1===t.low&&-1===t.high)return this;var r=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var o,i,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;a=e.UZERO}else{if(this.eq(e.MIN_VALUE)){if(t.eq(e.ONE)||t.eq(e.NEG_ONE))return e.MIN_VALUE;if(t.eq(e.MIN_VALUE))return e.ONE;var s=this.shr(1);return o=s.div(t).shl(1),o.eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(i=this.sub(t.mul(o)),a=o.add(i.div(t)),a)}if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=e.ZERO}i=this;while(i.gte(t)){o=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));var u=Math.ceil(Math.log(o)/Math.LN2),c=u<=48?1:Math.pow(2,u-48),f=e.fromNumber(o),l=f.mul(t);while(l.isNegative()||l.gt(i))o-=c,f=e.fromNumber(o,this.unsigned),l=f.mul(t);f.isZero()&&(f=e.ONE),a=a.add(f),i=i.sub(l)}return a},e.prototype.div=function(e){return this.divide(e)},e.prototype.equals=function(t){return e.isLong(t)||(t=e.fromValue(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},e.prototype.eq=function(e){return this.equals(e)},e.prototype.getHighBits=function(){return this.high},e.prototype.getHighBitsUnsigned=function(){return this.high>>>0},e.prototype.getLowBits=function(){return this.low},e.prototype.getLowBitsUnsigned=function(){return this.low>>>0},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();var t,n=0!==this.high?this.high:this.low;for(t=31;t>0;t--)if(0!==(n&1<<t))break;return 0!==this.high?t+33:t+1},e.prototype.greaterThan=function(e){return this.comp(e)>0},e.prototype.gt=function(e){return this.greaterThan(e)},e.prototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},e.prototype.gte=function(e){return this.greaterThanOrEqual(e)},e.prototype.ge=function(e){return this.greaterThanOrEqual(e)},e.prototype.isEven=function(){return 0===(1&this.low)},e.prototype.isNegative=function(){return!this.unsigned&&this.high<0},e.prototype.isOdd=function(){return 1===(1&this.low)},e.prototype.isPositive=function(){return this.unsigned||this.high>=0},e.prototype.isZero=function(){return 0===this.high&&0===this.low},e.prototype.lessThan=function(e){return this.comp(e)<0},e.prototype.lt=function(e){return this.lessThan(e)},e.prototype.lessThanOrEqual=function(e){return this.comp(e)<=0},e.prototype.lte=function(e){return this.lessThanOrEqual(e)},e.prototype.modulo=function(t){if(e.isLong(t)||(t=e.fromValue(t)),n){var r=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,n.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},e.prototype.mod=function(e){return this.modulo(e)},e.prototype.rem=function(e){return this.modulo(e)},e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),n){var r=n.mul(this.low,this.high,t.low,t.high);return e.fromBits(r,n.get_high(),this.unsigned)}if(t.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var o=this.high>>>16,i=65535&this.high,a=this.low>>>16,s=65535&this.low,u=t.high>>>16,c=65535&t.high,f=t.low>>>16,l=65535&t.low,p=0,h=0,d=0,y=0;return y+=s*l,d+=y>>>16,y&=65535,d+=a*l,h+=d>>>16,d&=65535,d+=s*f,h+=d>>>16,d&=65535,h+=i*l,p+=h>>>16,h&=65535,h+=a*f,p+=h>>>16,h&=65535,h+=s*c,p+=h>>>16,h&=65535,p+=o*l+i*f+a*c+s*u,p&=65535,e.fromBits(d<<16|y,p<<16|h,this.unsigned)},e.prototype.mul=function(e){return this.multiply(e)},e.prototype.negate=function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.neg=function(){return this.negate()},e.prototype.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},e.prototype.notEquals=function(e){return!this.equals(e)},e.prototype.neq=function(e){return this.notEquals(e)},e.prototype.ne=function(e){return this.notEquals(e)},e.prototype.or=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},e.prototype.shiftLeft=function(t){return e.isLong(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},e.prototype.shl=function(e){return this.shiftLeft(e)},e.prototype.shiftRight=function(t){return e.isLong(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},e.prototype.shr=function(e){return this.shiftRight(e)},e.prototype.shiftRightUnsigned=function(t){if(e.isLong(t)&&(t=t.toInt()),t&=63,0===t)return this;var n=this.high;if(t<32){var r=this.low;return e.fromBits(r>>>t|n<<32-t,n>>>t,this.unsigned)}return 32===t?e.fromBits(n,0,this.unsigned):e.fromBits(n>>>t-32,0,this.unsigned)},e.prototype.shr_u=function(e){return this.shiftRightUnsigned(e)},e.prototype.shru=function(e){return this.shiftRightUnsigned(e)},e.prototype.subtract=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())},e.prototype.sub=function(e){return this.subtract(e)},e.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},e.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*i+(this.low>>>0):this.high*i+(this.low>>>0)},e.prototype.toBigInt=function(){return BigInt(this.toString())},e.prototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},e.prototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},e.prototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},e.prototype.toSigned=function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this},e.prototype.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(e.MIN_VALUE)){var n=e.fromNumber(t),r=this.div(n),o=r.mul(n).sub(this);return r.toString(t)+o.toInt().toString(t)}return"-"+this.neg().toString(t)}var i=e.fromNumber(Math.pow(t,6),this.unsigned),a=this,s="";while(1){var u=a.div(i),c=a.sub(u.mul(i)).toInt()>>>0,f=c.toString(t);if(a=u,a.isZero())return f+s;while(f.length<6)f="0"+f;s=""+f+s}},e.prototype.toUnsigned=function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)},e.prototype.xor=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},e.prototype.eqz=function(){return this.isZero()},e.prototype.le=function(e){return this.lessThanOrEqual(e)},e.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,n){var r=e.fromString(t.$numberLong);return n&&n.relaxed?r.toNumber():r},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Long("'+this.toString()+'"'+(this.unsigned?", true":"")+")"},e.TWO_PWR_24=e.fromInt(o),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e}();t.Long=f,Object.defineProperty(f.prototype,"__isLong__",{value:!0}),Object.defineProperty(f.prototype,"_bsontype",{value:"Long"})}));o(we),we.Long;var Se=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Decimal128=void 0;var n=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,r=/^(\+|-)?(Infinity|inf)$/i,o=/^(\+|-)?NaN$/i,i=6111,a=-6176,s=6176,u=34,c=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),f=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),l=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),p=/^([-+])?(\d+)?$/,h=31,d=16383,y=30,g=31;function v(e){return!isNaN(parseInt(e,10))}function _(e){var t=we.Long.fromNumber(1e9),n=we.Long.fromNumber(0);if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:n};for(var r=0;r<=3;r++)n=n.shiftLeft(32),n=n.add(new we.Long(e.parts[r],0)),e.parts[r]=n.div(t).low,n=n.modulo(t);return{quotient:e,rem:n}}function m(e,t){if(!e&&!t)return{high:we.Long.fromNumber(0),low:we.Long.fromNumber(0)};var n=e.shiftRightUnsigned(32),r=new we.Long(e.getLowBits(),0),o=t.shiftRightUnsigned(32),i=new we.Long(t.getLowBits(),0),a=n.multiply(o),s=n.multiply(i),u=r.multiply(o),c=r.multiply(i);return a=a.add(s.shiftRightUnsigned(32)),s=new we.Long(s.getLowBits(),0).add(u).add(c.shiftRightUnsigned(32)),a=a.add(s.shiftRightUnsigned(32)),c=s.shiftLeft(32).add(new we.Long(c.getLowBits(),0)),{high:a,low:c}}function b(e,t){var n=e.high>>>0,r=t.high>>>0;if(n<r)return!0;if(n===r){var o=e.low>>>0,i=t.low>>>0;if(o<i)return!0}return!1}function E(e,t){throw new TypeError('"'+e+'" is not a valid Decimal128 string - '+t)}var w=function(){function e(t){if(!(this instanceof e))return new e(t);this.bytes="string"===typeof t?e.fromString(t).bytes:t}return e.fromString=function(t){var h=!1,d=!1,y=!1,g=0,_=0,w=0,S=0,O=0,A=[0],T=0,N=0,R=0,D=0,P=0,C=0,L=new we.Long(0,0),B=new we.Long(0,0),M=0,x=0;if(t.length>=7e3)throw new TypeError(t+" not a valid Decimal128 string");var k=t.match(n),j=t.match(r),U=t.match(o);if(!k&&!j&&!U||0===t.length)throw new TypeError(t+" not a valid Decimal128 string");if(k){var $=k[2],W=k[4],F=k[5],q=k[6];W&&void 0===q&&E(t,"missing exponent power"),W&&void 0===$&&E(t,"missing exponent base"),void 0===W&&(F||q)&&E(t,"missing e before exponent")}if("+"!==t[x]&&"-"!==t[x]||(h="-"===t[x++]),!v(t[x])&&"."!==t[x]){if("i"===t[x]||"I"===t[x])return new e(I.Buffer.from(h?f:l));if("N"===t[x])return new e(I.Buffer.from(c))}while(v(t[x])||"."===t[x])"."!==t[x]?(T<34&&("0"!==t[x]||y)&&(y||(O=_),y=!0,A[N++]=parseInt(t[x],10),T+=1),y&&(w+=1),d&&(S+=1),_+=1,x+=1):(d&&E(t,"contains multiple periods"),d=!0,x+=1);if(d&&!_)throw new TypeError(t+" not a valid Decimal128 string");if("e"===t[x]||"E"===t[x]){var Y=t.substr(++x).match(p);if(!Y||!Y[2])return new e(I.Buffer.from(c));P=parseInt(Y[0],10),x+=Y[0].length}if(t[x])return new e(I.Buffer.from(c));if(R=0,T){if(D=T-1,g=w,1!==g)while("0"===t[O+g-1])g-=1}else R=0,D=0,A[0]=0,w=1,T=1,g=0;P<=S&&S-P>16384?P=a:P-=S;while(P>i){if(D+=1,D-R>u){var V=A.join("");if(V.match(/^0+$/)){P=i;break}E(t,"overflow")}P-=1}while(P<a||T<w){if(0===D&&g<T){P=a,g=0;break}if(T<w?w-=1:D-=1,P<i)P+=1;else{V=A.join("");if(V.match(/^0+$/)){P=i;break}E(t,"overflow")}}if(D-R+1<g){var G=_;d&&(O+=1,G+=1),h&&(O+=1,G+=1);var H=parseInt(t[O+D+1],10),K=0;if(H>=5&&(K=1,5===H))for(K=A[D]%2===1?1:0,C=O+D+2;C<G;C++)if(parseInt(t[C],10)){K=1;break}if(K)for(var z=D;z>=0;z--)if(++A[z]>9&&(A[z]=0,0===z)){if(!(P<i))return new e(I.Buffer.from(h?f:l));P+=1,A[z]=1}}if(L=we.Long.fromNumber(0),B=we.Long.fromNumber(0),0===g)L=we.Long.fromNumber(0),B=we.Long.fromNumber(0);else if(D-R<17){z=R;for(B=we.Long.fromNumber(A[z++]),L=new we.Long(0,0);z<=D;z++)B=B.multiply(we.Long.fromNumber(10)),B=B.add(we.Long.fromNumber(A[z]))}else{z=R;for(L=we.Long.fromNumber(A[z++]);z<=D-17;z++)L=L.multiply(we.Long.fromNumber(10)),L=L.add(we.Long.fromNumber(A[z]));for(B=we.Long.fromNumber(A[z++]);z<=D;z++)B=B.multiply(we.Long.fromNumber(10)),B=B.add(we.Long.fromNumber(A[z]))}var J=m(L,we.Long.fromString("100000000000000000"));J.low=J.low.add(B),b(J.low,B)&&(J.high=J.high.add(we.Long.fromNumber(1))),M=P+s;var Q={low:we.Long.fromNumber(0),high:we.Long.fromNumber(0)};J.high.shiftRightUnsigned(49).and(we.Long.fromNumber(1)).equals(we.Long.fromNumber(1))?(Q.high=Q.high.or(we.Long.fromNumber(3).shiftLeft(61)),Q.high=Q.high.or(we.Long.fromNumber(M).and(we.Long.fromNumber(16383).shiftLeft(47))),Q.high=Q.high.or(J.high.and(we.Long.fromNumber(0x7fffffffffff)))):(Q.high=Q.high.or(we.Long.fromNumber(16383&M).shiftLeft(49)),Q.high=Q.high.or(J.high.and(we.Long.fromNumber(562949953421311)))),Q.low=J.low,h&&(Q.high=Q.high.or(we.Long.fromString("9223372036854775808")));var X=I.Buffer.alloc(16);return x=0,X[x++]=255&Q.low.low,X[x++]=Q.low.low>>8&255,X[x++]=Q.low.low>>16&255,X[x++]=Q.low.low>>24&255,X[x++]=255&Q.low.high,X[x++]=Q.low.high>>8&255,X[x++]=Q.low.high>>16&255,X[x++]=Q.low.high>>24&255,X[x++]=255&Q.high.low,X[x++]=Q.high.low>>8&255,X[x++]=Q.high.low>>16&255,X[x++]=Q.high.low>>24&255,X[x++]=255&Q.high.high,X[x++]=Q.high.high>>8&255,X[x++]=Q.high.high>>16&255,X[x++]=Q.high.high>>24&255,new e(X)},e.prototype.toString=function(){for(var e,t=0,n=new Array(36),r=0;r<n.length;r++)n[r]=0;var o,i,a,u=0,c=!1,f={parts:[0,0,0,0]},l=[];u=0;var p=this.bytes,v=p[u++]|p[u++]<<8|p[u++]<<16|p[u++]<<24,m=p[u++]|p[u++]<<8|p[u++]<<16|p[u++]<<24,b=p[u++]|p[u++]<<8|p[u++]<<16|p[u++]<<24,E=p[u++]|p[u++]<<8|p[u++]<<16|p[u++]<<24;u=0;var w={low:new we.Long(v,m),high:new we.Long(b,E)};w.high.lessThan(we.Long.ZERO)&&l.push("-");var S=E>>26&h;if(S>>3===3){if(S===y)return l.join("")+"Infinity";if(S===g)return"NaN";e=E>>15&d,o=8+(E>>14&1)}else o=E>>14&7,e=E>>17&d;var O=e-s;if(f.parts[0]=(16383&E)+((15&o)<<14),f.parts[1]=b,f.parts[2]=m,f.parts[3]=v,0===f.parts[0]&&0===f.parts[1]&&0===f.parts[2]&&0===f.parts[3])c=!0;else for(a=3;a>=0;a--){var A=0,I=_(f);if(f=I.quotient,A=I.rem.low,A)for(i=8;i>=0;i--)n[9*a+i]=A%10,A=Math.floor(A/10)}if(c)t=1,n[u]=0;else{t=36;while(!n[u])t-=1,u+=1}var T=t-1+O;if(T>=34||T<=-7||O>0){if(t>34)return l.push("0"),O>0?l.push("E+"+O):O<0&&l.push("E"+O),l.join("");l.push(""+n[u++]),t-=1,t&&l.push(".");for(r=0;r<t;r++)l.push(""+n[u++]);l.push("E"),T>0?l.push("+"+T):l.push(""+T)}else if(O>=0)for(r=0;r<t;r++)l.push(""+n[u++]);else{var N=t+O;if(N>0)for(r=0;r<N;r++)l.push(""+n[u++]);else l.push("0");l.push(".");while(N++<0)l.push("0");for(r=0;r<t-Math.max(N-1,0);r++)l.push(""+n[u++])}return l.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Decimal128("'+this.toString()+'")'},e}();t.Decimal128=w,Object.defineProperty(w.prototype,"_bsontype",{value:"Decimal128"})}));o(Se),Se.Decimal128;var Oe=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Double=void 0;var n=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-"+this.value.toFixed(1)}:(Number.isInteger(this.value)?(t=this.value.toFixed(1),t.length>=13&&(t=this.value.toExponential(13).toUpperCase())):t=this.value.toString(),{$numberDouble:t});var t},e.fromExtendedJSON=function(t,n){var r=parseFloat(t.$numberDouble);return n&&n.relaxed?r:new e(r)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var e=this.toExtendedJSON();return"new Double("+e.$numberDouble+")"},e}();t.Double=n,Object.defineProperty(n.prototype,"_bsontype",{value:"Double"})}));o(Oe),Oe.Double;var Ae=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Int32=void 0;var n=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}},e.fromExtendedJSON=function(t,n){return n&&n.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Int32("+this.valueOf()+")"},e}();t.Int32=n,Object.defineProperty(n.prototype,"_bsontype",{value:"Int32"})}));o(Ae),Ae.Int32;var Ie=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaxKey=void 0;var n=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$maxKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MaxKey()"},e}();t.MaxKey=n,Object.defineProperty(n.prototype,"_bsontype",{value:"MaxKey"})}));o(Ie),Ie.MaxKey;var Te=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MinKey=void 0;var n=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$minKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MinKey()"},e}();t.MinKey=n,Object.defineProperty(n.prototype,"_bsontype",{value:"MinKey"})}));o(Te),Te.MinKey;var Ne=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectId=void 0;var n=new RegExp("^[0-9a-fA-F]{24}$"),r=null,o=Symbol("id"),i=function(){function e(t){if(!(this instanceof e))return new e(t);if(t instanceof e&&(this[o]=t.id,this.__id=t.__id),"object"===typeof t&&t&&"id"in t&&("toHexString"in t&&"function"===typeof t.toHexString?this[o]=I.Buffer.from(t.toHexString(),"hex"):this[o]="string"===typeof t.id?I.Buffer.from(t.id):t.id),null!=t&&"number"!==typeof t||(this[o]=e.generate("number"===typeof t?t:void 0),e.cacheHexString&&(this.__id=this.id.toString("hex"))),ArrayBuffer.isView(t)&&12===t.byteLength&&(this[o]=ge.ensureBuffer(t)),"string"===typeof t)if(12===t.length){var r=I.Buffer.from(t);12===r.byteLength&&(this[o]=r)}else{if(24!==t.length||!n.test(t))throw new TypeError("Argument passed in must be a Buffer or string of 12 bytes or a string of 24 hex characters");this[o]=I.Buffer.from(t,"hex")}e.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(e.prototype,"id",{get:function(){return this[o]},set:function(t){this[o]=t,e.cacheHexString&&(this.__id=t.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(e){this.id.writeUInt32BE(e,0)},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(){if(e.cacheHexString&&this.__id)return this.__id;var t=this.id.toString("hex");return e.cacheHexString&&!this.__id&&(this.__id=t),t},e.getInc=function(){return e.index=(e.index+1)%16777215},e.generate=function(t){"number"!==typeof t&&(t=~~(Date.now()/1e3));var n=e.getInc(),o=I.Buffer.alloc(12);return o.writeUInt32BE(t,0),null===r&&(r=ye.randomBytes(5)),o[4]=r[0],o[5]=r[1],o[6]=r[2],o[7]=r[3],o[8]=r[4],o[11]=255&n,o[10]=n>>8&255,o[9]=n>>16&255,o},e.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){return void 0!==t&&null!==t&&(t instanceof e?this.toString()===t.toString():"string"===typeof t&&e.isValid(t)&&12===t.length&&ye.isUint8Array(this.id)?t===I.Buffer.prototype.toString.call(this.id,"latin1"):"string"===typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"===typeof t&&e.isValid(t)&&12===t.length?I.Buffer.from(t).equals(this.id):"object"===typeof t&&"toHexString"in t&&"function"===typeof t.toHexString&&t.toHexString()===this.toHexString())},e.prototype.getTimestamp=function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e},e.createPk=function(){return new e},e.createFromTime=function(t){var n=I.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0]);return n.writeUInt32BE(t,0),new e(n)},e.createFromHexString=function(t){if("undefined"===typeof t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new e(I.Buffer.from(t,"hex"))},e.isValid=function(t){return null!=t&&("number"===typeof t||("string"===typeof t?12===t.length||24===t.length&&n.test(t):t instanceof e||(!(!ye.isUint8Array(t)||12!==t.length)||"object"===typeof t&&"toHexString"in t&&"function"===typeof t.toHexString&&("string"===typeof t.id?12===t.id.length:24===t.toHexString().length&&n.test(t.id.toString("hex"))))))},e.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},e.fromExtendedJSON=function(t){return new e(t.$oid)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new ObjectId("'+this.toHexString()+'")'},e.index=~~(16777215*Math.random()),e}();t.ObjectId=i,Object.defineProperty(i.prototype,"generate",{value:ye.deprecate((function(e){return i.generate(e)}),"Please use the static `ObjectId.generate(time)` instead")}),Object.defineProperty(i.prototype,"getInc",{value:ye.deprecate((function(){return i.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(i.prototype,"get_inc",{value:ye.deprecate((function(){return i.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(i,"get_inc",{value:ye.deprecate((function(){return i.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(i.prototype,"_bsontype",{value:"ObjectID"})}));o(Ne),Ne.ObjectId;var Re=i((function(e,t){function n(e){return e.split("").sort().join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.BSONRegExp=void 0;var r=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);this.pattern=t,this.options=null!==r&&void 0!==r?r:"",n(this.options);for(var o=0;o<this.options.length;o++)if("i"!==this.options[o]&&"m"!==this.options[o]&&"x"!==this.options[o]&&"l"!==this.options[o]&&"s"!==this.options[o]&&"u"!==this.options[o])throw new Error("The regular expression option ["+this.options[o]+"] is not supported")}return e.parseOptions=function(e){return e?e.split("").sort().join(""):""},e.prototype.toExtendedJSON=function(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},e.fromExtendedJSON=function(t){if("$regex"in t){if("string"===typeof t.$regex)return new e(t.$regex,e.parseOptions(t.$options));if("BSONRegExp"===t.$regex._bsontype)return t}if("$regularExpression"in t)return new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options));throw new TypeError("Unexpected BSONRegExp EJSON object form: "+JSON.stringify(t))},e}();t.BSONRegExp=r,Object.defineProperty(r.prototype,"_bsontype",{value:"BSONRegExp"})}));o(Re),Re.BSONRegExp;var De=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BSONSymbol=void 0;var n=function(){function e(t){if(!(this instanceof e))return new e(t);this.value=t}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.value},e.prototype.inspect=function(){return'new BSONSymbol("'+this.value+'")'},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(){return{$symbol:this.value}},e.fromExtendedJSON=function(t){return new e(t.$symbol)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e}();t.BSONSymbol=n,Object.defineProperty(n.prototype,"_bsontype",{value:"Symbol"})}));o(De),De.BSONSymbol;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Pe=function(e,t){return Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Pe(e,t)};function Ce(e,t){function n(){this.constructor=e}Pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Le=function(){return Le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Le.apply(this,arguments)};function Be(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function Me(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":babelHelpers["typeof"](Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function xe(e,t){return function(n,r){t(n,r,e)}}function ke(e,t){if("object"===("undefined"===typeof Reflect?"undefined":babelHelpers["typeof"](Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function je(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Ue(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function $e(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function We(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function Fe(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function qe(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}function Ye(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(qe(arguments[t]));return e}function Ve(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function Ge(e){return this instanceof Ge?(this.v=e,this):new Ge(e)}function He(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{u(o[e](t))}catch(n){l(i[0][3],n)}}function u(e){e.value instanceof Ge?Promise.resolve(e.value.v).then(c,f):l(i[0][2],e)}function c(e){s("next",e)}function f(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function Ke(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:Ge(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function ze(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof Fe?Fe(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){t=e[n](t),o(r,i,t.done,t.value)}))}}function o(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}}function Je(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Qe(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function Xe(e){return e&&e.__esModule?e:{default:e}}function Ze(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function et(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}var tt=Object.freeze({__proto__:null,__extends:Ce,get __assign(){return Le},__rest:Be,__decorate:Me,__param:xe,__metadata:ke,__awaiter:je,__generator:Ue,__createBinding:$e,__exportStar:We,__values:Fe,__read:qe,__spread:Ye,__spreadArrays:Ve,__await:Ge,__asyncGenerator:He,__asyncDelegator:Ke,__asyncValues:ze,__makeTemplateObject:Je,__importStar:Qe,__importDefault:Xe,__classPrivateFieldGet:Ze,__classPrivateFieldSet:et}),nt=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=t.LongWithoutOverridesClass=void 0,t.LongWithoutOverridesClass=we.Long;var n=function(e){function t(n,r){var o=this;return o instanceof t?(o=we.Long.isLong(n)?e.call(this,n.low,n.high,!0)||this:e.call(this,n,r,!0)||this,Object.defineProperty(o,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),o):new t(n,r)}return tt.__extends(t,e),t.prototype.toJSON=function(){return{$timestamp:this.toString()}},t.fromInt=function(e){return new t(we.Long.fromInt(e,!0))},t.fromNumber=function(e){return new t(we.Long.fromNumber(e,!0))},t.fromBits=function(e,n){return new t(e,n)},t.fromString=function(e,n){return new t(we.Long.fromString(e,!0,n))},t.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},t.fromExtendedJSON=function(e){return new t(e.$timestamp.i,e.$timestamp.t)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Timestamp("+this.getLowBits().toString()+", "+this.getHighBits().toString()+")"},t.MAX_VALUE=we.Long.MAX_UNSIGNED_VALUE,t}(t.LongWithoutOverridesClass);t.Timestamp=n}));o(nt),nt.Timestamp,nt.LongWithoutOverridesClass;var rt=i((function(e,t){function n(e){return ye.isObjectLike(e)&&Reflect.has(e,"_bsontype")&&"string"===typeof e._bsontype}Object.defineProperty(t,"__esModule",{value:!0}),t.EJSON=t.isBSONType=void 0,t.isBSONType=n;var r=2147483647,o=-2147483648,i=0x8000000000000000,a=-0x8000000000000000,s={$oid:Ne.ObjectId,$binary:me.Binary,$uuid:me.Binary,$symbol:De.BSONSymbol,$numberInt:Ae.Int32,$numberDecimal:Se.Decimal128,$numberDouble:Oe.Double,$numberLong:we.Long,$minKey:Te.MinKey,$maxKey:Ie.MaxKey,$regex:Re.BSONRegExp,$regularExpression:Re.BSONRegExp,$timestamp:nt.Timestamp};function u(e,t){if(void 0===t&&(t={}),"number"===typeof e){if(t.relaxed||t.legacy)return e;if(Math.floor(e)===e){if(e>=o&&e<=r)return new Ae.Int32(e);if(e>=a&&e<=i)return we.Long.fromNumber(e)}return new Oe.Double(e)}if(null==e||"object"!==typeof e)return e;if(e.$undefined)return null;for(var n=Object.keys(e).filter((function(t){return t.startsWith("$")&&null!=e[t]})),c=0;c<n.length;c++){var f=s[n[c]];if(f)return f.fromExtendedJSON(e,t)}if(null!=e.$date){var l=e.$date,p=new Date;return t.legacy?"number"===typeof l?p.setTime(l):"string"===typeof l&&p.setTime(Date.parse(l)):"string"===typeof l?p.setTime(Date.parse(l)):we.Long.isLong(l)?p.setTime(l.toNumber()):"number"===typeof l&&t.relaxed&&p.setTime(l),p}if(null!=e.$code){var h=Object.assign({},e);return e.$scope&&(h.$scope=u(e.$scope)),be.Code.fromExtendedJSON(e)}if(null!=e.$ref||null!=e.$dbPointer){var d=e.$ref?e:e.$dbPointer;if(d instanceof Ee.DBRef)return d;var y=Object.keys(d).filter((function(e){return e.startsWith("$")})),g=!0;if(y.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(g=!1)})),g)return Ee.DBRef.fromExtendedJSON(d)}return e}function c(e,t){return e.map((function(e,n){t.seenObjects.push({propertyName:"index "+n,obj:null});try{return l(e,t)}finally{t.seenObjects.pop()}}))}function f(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function l(e,t){if(("object"===typeof e||"function"===typeof e)&&null!==e){var n=t.seenObjects.findIndex((function(t){return t.obj===e}));if(-1!==n){var s=t.seenObjects.map((function(e){return e.propertyName})),u=s.slice(0,n).map((function(e){return e+" -> "})).join(""),l=s[n],p=" -> "+s.slice(n+1,s.length-1).map((function(e){return e+" -> "})).join(""),d=s[s.length-1],y=" ".repeat(u.length+l.length/2),g="-".repeat(p.length+(l.length+d.length)/2-1);throw new TypeError("Converting circular structure to EJSON:\n    "+u+l+p+d+"\n    "+y+"\\"+g+"/")}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return c(e,t);if(void 0===e)return null;if(e instanceof Date||ye.isDate(e)){var v=e.getTime(),_=v>-1&&v<2534023188e5;return t.legacy?t.relaxed&&_?{$date:e.getTime()}:{$date:f(e)}:t.relaxed&&_?{$date:f(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"===typeof e&&!t.relaxed){if(Math.floor(e)===e){var m=e>=o&&e<=r,b=e>=a&&e<=i;if(m)return{$numberInt:e.toString()};if(b)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp||ye.isRegExp(e)){var E=e.flags;if(void 0===E){var w=e.toString().match(/[gimuy]*$/);w&&(E=w[0])}var S=new Re.BSONRegExp(e.source,E);return S.toExtendedJSON(t)}return null!=e&&"object"===typeof e?h(e,t):e}var p={Binary:function(e){return new me.Binary(e.value(),e.sub_type)},Code:function(e){return new be.Code(e.code,e.scope)},DBRef:function(e){return new Ee.DBRef(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new Se.Decimal128(e.bytes)},Double:function(e){return new Oe.Double(e.value)},Int32:function(e){return new Ae.Int32(e.value)},Long:function(e){return we.Long.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new Ie.MaxKey},MinKey:function(){return new Te.MinKey},ObjectID:function(e){return new Ne.ObjectId(e)},ObjectId:function(e){return new Ne.ObjectId(e)},BSONRegExp:function(e){return new Re.BSONRegExp(e.pattern,e.options)},Symbol:function(e){return new De.BSONSymbol(e.value)},Timestamp:function(e){return nt.Timestamp.fromBits(e.low,e.high)}};function h(e,t){if(null==e||"object"!==typeof e)throw new Error("not an object instance");var r=e._bsontype;if("undefined"===typeof r){var o={};for(var i in e){t.seenObjects.push({propertyName:i,obj:null});try{o[i]=l(e[i],t)}finally{t.seenObjects.pop()}}return o}if(n(e)){var a=e;if("function"!==typeof a.toExtendedJSON){var s=p[e._bsontype];if(!s)throw new TypeError("Unrecognized or invalid _bsontype: "+e._bsontype);a=s(a)}return"Code"===r&&a.scope?a=new be.Code(a.code,l(a.scope,t)):"DBRef"===r&&a.oid&&(a=new Ee.DBRef(a.collection,l(a.oid,t),a.db,a.fields)),a.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+typeof r)}(function(e){function t(e,t){var n=Object.assign({},{relaxed:!0,legacy:!1},t);return"boolean"===typeof n.relaxed&&(n.strict=!n.relaxed),"boolean"===typeof n.strict&&(n.relaxed=!n.strict),JSON.parse(e,(function(e,t){return u(t,n)}))}function n(e,t,n,r){null!=n&&"object"===typeof n&&(r=n,n=0),null==t||"object"!==typeof t||Array.isArray(t)||(r=t,t=void 0,n=0);var o=Object.assign({relaxed:!0,legacy:!1},r,{seenObjects:[{propertyName:"(root)",obj:null}]}),i=l(e,o);return JSON.stringify(i,t,n)}function r(e,t){return t=t||{},JSON.parse(n(e,t))}function o(e,n){return n=n||{},t(JSON.stringify(e),n)}e.parse=t,e.stringify=n,e.serialize=r,e.deserialize=o})(t.EJSON||(t.EJSON={}))}));o(rt),rt.EJSON,rt.isBSONType;var ot=i((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Map=void 0,t.Map=n;var o=function(e){return e&&e.Math==Math&&e};function i(){return o("object"===typeof globalThis&&globalThis)||o("object"===typeof window&&window)||o("object"===typeof self&&self)||o("object"===typeof r&&r)||Function("return this")()}var a=i();Object.prototype.hasOwnProperty.call(a,"Map")?t.Map=n=a.Map:t.Map=n=function(){function e(e){void 0===e&&(e=[]),this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var n=e[t],r=n[0],o=n[1];this._keys.push(r),this._values[r]={v:o,i:this._keys.length-1}}}return e.prototype.clear=function(){this._keys=[],this._values={}},e.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},e.prototype.entries=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:void 0!==n?[n,e._values[n].v]:void 0,done:void 0===n}}}},e.prototype.forEach=function(e,t){t=t||this;for(var n=0;n<this._keys.length;n++){var r=this._keys[n];e.call(t,this._values[r].v,r,t)}},e.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},e.prototype.has=function(e){return null!=this._values[e]},e.prototype.keys=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:void 0!==n?n:void 0,done:void 0===n}}}},e.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},e.prototype.values=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:void 0!==n?e._values[n].v:void 0,done:void 0===n}}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),e}()}));o(ot),ot.Map;var it=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BSON_BINARY_SUBTYPE_USER_DEFINED=t.BSON_BINARY_SUBTYPE_MD5=t.BSON_BINARY_SUBTYPE_UUID_NEW=t.BSON_BINARY_SUBTYPE_UUID=t.BSON_BINARY_SUBTYPE_BYTE_ARRAY=t.BSON_BINARY_SUBTYPE_FUNCTION=t.BSON_BINARY_SUBTYPE_DEFAULT=t.BSON_DATA_MAX_KEY=t.BSON_DATA_MIN_KEY=t.BSON_DATA_DECIMAL128=t.BSON_DATA_LONG=t.BSON_DATA_TIMESTAMP=t.BSON_DATA_INT=t.BSON_DATA_CODE_W_SCOPE=t.BSON_DATA_SYMBOL=t.BSON_DATA_CODE=t.BSON_DATA_DBPOINTER=t.BSON_DATA_REGEXP=t.BSON_DATA_NULL=t.BSON_DATA_DATE=t.BSON_DATA_BOOLEAN=t.BSON_DATA_OID=t.BSON_DATA_UNDEFINED=t.BSON_DATA_BINARY=t.BSON_DATA_ARRAY=t.BSON_DATA_OBJECT=t.BSON_DATA_STRING=t.BSON_DATA_NUMBER=t.JS_INT_MIN=t.JS_INT_MAX=t.BSON_INT64_MIN=t.BSON_INT64_MAX=t.BSON_INT32_MIN=t.BSON_INT32_MAX=void 0,t.BSON_INT32_MAX=2147483647,t.BSON_INT32_MIN=-2147483648,t.BSON_INT64_MAX=Math.pow(2,63)-1,t.BSON_INT64_MIN=-Math.pow(2,63),t.JS_INT_MAX=Math.pow(2,53),t.JS_INT_MIN=-Math.pow(2,53),t.BSON_DATA_NUMBER=1,t.BSON_DATA_STRING=2,t.BSON_DATA_OBJECT=3,t.BSON_DATA_ARRAY=4,t.BSON_DATA_BINARY=5,t.BSON_DATA_UNDEFINED=6,t.BSON_DATA_OID=7,t.BSON_DATA_BOOLEAN=8,t.BSON_DATA_DATE=9,t.BSON_DATA_NULL=10,t.BSON_DATA_REGEXP=11,t.BSON_DATA_DBPOINTER=12,t.BSON_DATA_CODE=13,t.BSON_DATA_SYMBOL=14,t.BSON_DATA_CODE_W_SCOPE=15,t.BSON_DATA_INT=16,t.BSON_DATA_TIMESTAMP=17,t.BSON_DATA_LONG=18,t.BSON_DATA_DECIMAL128=19,t.BSON_DATA_MIN_KEY=255,t.BSON_DATA_MAX_KEY=127,t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BSON_BINARY_SUBTYPE_FUNCTION=1,t.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,t.BSON_BINARY_SUBTYPE_UUID=3,t.BSON_BINARY_SUBTYPE_UUID_NEW=4,t.BSON_BINARY_SUBTYPE_MD5=5,t.BSON_BINARY_SUBTYPE_USER_DEFINED=128}));o(it),it.BSON_BINARY_SUBTYPE_USER_DEFINED,it.BSON_BINARY_SUBTYPE_MD5,it.BSON_BINARY_SUBTYPE_UUID_NEW,it.BSON_BINARY_SUBTYPE_UUID,it.BSON_BINARY_SUBTYPE_BYTE_ARRAY,it.BSON_BINARY_SUBTYPE_FUNCTION,it.BSON_BINARY_SUBTYPE_DEFAULT,it.BSON_DATA_MAX_KEY,it.BSON_DATA_MIN_KEY,it.BSON_DATA_DECIMAL128,it.BSON_DATA_LONG,it.BSON_DATA_TIMESTAMP,it.BSON_DATA_INT,it.BSON_DATA_CODE_W_SCOPE,it.BSON_DATA_SYMBOL,it.BSON_DATA_CODE,it.BSON_DATA_DBPOINTER,it.BSON_DATA_REGEXP,it.BSON_DATA_NULL,it.BSON_DATA_DATE,it.BSON_DATA_BOOLEAN,it.BSON_DATA_OID,it.BSON_DATA_UNDEFINED,it.BSON_DATA_BINARY,it.BSON_DATA_ARRAY,it.BSON_DATA_OBJECT,it.BSON_DATA_STRING,it.BSON_DATA_NUMBER,it.JS_INT_MIN,it.JS_INT_MAX,it.BSON_INT64_MIN,it.BSON_INT64_MAX,it.BSON_INT32_MIN,it.BSON_INT32_MAX;var at=i((function(e,t){function n(e,t,n){var o=5;if(Array.isArray(e))for(var i=0;i<e.length;i++)o+=r(i.toString(),e[i],t,!0,n);else for(var a in e.toBSON&&(e=e.toBSON()),e)o+=r(a,e[a],t,!1,n);return o}function r(e,t,r,o,i){switch(void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=!1),t&&t.toBSON&&(t=t.toBSON()),typeof t){case"string":return 1+I.Buffer.byteLength(e,"utf8")+1+4+I.Buffer.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=it.JS_INT_MIN&&t<=it.JS_INT_MAX&&t>=it.BSON_INT32_MIN&&t<=it.BSON_INT32_MAX?(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+5:(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+9;case"undefined":return o||!i?(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+2;case"object":if(null==t||"MinKey"===t["_bsontype"]||"MaxKey"===t["_bsontype"])return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1;if("ObjectId"===t["_bsontype"]||"ObjectID"===t["_bsontype"])return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||ye.isDate(t))return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+9;if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer||ye.isAnyArrayBuffer(t))return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+6+t.byteLength;if("Long"===t["_bsontype"]||"Double"===t["_bsontype"]||"Timestamp"===t["_bsontype"])return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+9;if("Decimal128"===t["_bsontype"])return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+17;if("Code"===t["_bsontype"])return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1+4+4+I.Buffer.byteLength(t.code.toString(),"utf8")+1+n(t.scope,r,i):(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1+4+I.Buffer.byteLength(t.code.toString(),"utf8")+1;if("Binary"===t["_bsontype"])return t.sub_type===me.Binary.SUBTYPE_BYTE_ARRAY?(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if("Symbol"===t["_bsontype"])return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+I.Buffer.byteLength(t.value,"utf8")+4+1+1;if("DBRef"===t["_bsontype"]){var a=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(a["$db"]=t.db),(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1+n(a,r,i)}return t instanceof RegExp||ye.isRegExp(t)?(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1+I.Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:"BSONRegExp"===t["_bsontype"]?(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1+I.Buffer.byteLength(t.pattern,"utf8")+1+I.Buffer.byteLength(t.options,"utf8")+1:(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+n(t,r,i)+1;case"function":if(t instanceof RegExp||ye.isRegExp(t)||"[object RegExp]"===String.call(t))return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1+I.Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(r&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1+4+4+I.Buffer.byteLength(ye.normalizedFunctionString(t),"utf8")+1+n(t.scope,r,i);if(r)return(null!=e?I.Buffer.byteLength(e,"utf8")+1:0)+1+4+I.Buffer.byteLength(ye.normalizedFunctionString(t),"utf8")+1}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateObjectSize=void 0,t.calculateObjectSize=n}));o(at),at.calculateObjectSize;var st=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateUtf8=void 0;var n=128,r=192,o=224,i=240,a=248,s=192,u=224,c=240,f=128;function l(e,t,l){for(var p=0,h=t;h<l;h+=1){var d=e[h];if(p){if((d&r)!==f)return!1;p-=1}else if(d&n)if((d&o)===s)p=1;else if((d&i)===u)p=2;else{if((d&a)!==c)return!1;p=3}}return!p}t.validateUtf8=l}));o(st),st.validateUtf8;var ut=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=void 0;var n=we.Long.fromNumber(it.JS_INT_MAX),r=we.Long.fromNumber(it.JS_INT_MIN),o={};function i(e,t,n){t=null==t?{}:t;var r=t&&t.index?t.index:0,o=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;if(o<5)throw new Error("bson size must be >= 5, is "+o);if(t.allowObjectSmallerThanBufferSize&&e.length<o)throw new Error("buffer length "+e.length+" must be >= bson size "+o);if(!t.allowObjectSmallerThanBufferSize&&e.length!==o)throw new Error("buffer length "+e.length+" must === bson size "+o);if(o+r>e.byteLength)throw new Error("(bson size "+o+" + options.index "+r+" must be <= buffer length "+e.byteLength+")");if(0!==e[r+o-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return a(e,r,t,n)}function a(e,t,i,u){void 0===u&&(u=!1);var c=null!=i["evalFunctions"]&&i["evalFunctions"],f=null!=i["cacheFunctions"]&&i["cacheFunctions"],l=null==i["fieldsAsRaw"]?null:i["fieldsAsRaw"],p=null!=i["raw"]&&i["raw"],h="boolean"===typeof i["bsonRegExp"]&&i["bsonRegExp"],d=null!=i["promoteBuffers"]&&i["promoteBuffers"],y=null==i["promoteLongs"]||i["promoteLongs"],g=null==i["promoteValues"]||i["promoteValues"],v=t;if(e.length<5)throw new Error("corrupt bson message < 5 bytes long");var _=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(_<5||_>e.length)throw new Error("corrupt bson message");var m=u?[]:{},b=0,E=!1;while(!E){var w=e[t++];if(0===w)break;var S=t;while(0!==e[S]&&S<e.length)S++;if(S>=e.byteLength)throw new Error("Bad BSON Document: illegal CString");var O=u?b++:e.toString("utf8",t,S),A=void 0;if(t=S+1,w===it.BSON_DATA_STRING){var T=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(T<=0||T>e.length-t||0!==e[t+T-1])throw new Error("bad string length in bson");if(!st.validateUtf8(e,t,t+T-1))throw new Error("Invalid UTF-8 string in BSON document");A=e.toString("utf8",t,t+T-1),t+=T}else if(w===it.BSON_DATA_OID){var N=I.Buffer.alloc(12);e.copy(N,0,t,t+12),A=new Ne.ObjectId(N),t+=12}else if(w===it.BSON_DATA_INT&&!1===g)A=new Ae.Int32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(w===it.BSON_DATA_INT)A=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(w===it.BSON_DATA_NUMBER&&!1===g)A=new Oe.Double(e.readDoubleLE(t)),t+=8;else if(w===it.BSON_DATA_NUMBER)A=e.readDoubleLE(t),t+=8;else if(w===it.BSON_DATA_DATE){var R=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,D=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;A=new Date(new we.Long(R,D).toNumber())}else if(w===it.BSON_DATA_BOOLEAN){if(0!==e[t]&&1!==e[t])throw new Error("illegal boolean type value");A=1===e[t++]}else if(w===it.BSON_DATA_OBJECT){var P=t,C=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(C<=0||C>e.length-t)throw new Error("bad embedded document length in bson");A=p?e.slice(t,t+C):a(e,P,i,!1),t+=C}else if(w===it.BSON_DATA_ARRAY){P=t,C=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;var L=i,B=t+C;if(l&&l[O]){for(var M in L={},i)L[M]=i[M];L["raw"]=!0}if(A=a(e,P,L,!0),t+=C,0!==e[t-1])throw new Error("invalid array terminator byte");if(t!==B)throw new Error("corrupted array bson")}else if(w===it.BSON_DATA_UNDEFINED)A=void 0;else if(w===it.BSON_DATA_NULL)A=null;else if(w===it.BSON_DATA_LONG){R=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,D=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var x=new we.Long(R,D);A=y&&!0===g&&x.lessThanOrEqual(n)&&x.greaterThanOrEqual(r)?x.toNumber():x}else if(w===it.BSON_DATA_DECIMAL128){var k=I.Buffer.alloc(16);e.copy(k,0,t,t+16),t+=16;var j=new Se.Decimal128(k);A="toObject"in j&&"function"===typeof j.toObject?j.toObject():j}else if(w===it.BSON_DATA_BINARY){var U=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,$=U,W=e[t++];if(U<0)throw new Error("Negative binary type element size found");if(U>e.byteLength)throw new Error("Binary type size larger than document size");if(null!=e["slice"]){if(W===me.Binary.SUBTYPE_BYTE_ARRAY){if(U=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,U<0)throw new Error("Negative binary type element size found for subtype 0x02");if(U>$-4)throw new Error("Binary type with subtype 0x02 contains too long binary size");if(U<$-4)throw new Error("Binary type with subtype 0x02 contains too short binary size")}A=d&&g?e.slice(t,t+U):new me.Binary(e.slice(t,t+U),W)}else{var F=I.Buffer.alloc(U);if(W===me.Binary.SUBTYPE_BYTE_ARRAY){if(U=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,U<0)throw new Error("Negative binary type element size found for subtype 0x02");if(U>$-4)throw new Error("Binary type with subtype 0x02 contains too long binary size");if(U<$-4)throw new Error("Binary type with subtype 0x02 contains too short binary size")}for(S=0;S<U;S++)F[S]=e[t+S];A=d&&g?F:new me.Binary(F,W)}t+=U}else if(w===it.BSON_DATA_REGEXP&&!1===h){S=t;while(0!==e[S]&&S<e.length)S++;if(S>=e.length)throw new Error("Bad BSON Document: illegal CString");var q=e.toString("utf8",t,S);t=S+1,S=t;while(0!==e[S]&&S<e.length)S++;if(S>=e.length)throw new Error("Bad BSON Document: illegal CString");var Y=e.toString("utf8",t,S);t=S+1;var V=new Array(Y.length);for(S=0;S<Y.length;S++)switch(Y[S]){case"m":V[S]="m";break;case"s":V[S]="g";break;case"i":V[S]="i";break}A=new RegExp(q,V.join(""))}else if(w===it.BSON_DATA_REGEXP&&!0===h){S=t;while(0!==e[S]&&S<e.length)S++;if(S>=e.length)throw new Error("Bad BSON Document: illegal CString");q=e.toString("utf8",t,S);t=S+1,S=t;while(0!==e[S]&&S<e.length)S++;if(S>=e.length)throw new Error("Bad BSON Document: illegal CString");Y=e.toString("utf8",t,S);t=S+1,A=new Re.BSONRegExp(q,Y)}else if(w===it.BSON_DATA_SYMBOL){T=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(T<=0||T>e.length-t||0!==e[t+T-1])throw new Error("bad string length in bson");var G=e.toString("utf8",t,t+T-1);A=g?G:new De.BSONSymbol(G),t+=T}else if(w===it.BSON_DATA_TIMESTAMP){R=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,D=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;A=new nt.Timestamp(R,D)}else if(w===it.BSON_DATA_MIN_KEY)A=new Te.MinKey;else if(w===it.BSON_DATA_MAX_KEY)A=new Ie.MaxKey;else if(w===it.BSON_DATA_CODE){T=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(T<=0||T>e.length-t||0!==e[t+T-1])throw new Error("bad string length in bson");var H=e.toString("utf8",t,t+T-1);A=c?f?s(H,o,m):s(H):new be.Code(H),t+=T}else if(w===it.BSON_DATA_CODE_W_SCOPE){var K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(K<13)throw new Error("code_w_scope total size shorter minimum expected length");T=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(T<=0||T>e.length-t||0!==e[t+T-1])throw new Error("bad string length in bson");H=e.toString("utf8",t,t+T-1);t+=T;P=t,C=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;var z=a(e,P,i,!1);if(t+=C,K<8+C+T)throw new Error("code_w_scope total size is too short, truncating scope");if(K>8+C+T)throw new Error("code_w_scope total size is too long, clips outer document");c?(A=f?s(H,o,m):s(H),A.scope=z):A=new be.Code(H,z)}else{if(w!==it.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+w.toString(16)+' for fieldname "'+O+'"');T=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(T<=0||T>e.length-t||0!==e[t+T-1])throw new Error("bad string length in bson");if(!st.validateUtf8(e,t,t+T-1))throw new Error("Invalid UTF-8 string in BSON document");var J=e.toString("utf8",t,t+T-1);t+=T;var Q=I.Buffer.alloc(12);e.copy(Q,0,t,t+12);N=new Ne.ObjectId(Q);t+=12,A=new Ee.DBRef(J,N)}"__proto__"===O?Object.defineProperty(m,O,{value:A,writable:!0,enumerable:!0,configurable:!0}):m[O]=A}if(_!==t-v){if(u)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var X=Object.keys(m).filter((function(e){return e.startsWith("$")})),Z=!0;if(X.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(Z=!1)})),!Z)return m;if(Ee.isDBRefLike(m)){var ee=Object.assign({},m);return delete ee.$ref,delete ee.$id,delete ee.$db,new Ee.DBRef(m.$ref,m.$id,m.$db,ee)}return m}function s(e,t,n){return t?(null==t[e]&&(t[e]=new Function(e)),t[e].bind(n)):new Function(e)}t.deserialize=i}));o(ut),ut.deserialize;var ct=i((function(e,t){function n(e,t,n,r,o){var i,a,s="big"===n,u=8*o-r-1,c=(1<<u)-1,f=c>>1,l=-7,p=s?0:o-1,h=s?1:-1,d=e[t+p];for(p+=h,i=d&(1<<-l)-1,d>>=-l,l+=u;l>0;i=256*i+e[t+p],p+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+p],p+=h,l-=8);if(0===i)i=1-f;else{if(i===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),i-=f}return(d?-1:1)*a*Math.pow(2,i-r)}function r(e,t,n,r,o,i){var a,s,u,c="big"===r,f=8*i-o-1,l=(1<<f)-1,p=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=c?i-1:0,y=c?-1:1,g=t<0||0===t&&1/t<0?1:0;t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+p>=1?h/u:h*Math.pow(2,1-p),t*u>=2&&(a++,u/=2),a+p>=l?(s=0,a=l):a+p>=1?(s=(t*u-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0)),isNaN(t)&&(s=0);while(o>=8)e[n+d]=255&s,d+=y,s/=256,o-=8;a=a<<o|s,isNaN(t)&&(a+=8),f+=o;while(f>0)e[n+d]=255&a,d+=y,a/=256,f-=8;e[n+d-y]|=128*g}Object.defineProperty(t,"__esModule",{value:!0}),t.writeIEEE754=t.readIEEE754=void 0,t.readIEEE754=n,t.writeIEEE754=r}));o(ct),ct.writeIEEE754,ct.readIEEE754;var ft=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeInto=void 0;var n=/\x00/,r=new Set(["$db","$ref","$id","$clusterTime"]);function o(e,t,n,r,o){e[r++]=it.BSON_DATA_STRING;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r=r+i+1,e[r-1]=0;var a=e.write(n,r+4,void 0,"utf8");return e[r+3]=a+1>>24&255,e[r+2]=a+1>>16&255,e[r+1]=a+1>>8&255,e[r]=a+1&255,r=r+4+a,e[r++]=0,r}function i(e,t,n,r,o){if(Number.isInteger(n)&&n>=it.BSON_INT32_MIN&&n<=it.BSON_INT32_MAX){e[r++]=it.BSON_DATA_INT;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=i,e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255}else{e[r++]=it.BSON_DATA_NUMBER;i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=i,e[r++]=0,ct.writeIEEE754(e,n,r,"little",52,8),r+=8}return r}function a(e,t,n,r,o){e[r++]=it.BSON_DATA_NULL;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");return r+=i,e[r++]=0,r}function s(e,t,n,r,o){e[r++]=it.BSON_DATA_BOOLEAN;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");return r+=i,e[r++]=0,e[r++]=n?1:0,r}function u(e,t,n,r,o){e[r++]=it.BSON_DATA_DATE;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=i,e[r++]=0;var a=we.Long.fromNumber(n.getTime()),s=a.getLowBits(),u=a.getHighBits();return e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,e[r++]=255&u,e[r++]=u>>8&255,e[r++]=u>>16&255,e[r++]=u>>24&255,r}function c(e,t,r,o,i){e[o++]=it.BSON_DATA_REGEXP;var a=i?e.write(t,o,void 0,"ascii"):e.write(t,o,void 0,"utf8");if(o+=a,e[o++]=0,r.source&&null!=r.source.match(n))throw Error("value "+r.source+" must not contain null bytes");return o+=e.write(r.source,o,void 0,"utf8"),e[o++]=0,r.ignoreCase&&(e[o++]=105),r.global&&(e[o++]=115),r.multiline&&(e[o++]=109),e[o++]=0,o}function f(e,t,r,o,i){e[o++]=it.BSON_DATA_REGEXP;var a=i?e.write(t,o,void 0,"ascii"):e.write(t,o,void 0,"utf8");if(o+=a,e[o++]=0,null!=r.pattern.match(n))throw Error("pattern "+r.pattern+" must not contain null bytes");return o+=e.write(r.pattern,o,void 0,"utf8"),e[o++]=0,o+=e.write(r.options.split("").sort().join(""),o,void 0,"utf8"),e[o++]=0,o}function l(e,t,n,r,o){null===n?e[r++]=it.BSON_DATA_NULL:"MinKey"===n._bsontype?e[r++]=it.BSON_DATA_MIN_KEY:e[r++]=it.BSON_DATA_MAX_KEY;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");return r+=i,e[r++]=0,r}function p(e,t,n,r,o){e[r++]=it.BSON_DATA_OID;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");if(r+=i,e[r++]=0,"string"===typeof n.id)e.write(n.id,r,void 0,"binary");else{if(!n.id||!n.id.copy)throw new TypeError("object ["+JSON.stringify(n)+"] is not a valid ObjectId");n.id.copy(e,r,0,12)}return r+12}function h(e,t,n,r,o){e[r++]=it.BSON_DATA_BINARY;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=i,e[r++]=0;var a=n.length;return e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=it.BSON_BINARY_SUBTYPE_DEFAULT,e.set(ge.ensureBuffer(n),r),r+=a,r}function d(e,t,n,r,o,i,a,s,u,c){void 0===o&&(o=!1),void 0===i&&(i=0),void 0===a&&(a=!1),void 0===s&&(s=!0),void 0===u&&(u=!1),void 0===c&&(c=[]);for(var f=0;f<c.length;f++)if(c[f]===n)throw new Error("cyclic dependency detected");c.push(n),e[r++]=Array.isArray(n)?it.BSON_DATA_ARRAY:it.BSON_DATA_OBJECT;var l=u?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=l,e[r++]=0;var p=O(e,n,o,r,i+1,a,s,c);return c.pop(),p}function y(e,t,n,r,o){e[r++]=it.BSON_DATA_DECIMAL128;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");return r+=i,e[r++]=0,n.bytes.copy(e,r,0,16),r+16}function g(e,t,n,r,o){e[r++]="Long"===n._bsontype?it.BSON_DATA_LONG:it.BSON_DATA_TIMESTAMP;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=i,e[r++]=0;var a=n.getLowBits(),s=n.getHighBits();return e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,r}function v(e,t,n,r,o){n=n.valueOf(),e[r++]=it.BSON_DATA_INT;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");return r+=i,e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255,r}function _(e,t,n,r,o){e[r++]=it.BSON_DATA_NUMBER;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");return r+=i,e[r++]=0,ct.writeIEEE754(e,n.value,r,"little",52,8),r+=8,r}function m(e,t,n,r,o,i,a){e[r++]=it.BSON_DATA_CODE;var s=a?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=s,e[r++]=0;var u=ye.normalizedFunctionString(n),c=e.write(u,r+4,void 0,"utf8")+1;return e[r]=255&c,e[r+1]=c>>8&255,e[r+2]=c>>16&255,e[r+3]=c>>24&255,r=r+4+c-1,e[r++]=0,r}function b(e,t,n,r,o,i,a,s,u){if(void 0===o&&(o=!1),void 0===i&&(i=0),void 0===a&&(a=!1),void 0===s&&(s=!0),void 0===u&&(u=!1),n.scope&&"object"===typeof n.scope){e[r++]=it.BSON_DATA_CODE_W_SCOPE;var c=u?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=c,e[r++]=0;var f=r,l="string"===typeof n.code?n.code:n.code.toString();r+=4;var p=e.write(l,r+4,void 0,"utf8")+1;e[r]=255&p,e[r+1]=p>>8&255,e[r+2]=p>>16&255,e[r+3]=p>>24&255,e[r+4+p-1]=0,r=r+p+4;var h=O(e,n.scope,o,r,i+1,a,s);r=h-1;var d=h-f;e[f++]=255&d,e[f++]=d>>8&255,e[f++]=d>>16&255,e[f++]=d>>24&255,e[r++]=0}else{e[r++]=it.BSON_DATA_CODE;c=u?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=c,e[r++]=0;l=n.code.toString();var y=e.write(l,r+4,void 0,"utf8")+1;e[r]=255&y,e[r+1]=y>>8&255,e[r+2]=y>>16&255,e[r+3]=y>>24&255,r=r+4+y-1,e[r++]=0}return r}function E(e,t,n,r,o){e[r++]=it.BSON_DATA_BINARY;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=i,e[r++]=0;var a=n.value(!0),s=n.position;return n.sub_type===me.Binary.SUBTYPE_BYTE_ARRAY&&(s+=4),e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,e[r++]=n.sub_type,n.sub_type===me.Binary.SUBTYPE_BYTE_ARRAY&&(s-=4,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255),e.set(a,r),r+=n.position,r}function w(e,t,n,r,o){e[r++]=it.BSON_DATA_SYMBOL;var i=o?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=i,e[r++]=0;var a=e.write(n.value,r+4,void 0,"utf8")+1;return e[r]=255&a,e[r+1]=a>>8&255,e[r+2]=a>>16&255,e[r+3]=a>>24&255,r=r+4+a-1,e[r++]=0,r}function S(e,t,n,r,o,i,a){e[r++]=it.BSON_DATA_OBJECT;var s=a?e.write(t,r,void 0,"ascii"):e.write(t,r,void 0,"utf8");r+=s,e[r++]=0;var u=r,c={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(c.$db=n.db),c=Object.assign(c,n.fields);var f=O(e,c,!1,r,o+1,i),l=f-u;return e[u++]=255&l,e[u++]=l>>8&255,e[u++]=l>>16&255,e[u++]=l>>24&255,f}function O(e,t,O,A,I,T,N,R){void 0===O&&(O=!1),void 0===A&&(A=0),void 0===I&&(I=0),void 0===T&&(T=!1),void 0===N&&(N=!0),void 0===R&&(R=[]),A=A||0,R=R||[],R.push(t);var D=A+4;if(Array.isArray(t))for(var P=0;P<t.length;P++){var C=""+P,L=t[P];if(L&&L.toBSON){if("function"!==typeof L.toBSON)throw new TypeError("toBSON is not a function");L=L.toBSON()}if("string"===typeof L)D=o(e,C,L,D,!0);else if("number"===typeof L)D=i(e,C,L,D,!0);else{if("bigint"===typeof L)throw new TypeError("Unsupported type BigInt, please use Decimal128");if("boolean"===typeof L)D=s(e,C,L,D,!0);else if(L instanceof Date||ye.isDate(L))D=u(e,C,L,D,!0);else if(void 0===L)D=a(e,C,L,D,!0);else if(null===L)D=a(e,C,L,D,!0);else if("ObjectId"===L["_bsontype"]||"ObjectID"===L["_bsontype"])D=p(e,C,L,D,!0);else if(ye.isUint8Array(L))D=h(e,C,L,D,!0);else if(L instanceof RegExp||ye.isRegExp(L))D=c(e,C,L,D,!0);else if("object"===typeof L&&null==L["_bsontype"])D=d(e,C,L,D,O,I,T,N,!0,R);else if("object"===typeof L&&rt.isBSONType(L)&&"Decimal128"===L._bsontype)D=y(e,C,L,D,!0);else if("Long"===L["_bsontype"]||"Timestamp"===L["_bsontype"])D=g(e,C,L,D,!0);else if("Double"===L["_bsontype"])D=_(e,C,L,D,!0);else if("function"===typeof L&&T)D=m(e,C,L,D,O,I,!0);else if("Code"===L["_bsontype"])D=b(e,C,L,D,O,I,T,N,!0);else if("Binary"===L["_bsontype"])D=E(e,C,L,D,!0);else if("Symbol"===L["_bsontype"])D=w(e,C,L,D,!0);else if("DBRef"===L["_bsontype"])D=S(e,C,L,D,I,T,!0);else if("BSONRegExp"===L["_bsontype"])D=f(e,C,L,D,!0);else if("Int32"===L["_bsontype"])D=v(e,C,L,D,!0);else if("MinKey"===L["_bsontype"]||"MaxKey"===L["_bsontype"])D=l(e,C,L,D,!0);else if("undefined"!==typeof L["_bsontype"])throw new TypeError("Unrecognized or invalid _bsontype: "+L["_bsontype"])}}else if(t instanceof ot.Map||ye.isMap(t)){var B=t.entries(),M=!1;while(!M){var x=B.next();if(M=!!x.done,!M){C=x.value[0],L=x.value[1];var k=typeof L;if("string"===typeof C&&!r.has(C)){if(null!=C.match(n))throw Error("key "+C+" must not contain null bytes");if(O){if("$"===C[0])throw Error("key "+C+" must not start with '$'");if(~C.indexOf("."))throw Error("key "+C+" must not contain '.'")}}if("string"===k)D=o(e,C,L,D);else if("number"===k)D=i(e,C,L,D);else{if("bigint"===k||ye.isBigInt64Array(L)||ye.isBigUInt64Array(L))throw new TypeError("Unsupported type BigInt, please use Decimal128");if("boolean"===k)D=s(e,C,L,D);else if(L instanceof Date||ye.isDate(L))D=u(e,C,L,D);else if(null===L||void 0===L&&!1===N)D=a(e,C,L,D);else if("ObjectId"===L["_bsontype"]||"ObjectID"===L["_bsontype"])D=p(e,C,L,D);else if(ye.isUint8Array(L))D=h(e,C,L,D);else if(L instanceof RegExp||ye.isRegExp(L))D=c(e,C,L,D);else if("object"===k&&null==L["_bsontype"])D=d(e,C,L,D,O,I,T,N,!1,R);else if("object"===k&&"Decimal128"===L["_bsontype"])D=y(e,C,L,D);else if("Long"===L["_bsontype"]||"Timestamp"===L["_bsontype"])D=g(e,C,L,D);else if("Double"===L["_bsontype"])D=_(e,C,L,D);else if("Code"===L["_bsontype"])D=b(e,C,L,D,O,I,T,N);else if("function"===typeof L&&T)D=m(e,C,L,D,O,I,T);else if("Binary"===L["_bsontype"])D=E(e,C,L,D);else if("Symbol"===L["_bsontype"])D=w(e,C,L,D);else if("DBRef"===L["_bsontype"])D=S(e,C,L,D,I,T);else if("BSONRegExp"===L["_bsontype"])D=f(e,C,L,D);else if("Int32"===L["_bsontype"])D=v(e,C,L,D);else if("MinKey"===L["_bsontype"]||"MaxKey"===L["_bsontype"])D=l(e,C,L,D);else if("undefined"!==typeof L["_bsontype"])throw new TypeError("Unrecognized or invalid _bsontype: "+L["_bsontype"])}}}}else{if(t.toBSON){if("function"!==typeof t.toBSON)throw new TypeError("toBSON is not a function");if(t=t.toBSON(),null!=t&&"object"!==typeof t)throw new TypeError("toBSON function did not return an object")}for(var C in t){L=t[C];if(L&&L.toBSON){if("function"!==typeof L.toBSON)throw new TypeError("toBSON is not a function");L=L.toBSON()}k=typeof L;if("string"===typeof C&&!r.has(C)){if(null!=C.match(n))throw Error("key "+C+" must not contain null bytes");if(O){if("$"===C[0])throw Error("key "+C+" must not start with '$'");if(~C.indexOf("."))throw Error("key "+C+" must not contain '.'")}}if("string"===k)D=o(e,C,L,D);else if("number"===k)D=i(e,C,L,D);else{if("bigint"===k)throw new TypeError("Unsupported type BigInt, please use Decimal128");if("boolean"===k)D=s(e,C,L,D);else if(L instanceof Date||ye.isDate(L))D=u(e,C,L,D);else if(void 0===L)!1===N&&(D=a(e,C,L,D));else if(null===L)D=a(e,C,L,D);else if("ObjectId"===L["_bsontype"]||"ObjectID"===L["_bsontype"])D=p(e,C,L,D);else if(ye.isUint8Array(L))D=h(e,C,L,D);else if(L instanceof RegExp||ye.isRegExp(L))D=c(e,C,L,D);else if("object"===k&&null==L["_bsontype"])D=d(e,C,L,D,O,I,T,N,!1,R);else if("object"===k&&"Decimal128"===L["_bsontype"])D=y(e,C,L,D);else if("Long"===L["_bsontype"]||"Timestamp"===L["_bsontype"])D=g(e,C,L,D);else if("Double"===L["_bsontype"])D=_(e,C,L,D);else if("Code"===L["_bsontype"])D=b(e,C,L,D,O,I,T,N);else if("function"===typeof L&&T)D=m(e,C,L,D,O,I,T);else if("Binary"===L["_bsontype"])D=E(e,C,L,D);else if("Symbol"===L["_bsontype"])D=w(e,C,L,D);else if("DBRef"===L["_bsontype"])D=S(e,C,L,D,I,T);else if("BSONRegExp"===L["_bsontype"])D=f(e,C,L,D);else if("Int32"===L["_bsontype"])D=v(e,C,L,D);else if("MinKey"===L["_bsontype"]||"MaxKey"===L["_bsontype"])D=l(e,C,L,D);else if("undefined"!==typeof L["_bsontype"])throw new TypeError("Unrecognized or invalid _bsontype: "+L["_bsontype"])}}}R.pop(),e[D++]=0;var j=D-A;return e[A++]=255&j,e[A++]=j>>8&255,e[A++]=j>>16&255,e[A++]=j>>24&255,D}t.serializeInto=O}));o(ft),ft.serializeInto;var lt=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectID=t.Decimal128=t.BSONRegExp=t.MaxKey=t.MinKey=t.Int32=t.Double=t.Timestamp=t.Long=t.UUID=t.ObjectId=t.Binary=t.DBRef=t.BSONSymbol=t.Map=t.Code=t.LongWithoutOverridesClass=t.EJSON=t.BSON_INT64_MIN=t.BSON_INT64_MAX=t.BSON_INT32_MIN=t.BSON_INT32_MAX=t.BSON_DATA_UNDEFINED=t.BSON_DATA_TIMESTAMP=t.BSON_DATA_SYMBOL=t.BSON_DATA_STRING=t.BSON_DATA_REGEXP=t.BSON_DATA_OID=t.BSON_DATA_OBJECT=t.BSON_DATA_NUMBER=t.BSON_DATA_NULL=t.BSON_DATA_MIN_KEY=t.BSON_DATA_MAX_KEY=t.BSON_DATA_LONG=t.BSON_DATA_INT=t.BSON_DATA_DECIMAL128=t.BSON_DATA_DBPOINTER=t.BSON_DATA_DATE=t.BSON_DATA_CODE_W_SCOPE=t.BSON_DATA_CODE=t.BSON_DATA_BOOLEAN=t.BSON_DATA_BINARY=t.BSON_DATA_ARRAY=t.BSON_BINARY_SUBTYPE_UUID_NEW=t.BSON_BINARY_SUBTYPE_UUID=t.BSON_BINARY_SUBTYPE_USER_DEFINED=t.BSON_BINARY_SUBTYPE_MD5=t.BSON_BINARY_SUBTYPE_FUNCTION=t.BSON_BINARY_SUBTYPE_DEFAULT=t.BSON_BINARY_SUBTYPE_BYTE_ARRAY=void 0,t.deserializeStream=t.calculateObjectSize=t.deserialize=t.serializeWithBufferAndIndex=t.serialize=t.setInternalBufferSize=void 0,Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return me.Binary}}),Object.defineProperty(t,"Code",{enumerable:!0,get:function(){return be.Code}}),Object.defineProperty(t,"DBRef",{enumerable:!0,get:function(){return Ee.DBRef}}),Object.defineProperty(t,"Decimal128",{enumerable:!0,get:function(){return Se.Decimal128}}),Object.defineProperty(t,"Double",{enumerable:!0,get:function(){return Oe.Double}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return Ae.Int32}}),Object.defineProperty(t,"Long",{enumerable:!0,get:function(){return we.Long}}),Object.defineProperty(t,"Map",{enumerable:!0,get:function(){return ot.Map}}),Object.defineProperty(t,"MaxKey",{enumerable:!0,get:function(){return Ie.MaxKey}}),Object.defineProperty(t,"MinKey",{enumerable:!0,get:function(){return Te.MinKey}}),Object.defineProperty(t,"ObjectId",{enumerable:!0,get:function(){return Ne.ObjectId}}),Object.defineProperty(t,"ObjectID",{enumerable:!0,get:function(){return Ne.ObjectId}}),Object.defineProperty(t,"BSONRegExp",{enumerable:!0,get:function(){return Re.BSONRegExp}}),Object.defineProperty(t,"BSONSymbol",{enumerable:!0,get:function(){return De.BSONSymbol}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return nt.Timestamp}}),Object.defineProperty(t,"UUID",{enumerable:!0,get:function(){return _e.UUID}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_BYTE_ARRAY",{enumerable:!0,get:function(){return it.BSON_BINARY_SUBTYPE_BYTE_ARRAY}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_DEFAULT",{enumerable:!0,get:function(){return it.BSON_BINARY_SUBTYPE_DEFAULT}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_FUNCTION",{enumerable:!0,get:function(){return it.BSON_BINARY_SUBTYPE_FUNCTION}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_MD5",{enumerable:!0,get:function(){return it.BSON_BINARY_SUBTYPE_MD5}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_USER_DEFINED",{enumerable:!0,get:function(){return it.BSON_BINARY_SUBTYPE_USER_DEFINED}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_UUID",{enumerable:!0,get:function(){return it.BSON_BINARY_SUBTYPE_UUID}}),Object.defineProperty(t,"BSON_BINARY_SUBTYPE_UUID_NEW",{enumerable:!0,get:function(){return it.BSON_BINARY_SUBTYPE_UUID_NEW}}),Object.defineProperty(t,"BSON_DATA_ARRAY",{enumerable:!0,get:function(){return it.BSON_DATA_ARRAY}}),Object.defineProperty(t,"BSON_DATA_BINARY",{enumerable:!0,get:function(){return it.BSON_DATA_BINARY}}),Object.defineProperty(t,"BSON_DATA_BOOLEAN",{enumerable:!0,get:function(){return it.BSON_DATA_BOOLEAN}}),Object.defineProperty(t,"BSON_DATA_CODE",{enumerable:!0,get:function(){return it.BSON_DATA_CODE}}),Object.defineProperty(t,"BSON_DATA_CODE_W_SCOPE",{enumerable:!0,get:function(){return it.BSON_DATA_CODE_W_SCOPE}}),Object.defineProperty(t,"BSON_DATA_DATE",{enumerable:!0,get:function(){return it.BSON_DATA_DATE}}),Object.defineProperty(t,"BSON_DATA_DBPOINTER",{enumerable:!0,get:function(){return it.BSON_DATA_DBPOINTER}}),Object.defineProperty(t,"BSON_DATA_DECIMAL128",{enumerable:!0,get:function(){return it.BSON_DATA_DECIMAL128}}),Object.defineProperty(t,"BSON_DATA_INT",{enumerable:!0,get:function(){return it.BSON_DATA_INT}}),Object.defineProperty(t,"BSON_DATA_LONG",{enumerable:!0,get:function(){return it.BSON_DATA_LONG}}),Object.defineProperty(t,"BSON_DATA_MAX_KEY",{enumerable:!0,get:function(){return it.BSON_DATA_MAX_KEY}}),Object.defineProperty(t,"BSON_DATA_MIN_KEY",{enumerable:!0,get:function(){return it.BSON_DATA_MIN_KEY}}),Object.defineProperty(t,"BSON_DATA_NULL",{enumerable:!0,get:function(){return it.BSON_DATA_NULL}}),Object.defineProperty(t,"BSON_DATA_NUMBER",{enumerable:!0,get:function(){return it.BSON_DATA_NUMBER}}),Object.defineProperty(t,"BSON_DATA_OBJECT",{enumerable:!0,get:function(){return it.BSON_DATA_OBJECT}}),Object.defineProperty(t,"BSON_DATA_OID",{enumerable:!0,get:function(){return it.BSON_DATA_OID}}),Object.defineProperty(t,"BSON_DATA_REGEXP",{enumerable:!0,get:function(){return it.BSON_DATA_REGEXP}}),Object.defineProperty(t,"BSON_DATA_STRING",{enumerable:!0,get:function(){return it.BSON_DATA_STRING}}),Object.defineProperty(t,"BSON_DATA_SYMBOL",{enumerable:!0,get:function(){return it.BSON_DATA_SYMBOL}}),Object.defineProperty(t,"BSON_DATA_TIMESTAMP",{enumerable:!0,get:function(){return it.BSON_DATA_TIMESTAMP}}),Object.defineProperty(t,"BSON_DATA_UNDEFINED",{enumerable:!0,get:function(){return it.BSON_DATA_UNDEFINED}}),Object.defineProperty(t,"BSON_INT32_MAX",{enumerable:!0,get:function(){return it.BSON_INT32_MAX}}),Object.defineProperty(t,"BSON_INT32_MIN",{enumerable:!0,get:function(){return it.BSON_INT32_MIN}}),Object.defineProperty(t,"BSON_INT64_MAX",{enumerable:!0,get:function(){return it.BSON_INT64_MAX}}),Object.defineProperty(t,"BSON_INT64_MIN",{enumerable:!0,get:function(){return it.BSON_INT64_MIN}});var n=rt;Object.defineProperty(t,"EJSON",{enumerable:!0,get:function(){return n.EJSON}});var r=nt;Object.defineProperty(t,"LongWithoutOverridesClass",{enumerable:!0,get:function(){return r.LongWithoutOverridesClass}});var o=17825792,i=I.Buffer.alloc(o);function a(e){i.length<e&&(i=I.Buffer.alloc(e))}function s(e,t){void 0===t&&(t={});var n="boolean"===typeof t.checkKeys&&t.checkKeys,r="boolean"===typeof t.serializeFunctions&&t.serializeFunctions,a="boolean"!==typeof t.ignoreUndefined||t.ignoreUndefined,s="number"===typeof t.minInternalBufferSize?t.minInternalBufferSize:o;i.length<s&&(i=I.Buffer.alloc(s));var u=ft.serializeInto(i,e,n,0,0,r,a,[]),c=I.Buffer.alloc(u);return i.copy(c,0,0,c.length),c}function u(e,t,n){void 0===n&&(n={});var r="boolean"===typeof n.checkKeys&&n.checkKeys,o="boolean"===typeof n.serializeFunctions&&n.serializeFunctions,a="boolean"!==typeof n.ignoreUndefined||n.ignoreUndefined,s="number"===typeof n.index?n.index:0,u=ft.serializeInto(i,e,r,0,0,o,a);return i.copy(t,s,0,u),s+u-1}function c(e,t){return void 0===t&&(t={}),ut.deserialize(ge.ensureBuffer(e),t)}function f(e,t){void 0===t&&(t={}),t=t||{};var n="boolean"===typeof t.serializeFunctions&&t.serializeFunctions,r="boolean"!==typeof t.ignoreUndefined||t.ignoreUndefined;return at.calculateObjectSize(e,n,r)}function l(e,t,n,r,o,i){for(var a=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},i),s=ge.ensureBuffer(e),u=t,c=0;c<n;c++){var f=s[u]|s[u+1]<<8|s[u+2]<<16|s[u+3]<<24;a.index=u,r[o+c]=ut.deserialize(s,a),u+=f}return u}t.setInternalBufferSize=a,t.serialize=s,t.serializeWithBufferAndIndex=u,t.deserialize=c,t.calculateObjectSize=f,t.deserializeStream=l;var p={Binary:me.Binary,Code:be.Code,DBRef:Ee.DBRef,Decimal128:Se.Decimal128,Double:Oe.Double,Int32:Ae.Int32,Long:we.Long,UUID:_e.UUID,Map:ot.Map,MaxKey:Ie.MaxKey,MinKey:Te.MinKey,ObjectId:Ne.ObjectId,ObjectID:Ne.ObjectId,BSONRegExp:Re.BSONRegExp,BSONSymbol:De.BSONSymbol,Timestamp:nt.Timestamp,EJSON:rt.EJSON,setInternalBufferSize:a,serialize:s,serializeWithBufferAndIndex:u,deserialize:c,calculateObjectSize:f,deserializeStream:l};t.default=p})),pt=o(lt),ht=lt.ObjectID;t.ObjectID=ht;var dt=lt.Decimal128;t.Decimal128=dt;var yt=lt.BSONRegExp;t.BSONRegExp=yt;var gt=lt.MaxKey;t.MaxKey=gt;var vt=lt.MinKey;t.MinKey=vt;var _t=lt.Int32;t.Int32=_t;var mt=lt.Double;t.Double=mt;var bt=lt.Timestamp;t.Timestamp=bt;var Et=lt.Long;t.Long=Et;var wt=lt.UUID;t.UUID=wt;var St=lt.ObjectId;t.ObjectId=St;var Ot=lt.Binary;t.Binary=Ot;var At=lt.DBRef;t.DBRef=At;var It=lt.BSONSymbol;t.BSONSymbol=It;var Tt=lt.Map;t.Map=Tt;var Nt=lt.Code;t.Code=Nt;var Rt=lt.LongWithoutOverridesClass;t.LongWithoutOverridesClass=Rt;var Dt=lt.EJSON;t.EJSON=Dt;var Pt=lt.BSON_INT64_MIN;t.BSON_INT64_MIN=Pt;var Ct=lt.BSON_INT64_MAX;t.BSON_INT64_MAX=Ct;var Lt=lt.BSON_INT32_MIN;t.BSON_INT32_MIN=Lt;var Bt=lt.BSON_INT32_MAX;t.BSON_INT32_MAX=Bt;var Mt=lt.BSON_DATA_UNDEFINED;t.BSON_DATA_UNDEFINED=Mt;var xt=lt.BSON_DATA_TIMESTAMP;t.BSON_DATA_TIMESTAMP=xt;var kt=lt.BSON_DATA_SYMBOL;t.BSON_DATA_SYMBOL=kt;var jt=lt.BSON_DATA_STRING;t.BSON_DATA_STRING=jt;var Ut=lt.BSON_DATA_REGEXP;t.BSON_DATA_REGEXP=Ut;var $t=lt.BSON_DATA_OID;t.BSON_DATA_OID=$t;var Wt=lt.BSON_DATA_OBJECT;t.BSON_DATA_OBJECT=Wt;var Ft=lt.BSON_DATA_NUMBER;t.BSON_DATA_NUMBER=Ft;var qt=lt.BSON_DATA_NULL;t.BSON_DATA_NULL=qt;var Yt=lt.BSON_DATA_MIN_KEY;t.BSON_DATA_MIN_KEY=Yt;var Vt=lt.BSON_DATA_MAX_KEY;t.BSON_DATA_MAX_KEY=Vt;var Gt=lt.BSON_DATA_LONG;t.BSON_DATA_LONG=Gt;var Ht=lt.BSON_DATA_INT;t.BSON_DATA_INT=Ht;var Kt=lt.BSON_DATA_DECIMAL128;t.BSON_DATA_DECIMAL128=Kt;var zt=lt.BSON_DATA_DBPOINTER;t.BSON_DATA_DBPOINTER=zt;var Jt=lt.BSON_DATA_DATE;t.BSON_DATA_DATE=Jt;var Qt=lt.BSON_DATA_CODE_W_SCOPE;t.BSON_DATA_CODE_W_SCOPE=Qt;var Xt=lt.BSON_DATA_CODE;t.BSON_DATA_CODE=Xt;var Zt=lt.BSON_DATA_BOOLEAN;t.BSON_DATA_BOOLEAN=Zt;var en=lt.BSON_DATA_BINARY;t.BSON_DATA_BINARY=en;var tn=lt.BSON_DATA_ARRAY;t.BSON_DATA_ARRAY=tn;var nn=lt.BSON_BINARY_SUBTYPE_UUID_NEW;t.BSON_BINARY_SUBTYPE_UUID_NEW=nn;var rn=lt.BSON_BINARY_SUBTYPE_UUID;t.BSON_BINARY_SUBTYPE_UUID=rn;var on=lt.BSON_BINARY_SUBTYPE_USER_DEFINED;t.BSON_BINARY_SUBTYPE_USER_DEFINED=on;var an=lt.BSON_BINARY_SUBTYPE_MD5;t.BSON_BINARY_SUBTYPE_MD5=an;var sn=lt.BSON_BINARY_SUBTYPE_FUNCTION;t.BSON_BINARY_SUBTYPE_FUNCTION=sn;var un=lt.BSON_BINARY_SUBTYPE_DEFAULT;t.BSON_BINARY_SUBTYPE_DEFAULT=un;var cn=lt.BSON_BINARY_SUBTYPE_BYTE_ARRAY;t.BSON_BINARY_SUBTYPE_BYTE_ARRAY=cn;var fn=lt.deserializeStream;t.deserializeStream=fn;var ln=lt.calculateObjectSize;t.calculateObjectSize=ln;var pn=lt.deserialize;t.deserialize=pn;var hn=lt.serializeWithBufferAndIndex;t.serializeWithBufferAndIndex=hn;var dn=lt.serialize;t.serialize=dn;var yn=lt.setInternalBufferSize;t.setInternalBufferSize=yn;var gn=pt;t.default=gn}).call(this,n("c8ba"),n("b639").Buffer)},"659a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ProjectionOperator=t.AggregationOperator=t.Command=void 0;var r=n("fe94"),o=n("8fd0"),i=n("a8f7"),a=n("7319"),s=u(n("b93b"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f={eq:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.EQ,[e])},neq:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.NEQ,[e])},lt:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.LT,[e])},lte:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.LTE,[e])},gt:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GT,[e])},gte:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GTE,[e])},in:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.IN,e)},nin:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.NIN,e)},all:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.ALL,e)},elemMatch:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.ELEM_MATCH,[e])},exists:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.EXISTS,[e])},size:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.SIZE,[e])},mod:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.MOD,[e])},geoNear:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GEO_NEAR,[e])},geoWithin:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GEO_WITHIN,[e])},geoIntersects:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GEO_INTERSECTS,[e])},and:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,a.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new o.LogicCommand(o.LOGIC_COMMANDS_LITERAL.AND,r)},nor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,a.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new o.LogicCommand(o.LOGIC_COMMANDS_LITERAL.NOR,r)},or:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,a.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new o.LogicCommand(o.LOGIC_COMMANDS_LITERAL.OR,r)},not:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,a.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new o.LogicCommand(o.LOGIC_COMMANDS_LITERAL.NOT,r)},set:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.SET,[e])},remove:function(){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.REMOVE,[])},inc:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.INC,[e])},mul:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.MUL,[e])},push:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if((0,a.isObject)(n[0])&&n[0].hasOwnProperty("each")){e={};var o=n[0];void 0!==o.each&&(e["$each"]=o.each),void 0!==o.position&&(e["$position"]=o.position),void 0!==o.sort&&(e["$sort"]=o.sort),void 0!==o.slice&&(e["$slice"]=o.slice)}else e=(0,a.isArray)(n[0])?n[0]:Array.from(n);return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.PUSH,e)},pull:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.PULL,e)},pullAll:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.PULL_ALL,e)},pop:function(){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.POP,[])},shift:function(){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.SHIFT,[])},unshift:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,a.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.UNSHIFT,r)},addToSet:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.ADD_TO_SET,e)},rename:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.RENAME,[e])},bit:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.BIT,[e])},max:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.MAX,[e])},min:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.MIN,[e])},expr:function(e){return{$expr:e}},jsonSchema:function(e){return{$jsonSchema:e}},text:function(e){return(0,a.isString)(e)?{$search:e.search}:{$search:e.search,$language:e.language,$caseSensitive:e.caseSensitive,$diacriticSensitive:e.diacriticSensitive}},aggregate:{pipeline:function(){return new s.default},abs:function(e){return new l("abs",e)},add:function(e){return new l("add",e)},ceil:function(e){return new l("ceil",e)},divide:function(e){return new l("divide",e)},exp:function(e){return new l("exp",e)},floor:function(e){return new l("floor",e)},ln:function(e){return new l("ln",e)},log:function(e){return new l("log",e)},log10:function(e){return new l("log10",e)},mod:function(e){return new l("mod",e)},multiply:function(e){return new l("multiply",e)},pow:function(e){return new l("pow",e)},sqrt:function(e){return new l("sqrt",e)},subtract:function(e){return new l("subtract",e)},trunc:function(e){return new l("trunc",e)},arrayElemAt:function(e){return new l("arrayElemAt",e)},arrayToObject:function(e){return new l("arrayToObject",e)},concatArrays:function(e){return new l("concatArrays",e)},filter:function(e){return new l("filter",e)},in:function(e){return new l("in",e)},indexOfArray:function(e){return new l("indexOfArray",e)},isArray:function(e){return new l("isArray",e)},map:function(e){return new l("map",e)},range:function(e){return new l("range",e)},reduce:function(e){return new l("reduce",e)},reverseArray:function(e){return new l("reverseArray",e)},size:function(e){return new l("size",e)},slice:function(e){return new l("slice",e)},zip:function(e){return new l("zip",e)},and:function(e){return new l("and",e)},not:function(e){return new l("not",e)},or:function(e){return new l("or",e)},cmp:function(e){return new l("cmp",e)},eq:function(e){return new l("eq",e)},gt:function(e){return new l("gt",e)},gte:function(e){return new l("gte",e)},lt:function(e){return new l("lt",e)},lte:function(e){return new l("lte",e)},neq:function(e){return new l("ne",e)},cond:function(e){return new l("cond",e)},ifNull:function(e){return new l("ifNull",e)},switch:function(e){return new l("switch",e)},dateFromParts:function(e){return new l("dateFromParts",e)},dateFromString:function(e){return new l("dateFromString",e)},dayOfMonth:function(e){return new l("dayOfMonth",e)},dayOfWeek:function(e){return new l("dayOfWeek",e)},dayOfYear:function(e){return new l("dayOfYear",e)},isoDayOfWeek:function(e){return new l("isoDayOfWeek",e)},isoWeek:function(e){return new l("isoWeek",e)},isoWeekYear:function(e){return new l("isoWeekYear",e)},millisecond:function(e){return new l("millisecond",e)},minute:function(e){return new l("minute",e)},month:function(e){return new l("month",e)},second:function(e){return new l("second",e)},hour:function(e){return new l("hour",e)},week:function(e){return new l("week",e)},year:function(e){return new l("year",e)},literal:function(e){return new l("literal",e)},mergeObjects:function(e){return new l("mergeObjects",e)},objectToArray:function(e){return new l("objectToArray",e)},allElementsTrue:function(e){return new l("allElementsTrue",e)},anyElementTrue:function(e){return new l("anyElementTrue",e)},setDifference:function(e){return new l("setDifference",e)},setEquals:function(e){return new l("setEquals",e)},setIntersection:function(e){return new l("setIntersection",e)},setIsSubset:function(e){return new l("setIsSubset",e)},setUnion:function(e){return new l("setUnion",e)},concat:function(e){return new l("concat",e)},dateToString:function(e){return new l("dateToString",e)},indexOfBytes:function(e){return new l("indexOfBytes",e)},indexOfCP:function(e){return new l("indexOfCP",e)},split:function(e){return new l("split",e)},strLenBytes:function(e){return new l("strLenBytes",e)},strLenCP:function(e){return new l("strLenCP",e)},strcasecmp:function(e){return new l("strcasecmp",e)},substr:function(e){return new l("substr",e)},substrBytes:function(e){return new l("substrBytes",e)},substrCP:function(e){return new l("substrCP",e)},toLower:function(e){return new l("toLower",e)},toUpper:function(e){return new l("toUpper",e)},meta:function(e){return new l("meta",e)},addToSet:function(e){return new l("addToSet",e)},avg:function(e){return new l("avg",e)},first:function(e){return new l("first",e)},last:function(e){return new l("last",e)},max:function(e){return new l("max",e)},min:function(e){return new l("min",e)},push:function(e){return new l("push",e)},stdDevPop:function(e){return new l("stdDevPop",e)},stdDevSamp:function(e){return new l("stdDevSamp",e)},sum:function(e){return new l("sum",e)},let:function(e){return new l("let",e)}},project:{slice:function(e){return new p("slice",e)},elemMatch:function(e){return new p("elemMatch",e)}}};t.Command=f;var l=function e(t,n){c(this,e),this["$"+t]=n};t.AggregationOperator=l;var p=function e(t,n){c(this,e),this["$"+t]=n};t.ProjectionOperator=p;var h=f;t.default=h},"66fd":function(e,t,n){"use strict";n.r(t),function(e){
/*!
 * Vue.js v2.6.11
 * (c) 2014-2021 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(e){return void 0===e||null===e}function o(e){return void 0!==e&&null!==e}function i(e){return!0===e}function a(e){return!1===e}function s(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function u(e){return null!==e&&"object"===typeof e}var c=Object.prototype.toString;function f(e){return"[object Object]"===c.call(e)}function l(e){return"[object RegExp]"===c.call(e)}function p(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function h(e){return o(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function d(e){return null==e?"":Array.isArray(e)||f(e)&&e.toString===c?JSON.stringify(e,null,2):String(e)}function y(e){var t=parseFloat(e);return isNaN(t)?e:t}function g(e,t){for(var n=Object.create(null),r=e.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}g("slot,component",!0);var v=g("key,ref,slot,slot-scope,is");function _(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var m=Object.prototype.hasOwnProperty;function b(e,t){return m.call(e,t)}function E(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var w=/-(\w)/g,S=E((function(e){return e.replace(w,(function(e,t){return t?t.toUpperCase():""}))})),O=E((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),A=/\B([A-Z])/g,I=E((function(e){return e.replace(A,"-$1").toLowerCase()}));function T(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function N(e,t){return e.bind(t)}var R=Function.prototype.bind?N:T;function D(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function P(e,t){for(var n in t)e[n]=t[n];return e}function C(e){for(var t={},n=0;n<e.length;n++)e[n]&&P(t,e[n]);return t}function L(e,t,n){}var B=function(e,t,n){return!1},M=function(e){return e};function x(e,t){if(e===t)return!0;var n=u(e),r=u(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var o=Array.isArray(e),i=Array.isArray(t);if(o&&i)return e.length===t.length&&e.every((function(e,n){return x(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(o||i)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return x(e[n],t[n])}))}catch(c){return!1}}function k(e,t){for(var n=0;n<e.length;n++)if(x(e[n],t))return n;return-1}function j(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var U=["component","directive","filter"],$=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],W={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:B,isReservedAttr:B,isUnknownElement:B,getTagNamespace:L,parsePlatformTagName:M,mustUseProp:B,async:!0,_lifecycleHooks:$},F=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function q(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function Y(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var V=new RegExp("[^"+F.source+".$_\\d]");function G(e){if(!V.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var H,K="__proto__"in{},z="undefined"!==typeof window,J="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,Q=J&&WXEnvironment.platform.toLowerCase(),X=z&&window.navigator.userAgent.toLowerCase(),Z=X&&/msie|trident/.test(X),ee=(X&&X.indexOf("msie 9.0"),X&&X.indexOf("edge/")>0),te=(X&&X.indexOf("android"),X&&/iphone|ipad|ipod|ios/.test(X)||"ios"===Q),ne=(X&&/chrome\/\d+/.test(X),X&&/phantomjs/.test(X),X&&X.match(/firefox\/(\d+)/),{}.watch);if(z)try{var re={};Object.defineProperty(re,"passive",{get:function(){}}),window.addEventListener("test-passive",null,re)}catch(no){}var oe=function(){return void 0===H&&(H=!z&&!J&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),H},ie=z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ae(e){return"function"===typeof e&&/native code/.test(e.toString())}var se,ue="undefined"!==typeof Symbol&&ae(Symbol)&&"undefined"!==typeof Reflect&&ae(Reflect.ownKeys);se="undefined"!==typeof Set&&ae(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ce=L,fe=0,le=function(){this.id=fe++,this.subs=[]};function pe(e){le.SharedObject.targetStack.push(e),le.SharedObject.target=e,le.target=e}function he(){le.SharedObject.targetStack.pop(),le.SharedObject.target=le.SharedObject.targetStack[le.SharedObject.targetStack.length-1],le.target=le.SharedObject.target}le.prototype.addSub=function(e){this.subs.push(e)},le.prototype.removeSub=function(e){_(this.subs,e)},le.prototype.depend=function(){le.SharedObject.target&&le.SharedObject.target.addDep(this)},le.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},le.SharedObject={},le.SharedObject.target=null,le.SharedObject.targetStack=[];var de=function(e,t,n,r,o,i,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ye={child:{configurable:!0}};ye.child.get=function(){return this.componentInstance},Object.defineProperties(de.prototype,ye);var ge=function(e){void 0===e&&(e="");var t=new de;return t.text=e,t.isComment=!0,t};function ve(e){return new de(void 0,void 0,void 0,String(e))}function _e(e){var t=new de(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var me=Array.prototype,be=Object.create(me),Ee=["push","pop","shift","unshift","splice","sort","reverse"];Ee.forEach((function(e){var t=me[e];Y(be,e,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var o,i=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2);break}return o&&a.observeArray(o),a.dep.notify(),i}))}));var we=Object.getOwnPropertyNames(be),Se=!0;function Oe(e){Se=e}var Ae=function(e){this.value=e,this.dep=new le,this.vmCount=0,Y(e,"__ob__",this),Array.isArray(e)?(K?e.push!==e.__proto__.push?Te(e,be,we):Ie(e,be):Te(e,be,we),this.observeArray(e)):this.walk(e)};function Ie(e,t){e.__proto__=t}function Te(e,t,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];Y(e,i,t[i])}}function Ne(e,t){var n;if(u(e)&&!(e instanceof de))return b(e,"__ob__")&&e.__ob__ instanceof Ae?n=e.__ob__:Se&&!oe()&&(Array.isArray(e)||f(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Ae(e)),t&&n&&n.vmCount++,n}function Re(e,t,n,r,o){var i=new le,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=e[t]);var c=!o&&Ne(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return le.SharedObject.target&&(i.depend(),c&&(c.dep.depend(),Array.isArray(t)&&Ce(t))),t},set:function(t){var r=s?s.call(e):n;t===r||t!==t&&r!==r||s&&!u||(u?u.call(e,t):n=t,c=!o&&Ne(t),i.notify())}})}}function De(e,t,n){if(Array.isArray(e)&&p(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Re(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Pe(e,t){if(Array.isArray(e)&&p(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||b(e,t)&&(delete e[t],n&&n.dep.notify())}}function Ce(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Ce(t)}Ae.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Re(e,t[n])},Ae.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ne(e[t])};var Le=W.optionMergeStrategies;function Be(e,t){if(!t)return e;for(var n,r,o,i=ue?Reflect.ownKeys(t):Object.keys(t),a=0;a<i.length;a++)n=i[a],"__ob__"!==n&&(r=e[n],o=t[n],b(e,n)?r!==o&&f(r)&&f(o)&&Be(r,o):De(e,n,o));return e}function Me(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,o="function"===typeof e?e.call(n,n):e;return r?Be(r,o):o}:t?e?function(){return Be("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function xe(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?ke(n):n}function ke(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function je(e,t,n,r){var o=Object.create(e||null);return t?P(o,t):o}Le.data=function(e,t,n){return n?Me(e,t,n):t&&"function"!==typeof t?e:Me(e,t)},$.forEach((function(e){Le[e]=xe})),U.forEach((function(e){Le[e+"s"]=je})),Le.watch=function(e,t,n,r){if(e===ne&&(e=void 0),t===ne&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var o={};for(var i in P(o,e),t){var a=o[i],s=t[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},Le.props=Le.methods=Le.inject=Le.computed=function(e,t,n,r){if(!e)return t;var o=Object.create(null);return P(o,e),t&&P(o,t),o},Le.provide=Me;var Ue=function(e,t){return void 0===t?e:t};function $e(e,t){var n=e.props;if(n){var r,o,i,a={};if(Array.isArray(n)){r=n.length;while(r--)o=n[r],"string"===typeof o&&(i=S(o),a[i]={type:null})}else if(f(n))for(var s in n)o=n[s],i=S(s),a[i]=f(o)?o:{type:o};else 0;e.props=a}}function We(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(f(n))for(var i in n){var a=n[i];r[i]=f(a)?P({from:i},a):{from:a}}else 0}}function Fe(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function qe(e,t,n){if("function"===typeof t&&(t=t.options),$e(t,n),We(t,n),Fe(t),!t._base&&(t.extends&&(e=qe(e,t.extends,n)),t.mixins))for(var r=0,o=t.mixins.length;r<o;r++)e=qe(e,t.mixins[r],n);var i,a={};for(i in e)s(i);for(i in t)b(e,i)||s(i);function s(r){var o=Le[r]||Ue;a[r]=o(e[r],t[r],n,r)}return a}function Ye(e,t,n,r){if("string"===typeof n){var o=e[t];if(b(o,n))return o[n];var i=S(n);if(b(o,i))return o[i];var a=O(i);if(b(o,a))return o[a];var s=o[n]||o[i]||o[a];return s}}function Ve(e,t,n,r){var o=t[e],i=!b(n,e),a=n[e],s=ze(Boolean,o.type);if(s>-1)if(i&&!b(o,"default"))a=!1;else if(""===a||a===I(e)){var u=ze(String,o.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=Ge(r,o,e);var c=Se;Oe(!0),Ne(a),Oe(c)}return a}function Ge(e,t,n){if(b(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==He(t.type)?r.call(e):r}}function He(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Ke(e,t){return He(e)===He(t)}function ze(e,t){if(!Array.isArray(t))return Ke(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(Ke(t[n],e))return n;return-1}function Je(e,t,n){pe();try{if(t){var r=t;while(r=r.$parent){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{var a=!1===o[i].call(r,e,t,n);if(a)return}catch(no){Xe(no,r,"errorCaptured hook")}}}Xe(e,t,n)}finally{he()}}function Qe(e,t,n,r,o){var i;try{i=n?e.apply(t,n):e.call(t),i&&!i._isVue&&h(i)&&!i._handled&&(i.catch((function(e){return Je(e,r,o+" (Promise/async)")})),i._handled=!0)}catch(no){Je(no,r,o)}return i}function Xe(e,t,n){if(W.errorHandler)try{return W.errorHandler.call(null,e,t,n)}catch(no){no!==e&&Ze(no,null,"config.errorHandler")}Ze(e,t,n)}function Ze(e,t,n){if(!z&&!J||"undefined"===typeof console)throw e;console.error(e)}var et,tt=[],nt=!1;function rt(){nt=!1;var e=tt.slice(0);tt.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&ae(Promise)){var ot=Promise.resolve();et=function(){ot.then(rt),te&&setTimeout(L)}}else if(Z||"undefined"===typeof MutationObserver||!ae(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())et="undefined"!==typeof setImmediate&&ae(setImmediate)?function(){setImmediate(rt)}:function(){setTimeout(rt,0)};else{var it=1,at=new MutationObserver(rt),st=document.createTextNode(String(it));at.observe(st,{characterData:!0}),et=function(){it=(it+1)%2,st.data=String(it)}}function ut(e,t){var n;if(tt.push((function(){if(e)try{e.call(t)}catch(no){Je(no,t,"nextTick")}else n&&n(t)})),nt||(nt=!0,et()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var ct=new se;function ft(e){lt(e,ct),ct.clear()}function lt(e,t){var n,r,o=Array.isArray(e);if(!(!o&&!u(e)||Object.isFrozen(e)||e instanceof de)){if(e.__ob__){var i=e.__ob__.dep.id;if(t.has(i))return;t.add(i)}if(o){n=e.length;while(n--)lt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)lt(e[r[n]],t)}}}var pt=E((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}}));function ht(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return Qe(r,null,arguments,t,"v-on handler");for(var o=r.slice(),i=0;i<o.length;i++)Qe(o[i],null,e,t,"v-on handler")}return n.fns=e,n}function dt(e,t,n,o,a,s){var u,c,f,l;for(u in e)c=e[u],f=t[u],l=pt(u),r(c)||(r(f)?(r(c.fns)&&(c=e[u]=ht(c,s)),i(l.once)&&(c=e[u]=a(l.name,c,l.capture)),n(l.name,c,l.capture,l.passive,l.params)):c!==f&&(f.fns=c,e[u]=f));for(u in t)r(e[u])&&(l=pt(u),o(l.name,t[u],l.capture))}function yt(e,t,n,i){var a=t.options.mpOptions&&t.options.mpOptions.properties;if(r(a))return n;var s=t.options.mpOptions.externalClasses||[],u=e.attrs,c=e.props;if(o(u)||o(c))for(var f in a){var l=I(f),p=vt(n,c,f,l,!0)||vt(n,u,f,l,!1);p&&n[f]&&-1!==s.indexOf(l)&&i[S(n[f])]&&(n[f]=i[S(n[f])])}return n}function gt(e,t,n,i){var a=t.options.props;if(r(a))return yt(e,t,{},i);var s={},u=e.attrs,c=e.props;if(o(u)||o(c))for(var f in a){var l=I(f);vt(s,c,f,l,!0)||vt(s,u,f,l,!1)}return yt(e,t,s,i)}function vt(e,t,n,r,i){if(o(t)){if(b(t,n))return e[n]=t[n],i||delete t[n],!0;if(b(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function _t(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function mt(e){return s(e)?[ve(e)]:Array.isArray(e)?Et(e):void 0}function bt(e){return o(e)&&o(e.text)&&a(e.isComment)}function Et(e,t){var n,a,u,c,f=[];for(n=0;n<e.length;n++)a=e[n],r(a)||"boolean"===typeof a||(u=f.length-1,c=f[u],Array.isArray(a)?a.length>0&&(a=Et(a,(t||"")+"_"+n),bt(a[0])&&bt(c)&&(f[u]=ve(c.text+a[0].text),a.shift()),f.push.apply(f,a)):s(a)?bt(c)?f[u]=ve(c.text+a):""!==a&&f.push(ve(a)):bt(a)&&bt(c)?f[u]=ve(c.text+a.text):(i(e._isVList)&&o(a.tag)&&r(a.key)&&o(t)&&(a.key="__vlist"+t+"_"+n+"__"),f.push(a)));return f}function wt(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function St(e){var t=Ot(e.$options.inject,e);t&&(Oe(!1),Object.keys(t).forEach((function(n){Re(e,n,t[n])})),Oe(!0))}function Ot(e,t){if(e){for(var n=Object.create(null),r=ue?Reflect.ownKeys(e):Object.keys(e),o=0;o<r.length;o++){var i=r[o];if("__ob__"!==i){var a=e[i].from,s=t;while(s){if(s._provided&&b(s._provided,a)){n[i]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[i]){var u=e[i].default;n[i]="function"===typeof u?u.call(t):u}else 0}}return n}}function At(e,t){if(!e||!e.length)return{};for(var n={},r=0,o=e.length;r<o;r++){var i=e[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==t&&i.fnContext!==t||!a||null==a.slot)i.asyncMeta&&i.asyncMeta.data&&"page"===i.asyncMeta.data.slot?(n["page"]||(n["page"]=[])).push(i):(n.default||(n.default=[])).push(i);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===i.tag?u.push.apply(u,i.children||[]):u.push(i)}}for(var c in n)n[c].every(It)&&delete n[c];return n}function It(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Tt(e,t,r){var o,i=Object.keys(t).length>0,a=e?!!e.$stable:!i,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&r&&r!==n&&s===r.$key&&!i&&!r.$hasNormal)return r;for(var u in o={},e)e[u]&&"$"!==u[0]&&(o[u]=Nt(t,u,e[u]))}else o={};for(var c in t)c in o||(o[c]=Rt(t,c));return e&&Object.isExtensible(e)&&(e._normalized=o),Y(o,"$stable",a),Y(o,"$key",s),Y(o,"$hasNormal",i),o}function Nt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:mt(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function Rt(e,t){return function(){return e[t]}}function Dt(e,t){var n,r,i,a,s;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r,r,r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r,r,r);else if(u(e))if(ue&&e[Symbol.iterator]){n=[];var c=e[Symbol.iterator](),f=c.next();while(!f.done)n.push(t(f.value,n.length,r,r++)),f=c.next()}else for(a=Object.keys(e),n=new Array(a.length),r=0,i=a.length;r<i;r++)s=a[r],n[r]=t(e[s],s,r,r);return o(n)||(n=[]),n._isVList=!0,n}function Pt(e,t,n,r){var o,i=this.$scopedSlots[e];i?(n=n||{},r&&(n=P(P({},r),n)),o=i(n,this,n._i)||t):o=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},o):o}function Ct(e){return Ye(this.$options,"filters",e,!0)||M}function Lt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Bt(e,t,n,r,o){var i=W.keyCodes[t]||n;return o&&r&&!W.keyCodes[t]?Lt(o,r):i?Lt(i,e):r?I(r)!==t:void 0}function Mt(e,t,n,r,o){if(n)if(u(n)){var i;Array.isArray(n)&&(n=C(n));var a=function(a){if("class"===a||"style"===a||v(a))i=e;else{var s=e.attrs&&e.attrs.type;i=r||W.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var u=S(a),c=I(a);if(!(u in i)&&!(c in i)&&(i[a]=n[a],o)){var f=e.on||(e.on={});f["update:"+a]=function(e){n[a]=e}}};for(var s in n)a(s)}else;return e}function xt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),jt(r,"__static__"+e,!1)),r}function kt(e,t,n){return jt(e,"__once__"+t+(n?"_"+n:""),!0),e}function jt(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&Ut(e[r],t+"_"+r,n);else Ut(e,t,n)}function Ut(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function $t(e,t){if(t)if(f(t)){var n=e.on=e.on?P({},e.on):{};for(var r in t){var o=n[r],i=t[r];n[r]=o?[].concat(o,i):i}}else;return e}function Wt(e,t,n,r){t=t||{$stable:!n};for(var o=0;o<e.length;o++){var i=e[o];Array.isArray(i)?Wt(i,t,n):i&&(i.proxy&&(i.fn.proxy=!0),t[i.key]=i.fn)}return r&&(t.$key=r),t}function Ft(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r&&(e[t[n]]=t[n+1])}return e}function qt(e,t){return"string"===typeof e?t+e:e}function Yt(e){e._o=kt,e._n=y,e._s=d,e._l=Dt,e._t=Pt,e._q=x,e._i=k,e._m=xt,e._f=Ct,e._k=Bt,e._b=Mt,e._v=ve,e._e=ge,e._u=Wt,e._g=$t,e._d=Ft,e._p=qt}function Vt(e,t,r,o,a){var s,u=this,c=a.options;b(o,"_uid")?(s=Object.create(o),s._original=o):(s=o,o=o._original);var f=i(c._compiled),l=!f;this.data=e,this.props=t,this.children=r,this.parent=o,this.listeners=e.on||n,this.injections=Ot(c.inject,o),this.slots=function(){return u.$slots||Tt(e.scopedSlots,u.$slots=At(r,o)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Tt(e.scopedSlots,this.slots())}}),f&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=Tt(e.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,t,n,r){var i=on(s,e,t,n,r,l);return i&&!Array.isArray(i)&&(i.fnScopeId=c._scopeId,i.fnContext=o),i}:this._c=function(e,t,n,r){return on(s,e,t,n,r,l)}}function Gt(e,t,r,i,a){var s=e.options,u={},c=s.props;if(o(c))for(var f in c)u[f]=Ve(f,c,t||n);else o(r.attrs)&&Kt(u,r.attrs),o(r.props)&&Kt(u,r.props);var l=new Vt(r,u,a,i,e),p=s.render.call(null,l._c,l);if(p instanceof de)return Ht(p,r,l.parent,s,l);if(Array.isArray(p)){for(var h=mt(p)||[],d=new Array(h.length),y=0;y<h.length;y++)d[y]=Ht(h[y],r,l.parent,s,l);return d}}function Ht(e,t,n,r,o){var i=_e(e);return i.fnContext=n,i.fnOptions=r,t.slot&&((i.data||(i.data={})).slot=t.slot),i}function Kt(e,t){for(var n in t)e[S(n)]=t[n]}Yt(Vt.prototype);var zt={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;zt.prepatch(n,n)}else{var r=e.componentInstance=Xt(e,On);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;Nn(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(Cn(n,"onServiceCreated"),Cn(n,"onServiceAttached"),n._isMounted=!0,Cn(n,"mounted")),e.data.keepAlive&&(t._isMounted?Yn(n):Dn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Pn(t,!0):t.$destroy())}},Jt=Object.keys(zt);function Qt(e,t,n,a,s){if(!r(e)){var c=n.$options._base;if(u(e)&&(e=c.extend(e)),"function"===typeof e){var f;if(r(e.cid)&&(f=e,e=yn(f,c),void 0===e))return dn(f,t,n,a,s);t=t||{},hr(e),o(t.model)&&tn(e.options,t);var l=gt(t,e,s,n);if(i(e.options.functional))return Gt(e,l,t,n,a);var p=t.on;if(t.on=t.nativeOn,i(e.options.abstract)){var h=t.slot;t={},h&&(t.slot=h)}Zt(t);var d=e.options.name||s,y=new de("vue-component-"+e.cid+(d?"-"+d:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:l,listeners:p,tag:s,children:a},f);return y}}}function Xt(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return o(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function Zt(e){for(var t=e.hook||(e.hook={}),n=0;n<Jt.length;n++){var r=Jt[n],o=t[r],i=zt[r];o===i||o&&o._merged||(t[r]=o?en(i,o):i)}}function en(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function tn(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var i=t.on||(t.on={}),a=i[r],s=t.model.callback;o(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(i[r]=[s].concat(a)):i[r]=s}var nn=1,rn=2;function on(e,t,n,r,o,a){return(Array.isArray(n)||s(n))&&(o=r,r=n,n=void 0),i(a)&&(o=rn),an(e,t,n,r,o)}function an(e,t,n,r,i){if(o(n)&&o(n.__ob__))return ge();if(o(n)&&o(n.is)&&(t=n.is),!t)return ge();var a,s,u;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),i===rn?r=mt(r):i===nn&&(r=_t(r)),"string"===typeof t)?(s=e.$vnode&&e.$vnode.ns||W.getTagNamespace(t),a=W.isReservedTag(t)?new de(W.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!o(u=Ye(e.$options,"components",t))?new de(t,n,r,void 0,void 0,e):Qt(u,n,e,r,t)):a=Qt(t,n,e,r);return Array.isArray(a)?a:o(a)?(o(s)&&sn(a,s),o(n)&&un(n),a):ge()}function sn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),o(e.children))for(var a=0,s=e.children.length;a<s;a++){var u=e.children[a];o(u.tag)&&(r(u.ns)||i(n)&&"svg"!==u.tag)&&sn(u,t,n)}}function un(e){u(e.style)&&ft(e.style),u(e.class)&&ft(e.class)}function cn(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,o=r&&r.context;e.$slots=At(t._renderChildren,o),e.$scopedSlots=n,e._c=function(t,n,r,o){return on(e,t,n,r,o,!1)},e.$createElement=function(t,n,r,o){return on(e,t,n,r,o,!0)};var i=r&&r.data;Re(e,"$attrs",i&&i.attrs||n,null,!0),Re(e,"$listeners",t._parentListeners||n,null,!0)}var fn,ln=null;function pn(e){Yt(e.prototype),e.prototype.$nextTick=function(e){return ut(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,o=n._parentVnode;o&&(t.$scopedSlots=Tt(o.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=o;try{ln=t,e=r.call(t._renderProxy,t.$createElement)}catch(no){Je(no,t,"render"),e=t._vnode}finally{ln=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof de||(e=ge()),e.parent=o,e}}function hn(e,t){return(e.__esModule||ue&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function dn(e,t,n,r,o){var i=ge();return i.asyncFactory=e,i.asyncMeta={data:t,context:n,children:r,tag:o},i}function yn(e,t){if(i(e.error)&&o(e.errorComp))return e.errorComp;if(o(e.resolved))return e.resolved;var n=ln;if(n&&o(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),i(e.loading)&&o(e.loadingComp))return e.loadingComp;if(n&&!o(e.owners)){var a=e.owners=[n],s=!0,c=null,f=null;n.$on("hook:destroyed",(function(){return _(a,n)}));var l=function(e){for(var t=0,n=a.length;t<n;t++)a[t].$forceUpdate();e&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==f&&(clearTimeout(f),f=null))},p=j((function(n){e.resolved=hn(n,t),s?a.length=0:l(!0)})),d=j((function(t){o(e.errorComp)&&(e.error=!0,l(!0))})),y=e(p,d);return u(y)&&(h(y)?r(e.resolved)&&y.then(p,d):h(y.component)&&(y.component.then(p,d),o(y.error)&&(e.errorComp=hn(y.error,t)),o(y.loading)&&(e.loadingComp=hn(y.loading,t),0===y.delay?e.loading=!0:c=setTimeout((function(){c=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,l(!1))}),y.delay||200)),o(y.timeout)&&(f=setTimeout((function(){f=null,r(e.resolved)&&d(null)}),y.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}function gn(e){return e.isComment&&e.asyncFactory}function vn(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(o(n)&&(o(n.componentOptions)||gn(n)))return n}}function _n(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&wn(e,t)}function mn(e,t){fn.$on(e,t)}function bn(e,t){fn.$off(e,t)}function En(e,t){var n=fn;return function r(){var o=t.apply(null,arguments);null!==o&&n.$off(e,r)}}function wn(e,t,n){fn=e,dt(t,n||{},mn,bn,En,e),fn=void 0}function Sn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var o=0,i=e.length;o<i;o++)r.$on(e[o],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,o=e.length;r<o;r++)n.$off(e[r],t);return n}var i,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;var s=a.length;while(s--)if(i=a[s],i===t||i.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?D(n):n;for(var r=D(arguments,1),o='event handler for "'+e+'"',i=0,a=n.length;i<a;i++)Qe(n[i],t,r,t,o)}return t}}var On=null;function An(e){var t=On;return On=e,function(){On=t}}function In(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Tn(e){e.prototype._update=function(e,t){var n=this,r=n.$el,o=n._vnode,i=An(n);n._vnode=e,n.$el=o?n.__patch__(o,e):n.__patch__(n.$el,e,t,!1),i(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Cn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||_(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Cn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Nn(e,t,r,o,i){var a=o.data.scopedSlots,s=e.$scopedSlots,u=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),c=!!(i||e.$options._renderChildren||u);if(e.$options._parentVnode=o,e.$vnode=o,e._vnode&&(e._vnode.parent=o),e.$options._renderChildren=i,e.$attrs=o.data.attrs||n,e.$listeners=r||n,t&&e.$options.props){Oe(!1);for(var f=e._props,l=e.$options._propKeys||[],p=0;p<l.length;p++){var h=l[p],d=e.$options.props;f[h]=Ve(h,d,t,e)}Oe(!0),e.$options.propsData=t}e._$updateProperties&&e._$updateProperties(e),r=r||n;var y=e.$options._parentListeners;e.$options._parentListeners=r,wn(e,r,y),c&&(e.$slots=At(i,o.context),e.$forceUpdate())}function Rn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Dn(e,t){if(t){if(e._directInactive=!1,Rn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Dn(e.$children[n]);Cn(e,"activated")}}function Pn(e,t){if((!t||(e._directInactive=!0,!Rn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Pn(e.$children[n]);Cn(e,"deactivated")}}function Cn(e,t){pe();var n=e.$options[t],r=t+" hook";if(n)for(var o=0,i=n.length;o<i;o++)Qe(n[o],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),he()}var Ln=[],Bn=[],Mn={},xn=!1,kn=!1,jn=0;function Un(){jn=Ln.length=Bn.length=0,Mn={},xn=kn=!1}var $n=Date.now;if(z&&!Z){var Wn=window.performance;Wn&&"function"===typeof Wn.now&&$n()>document.createEvent("Event").timeStamp&&($n=function(){return Wn.now()})}function Fn(){var e,t;for($n(),kn=!0,Ln.sort((function(e,t){return e.id-t.id})),jn=0;jn<Ln.length;jn++)e=Ln[jn],e.before&&e.before(),t=e.id,Mn[t]=null,e.run();var n=Bn.slice(),r=Ln.slice();Un(),Vn(n),qn(r),ie&&W.devtools&&ie.emit("flush")}function qn(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Cn(r,"updated")}}function Yn(e){e._inactive=!1,Bn.push(e)}function Vn(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Dn(e[t],!0)}function Gn(e){var t=e.id;if(null==Mn[t]){if(Mn[t]=!0,kn){var n=Ln.length-1;while(n>jn&&Ln[n].id>e.id)n--;Ln.splice(n+1,0,e)}else Ln.push(e);xn||(xn=!0,ut(Fn))}}var Hn=0,Kn=function(e,t,n,r,o){this.vm=e,o&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Hn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new se,this.newDepIds=new se,this.expression="","function"===typeof t?this.getter=t:(this.getter=G(t),this.getter||(this.getter=L)),this.value=this.lazy?void 0:this.get()};Kn.prototype.get=function(){var e;pe(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(no){if(!this.user)throw no;Je(no,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ft(e),he(),this.cleanupDeps()}return e},Kn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Kn.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Kn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Gn(this)},Kn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(no){Je(no,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},Kn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Kn.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},Kn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||_(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var zn={enumerable:!0,configurable:!0,get:L,set:L};function Jn(e,t,n){zn.get=function(){return this[t][n]},zn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,zn)}function Qn(e){e._watchers=[];var t=e.$options;t.props&&Xn(e,t.props),t.methods&&ar(e,t.methods),t.data?Zn(e):Ne(e._data={},!0),t.computed&&nr(e,t.computed),t.watch&&t.watch!==ne&&sr(e,t.watch)}function Xn(e,t){var n=e.$options.propsData||{},r=e._props={},o=e.$options._propKeys=[],i=!e.$parent;i||Oe(!1);var a=function(i){o.push(i);var a=Ve(i,t,n,e);Re(r,i,a),i in e||Jn(e,"_props",i)};for(var s in t)a(s);Oe(!0)}function Zn(e){var t=e.$options.data;t=e._data="function"===typeof t?er(t,e):t||{},f(t)||(t={});var n=Object.keys(t),r=e.$options.props,o=(e.$options.methods,n.length);while(o--){var i=n[o];0,r&&b(r,i)||q(i)||Jn(e,"_data",i)}Ne(t,!0)}function er(e,t){pe();try{return e.call(t,t)}catch(no){return Je(no,t,"data()"),{}}finally{he()}}var tr={lazy:!0};function nr(e,t){var n=e._computedWatchers=Object.create(null),r=oe();for(var o in t){var i=t[o],a="function"===typeof i?i:i.get;0,r||(n[o]=new Kn(e,a||L,L,tr)),o in e||rr(e,o,i)}}function rr(e,t,n){var r=!oe();"function"===typeof n?(zn.get=r?or(t):ir(n),zn.set=L):(zn.get=n.get?r&&!1!==n.cache?or(t):ir(n.get):L,zn.set=n.set||L),Object.defineProperty(e,t,zn)}function or(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),le.SharedObject.target&&t.depend(),t.value}}function ir(e){return function(){return e.call(this,this)}}function ar(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?L:R(t[n],e)}function sr(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var o=0;o<r.length;o++)ur(e,n,r[o]);else ur(e,n,r)}}function ur(e,t,n,r){return f(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function cr(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=De,e.prototype.$delete=Pe,e.prototype.$watch=function(e,t,n){var r=this;if(f(t))return ur(r,e,t,n);n=n||{},n.user=!0;var o=new Kn(r,e,t,n);if(n.immediate)try{t.call(r,o.value)}catch(i){Je(i,r,'callback for immediate watcher "'+o.expression+'"')}return function(){o.teardown()}}}var fr=0;function lr(e){e.prototype._init=function(e){var t=this;t._uid=fr++,t._isVue=!0,e&&e._isComponent?pr(t,e):t.$options=qe(hr(t.constructor),e||{},t),t._renderProxy=t,t._self=t,In(t),_n(t),cn(t),Cn(t,"beforeCreate"),!t._$fallback&&St(t),Qn(t),!t._$fallback&&wt(t),!t._$fallback&&Cn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function pr(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var o=r.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function hr(e){var t=e.options;if(e.super){var n=hr(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var o=dr(e);o&&P(e.extendOptions,o),t=e.options=qe(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function dr(e){var t,n=e.options,r=e.sealedOptions;for(var o in n)n[o]!==r[o]&&(t||(t={}),t[o]=n[o]);return t}function yr(e){this._init(e)}function gr(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=D(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function vr(e){e.mixin=function(e){return this.options=qe(this.options,e),this}}function _r(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,o=e._Ctor||(e._Ctor={});if(o[r])return o[r];var i=e.name||n.options.name;var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=qe(n.options,e),a["super"]=n,a.options.props&&mr(a),a.options.computed&&br(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,U.forEach((function(e){a[e]=n[e]})),i&&(a.options.components[i]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=P({},a.options),o[r]=a,a}}function mr(e){var t=e.options.props;for(var n in t)Jn(e.prototype,"_props",n)}function br(e){var t=e.options.computed;for(var n in t)rr(e.prototype,n,t[n])}function Er(e){U.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&f(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function wr(e){return e&&(e.Ctor.options.name||e.tag)}function Sr(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!l(e)&&e.test(t)}function Or(e,t){var n=e.cache,r=e.keys,o=e._vnode;for(var i in n){var a=n[i];if(a){var s=wr(a.componentOptions);s&&!t(s)&&Ar(n,i,r,o)}}}function Ar(e,t,n,r){var o=e[t];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),e[t]=null,_(n,t)}lr(yr),cr(yr),Sn(yr),Tn(yr),pn(yr);var Ir=[String,RegExp,Array],Tr={name:"keep-alive",abstract:!0,props:{include:Ir,exclude:Ir,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Ar(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){Or(e,(function(e){return Sr(t,e)}))})),this.$watch("exclude",(function(t){Or(e,(function(e){return!Sr(t,e)}))}))},render:function(){var e=this.$slots.default,t=vn(e),n=t&&t.componentOptions;if(n){var r=wr(n),o=this,i=o.include,a=o.exclude;if(i&&(!r||!Sr(i,r))||a&&r&&Sr(a,r))return t;var s=this,u=s.cache,c=s.keys,f=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;u[f]?(t.componentInstance=u[f].componentInstance,_(c,f),c.push(f)):(u[f]=t,c.push(f),this.max&&c.length>parseInt(this.max)&&Ar(u,c[0],c,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Nr={KeepAlive:Tr};function Rr(e){var t={get:function(){return W}};Object.defineProperty(e,"config",t),e.util={warn:ce,extend:P,mergeOptions:qe,defineReactive:Re},e.set=De,e.delete=Pe,e.nextTick=ut,e.observable=function(e){return Ne(e),e},e.options=Object.create(null),U.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,P(e.options.components,Nr),gr(e),vr(e),_r(e),Er(e)}Rr(yr),Object.defineProperty(yr.prototype,"$isServer",{get:oe}),Object.defineProperty(yr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(yr,"FunctionalRenderContext",{value:Vt}),yr.version="2.6.11";var Dr="[object Array]",Pr="[object Object]";function Cr(e,t){var n={};return Lr(e,t),Br(e,t,"",n),n}function Lr(e,t){if(e!==t){var n=xr(e),r=xr(t);if(n==Pr&&r==Pr){if(Object.keys(e).length>=Object.keys(t).length)for(var o in t){var i=e[o];void 0===i?e[o]=null:Lr(i,t[o])}}else n==Dr&&r==Dr&&e.length>=t.length&&t.forEach((function(t,n){Lr(e[n],t)}))}}function Br(e,t,n,r){if(e!==t){var o=xr(e),i=xr(t);if(o==Pr)if(i!=Pr||Object.keys(e).length<Object.keys(t).length)Mr(r,n,e);else{var a=function(o){var i=e[o],a=t[o],s=xr(i),u=xr(a);if(s!=Dr&&s!=Pr)i!==t[o]&&Mr(r,(""==n?"":n+".")+o,i);else if(s==Dr)u!=Dr||i.length<a.length?Mr(r,(""==n?"":n+".")+o,i):i.forEach((function(e,t){Br(e,a[t],(""==n?"":n+".")+o+"["+t+"]",r)}));else if(s==Pr)if(u!=Pr||Object.keys(i).length<Object.keys(a).length)Mr(r,(""==n?"":n+".")+o,i);else for(var c in i)Br(i[c],a[c],(""==n?"":n+".")+o+"."+c,r)};for(var s in e)a(s)}else o==Dr?i!=Dr||e.length<t.length?Mr(r,n,e):e.forEach((function(e,o){Br(e,t[o],n+"["+o+"]",r)})):Mr(r,n,e)}}function Mr(e,t,n){e[t]=n}function xr(e){return Object.prototype.toString.call(e)}function kr(e){if(e.__next_tick_callbacks&&e.__next_tick_callbacks.length){if(Object({NODE_ENV:"production",VUE_APP_NAME:"升阶助手",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG){var t=e.$scope;console.log("["+ +new Date+"]["+(t.is||t.route)+"]["+e._uid+"]:flushCallbacks["+e.__next_tick_callbacks.length+"]")}var n=e.__next_tick_callbacks.slice(0);e.__next_tick_callbacks.length=0;for(var r=0;r<n.length;r++)n[r]()}}function jr(e){return Ln.find((function(t){return e._watcher===t}))}function Ur(e,t){if(!e.__next_tick_pending&&!jr(e)){if(Object({NODE_ENV:"production",VUE_APP_NAME:"升阶助手",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG){var n=e.$scope;console.log("["+ +new Date+"]["+(n.is||n.route)+"]["+e._uid+"]:nextVueTick")}return ut(t,e)}if(Object({NODE_ENV:"production",VUE_APP_NAME:"升阶助手",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG){var r=e.$scope;console.log("["+ +new Date+"]["+(r.is||r.route)+"]["+e._uid+"]:nextMPTick")}var o;if(e.__next_tick_callbacks||(e.__next_tick_callbacks=[]),e.__next_tick_callbacks.push((function(){if(t)try{t.call(e)}catch(no){Je(no,e,"nextTick")}else o&&o(e)})),!t&&"undefined"!==typeof Promise)return new Promise((function(e){o=e}))}function $r(e){var t=Object.create(null),n=[].concat(Object.keys(e._data||{}),Object.keys(e._computedWatchers||{}));n.reduce((function(t,n){return t[n]=e[n],t}),t);var r=e.__composition_api_state__||e.__secret_vfa_state__,o=r&&r.rawBindings;return o&&Object.keys(o).forEach((function(n){t[n]=e[n]})),Object.assign(t,e.$mp.data||{}),Array.isArray(e.$options.behaviors)&&-1!==e.$options.behaviors.indexOf("uni://form-field")&&(t["name"]=e.name,t["value"]=e.value),JSON.parse(JSON.stringify(t))}var Wr=function(e,t){var n=this;if(null!==t&&("page"===this.mpType||"component"===this.mpType)){var r=this.$scope,o=Object.create(null);try{o=$r(this)}catch(s){console.error(s)}o.__webviewId__=r.data.__webviewId__;var i=Object.create(null);Object.keys(o).forEach((function(e){i[e]=r.data[e]}));var a=!1===this.$shouldDiffData?o:Cr(o,i);Object.keys(a).length?(Object({NODE_ENV:"production",VUE_APP_NAME:"升阶助手",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG&&console.log("["+ +new Date+"]["+(r.is||r.route)+"]["+this._uid+"]差量更新",JSON.stringify(a)),this.__next_tick_pending=!0,r.setData(a,(function(){n.__next_tick_pending=!1,kr(n)}))):kr(this)}};function Fr(){}function qr(e,t,n){if(!e.mpType)return e;"app"===e.mpType&&(e.$options.render=Fr),e.$options.render||(e.$options.render=Fr),!e._$fallback&&Cn(e,"beforeMount");var r=function(){e._update(e._render(),n)};return new Kn(e,r,L,{before:function(){e._isMounted&&!e._isDestroyed&&Cn(e,"beforeUpdate")}},!0),n=!1,e}function Yr(e,t){return o(e)||o(t)?Vr(e,Gr(t)):""}function Vr(e,t){return e?t?e+" "+t:e:t||""}function Gr(e){return Array.isArray(e)?Hr(e):u(e)?Kr(e):"string"===typeof e?e:""}function Hr(e){for(var t,n="",r=0,i=e.length;r<i;r++)o(t=Gr(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function Kr(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var zr=E((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function Jr(e){return Array.isArray(e)?C(e):"string"===typeof e?zr(e):e}var Qr=["createSelectorQuery","createIntersectionObserver","selectAllComponents","selectComponent"];function Xr(e,t){var n=t.split("."),r=n[0];return 0===r.indexOf("__$n")&&(r=parseInt(r.replace("__$n",""))),1===n.length?e[r]:Xr(e[r],n.slice(1).join("."))}function Zr(e){e.config.errorHandler=function(t,n,r){e.util.warn("Error in "+r+': "'+t.toString()+'"',n),console.error(t);var o="function"===typeof getApp&&getApp();o&&o.onError&&o.onError(t)};var t=e.prototype.$emit;e.prototype.$emit=function(e){return this.$scope&&e&&this.$scope["triggerEvent"](e,{__args__:D(arguments,1)}),t.apply(this,arguments)},e.prototype.$nextTick=function(e){return Ur(this,e)},Qr.forEach((function(t){e.prototype[t]=function(e){return this.$scope&&this.$scope[t]?this.$scope[t](e):"undefined"!==typeof my?"createSelectorQuery"===t?my.createSelectorQuery(e):"createIntersectionObserver"===t?my.createIntersectionObserver(e):void 0:void 0}})),e.prototype.__init_provide=wt,e.prototype.__init_injections=St,e.prototype.__call_hook=function(e,t){var n=this;pe();var r,o=n.$options[e],i=e+" hook";if(o)for(var a=0,s=o.length;a<s;a++)r=Qe(o[a],n,t?[t]:null,n,i);return n._hasHookEvent&&n.$emit("hook:"+e,t),he(),r},e.prototype.__set_model=function(e,t,n,r){Array.isArray(r)&&(-1!==r.indexOf("trim")&&(n=n.trim()),-1!==r.indexOf("number")&&(n=this._n(n))),e||(e=this),e[t]=n},e.prototype.__set_sync=function(e,t,n){e||(e=this),e[t]=n},e.prototype.__get_orig=function(e){return f(e)&&e["$orig"]||e},e.prototype.__get_value=function(e,t){return Xr(t||this,e)},e.prototype.__get_class=function(e,t){return Yr(t,e)},e.prototype.__get_style=function(e,t){if(!e&&!t)return"";var n=Jr(e),r=t?P(t,n):n;return Object.keys(r).map((function(e){return I(e)+":"+r[e]})).join(";")},e.prototype.__map=function(e,t){var n,r,o,i,a;if(Array.isArray(e)){for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);return n}if(u(e)){for(i=Object.keys(e),n=Object.create(null),r=0,o=i.length;r<o;r++)a=i[r],n[a]=t(e[a],a,r);return n}if("number"===typeof e){for(n=new Array(e),r=0,o=e;r<o;r++)n[r]=t(r,r);return n}return[]}}var eo=["onLaunch","onShow","onHide","onUniNViewMessage","onPageNotFound","onThemeChange","onError","onUnhandledRejection","onInit","onLoad","onReady","onUnload","onPullDownRefresh","onReachBottom","onTabItemTap","onAddToFavorites","onShareTimeline","onShareAppMessage","onResize","onPageScroll","onNavigationBarButtonTap","onBackPress","onNavigationBarSearchInputChanged","onNavigationBarSearchInputConfirmed","onNavigationBarSearchInputClicked","onPageShow","onPageHide","onPageResize"];function to(e){var t=e.extend;e.extend=function(e){e=e||{};var n=e.methods;return n&&Object.keys(n).forEach((function(t){-1!==eo.indexOf(t)&&(e[t]=n[t],delete n[t])})),t.call(this,e)};var n=e.config.optionMergeStrategies,r=n.created;eo.forEach((function(e){n[e]=r})),e.prototype.__lifecycle_hooks__=eo}yr.prototype.__patch__=Wr,yr.prototype.$mount=function(e,t){return qr(this,e,t)},to(yr),Zr(yr),t["default"]=yr}.call(this,n("c8ba"))},6776:function(e,t){},6958:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineString=void 0;var r=n("1f74"),o=n("6f5e"),i=n("7319");function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(t){if(f(this,e),!(0,i.isArray)(t))throw new TypeError('"points" must be of type Point[]. Received type '.concat(typeof t));if(t.length<2)throw new Error('"points" must contain 2 points at least');t.forEach((function(e){if(!(e instanceof o.Point))throw new TypeError('"points" must be of type Point[]. Received type '.concat(typeof e,"[]"))})),this.points=t}return p(e,[{key:"parse",value:function(e){return c({},e,{type:"LineString",coordinates:this.points.map((function(e){return e.toJSON().coordinates}))})}},{key:"toJSON",value:function(){return{type:"LineString",coordinates:this.points.map((function(e){return e.toJSON().coordinates}))}}},{key:"_internalType",get:function(){return r.SYMBOL_GEO_LINE_STRING}}],[{key:"validate",value:function(e){if("LineString"!==e.type||!(0,i.isArray)(e.coordinates))return!1;var t,n=a(e.coordinates);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!(0,i.isNumber)(r[0])||!(0,i.isNumber)(r[1]))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}},{key:"isClosed",value:function(e){var t=e.points[0],n=e.points[e.points.length-1];if(t.latitude===n.latitude&&t.longitude===n.longitude)return!0}}]),e}();t.LineString=h},"6c71":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Polygon=void 0;var r=n("1f74"),o=n("7319"),i=n("6958");function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(t){if(f(this,e),!(0,o.isArray)(t))throw new TypeError('"lines" must be of type LineString[]. Received type '.concat(typeof t));if(0===t.length)throw new Error("Polygon must contain 1 linestring at least");t.forEach((function(e){if(!(e instanceof i.LineString))throw new TypeError('"lines" must be of type LineString[]. Received type '.concat(typeof e,"[]"));if(!i.LineString.isClosed(e))throw new Error("LineString ".concat(e.points.map((function(e){return e.toReadableString()}))," is not a closed cycle"))})),this.lines=t}return p(e,[{key:"parse",value:function(e){return c({},e,{type:"Polygon",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))})}},{key:"toJSON",value:function(){return{type:"Polygon",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}}},{key:"_internalType",get:function(){return r.SYMBOL_GEO_POLYGON}}],[{key:"validate",value:function(e){if("Polygon"!==e.type||!(0,o.isArray)(e.coordinates))return!1;var t,n=a(e.coordinates);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.isCloseLineString(r))return!1;var i,s=a(r);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(!(0,o.isNumber)(u[0])||!(0,o.isNumber)(u[1]))return!1}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}return!0}},{key:"isCloseLineString",value:function(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]}}]),e}();t.Polygon=h},"6f5e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;var r=n("9911"),o=n("1f74"),i=n("7319");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var f=function(){function e(t,n){s(this,e),r.Validate.isGeopoint("longitude",t),r.Validate.isGeopoint("latitude",n),this.longitude=t,this.latitude=n}return c(e,[{key:"parse",value:function(e){return a({},e,{type:"Point",coordinates:[this.longitude,this.latitude]})}},{key:"toJSON",value:function(){return{type:"Point",coordinates:[this.longitude,this.latitude]}}},{key:"toReadableString",value:function(){return"[".concat(this.longitude,",").concat(this.latitude,"]")}},{key:"_internalType",get:function(){return o.SYMBOL_GEO_POINT}}],[{key:"validate",value:function(e){return"Point"===e.type&&(0,i.isArray)(e.coordinates)&&r.Validate.isGeopoint("longitude",e.coordinates[0])&&r.Validate.isGeopoint("latitude",e.coordinates[1])}}]),e}();t.Point=f},"6fe9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("6f5e");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var o=n("6958");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}));var i=n("6c71");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var a=n("282d");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}));var s=n("3a5e");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}));var u=n("abb0");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})}))},7145:function(e){e.exports=JSON.parse('{"name":"@cloudbase/js-sdk","version":"1.5.1","description":"cloudbase javascript sdk","main":"dist/index.cjs.js","module":"dist/index.esm.js","miniprogram":"miniprogram_dist","typings":"./index.d.ts","scripts":{"lint":"eslint --fix \\"./src/**/*.ts\\" \\"./database/**/*.ts\\"","build":"rm -rf dist/ && gulp build","build:cdn":"gulp cdn","build:miniapp":"gulp miniapp","build:e2e":"rm -rf dist/ && NODE_ENV=e2e gulp e2e"},"publishConfig":{"access":"public"},"repository":{"type":"git","url":"https://github.com/TencentCloudBase/cloudbase-js-sdk"},"keywords":["tcb","cloudbase","Cloudbase","serverless","Serverless","javascript","JavaScript"],"files":["miniprogram_dist","**/dist/","/index.d.ts","**/package.json"],"components":["app","auth","database","functions","storage"],"author":"","license":"ISC","dependencies":{"@cloudbase/analytics":"^1.1.1-alpha.0","@cloudbase/app":"^1.3.1","@cloudbase/auth":"^1.4.1","@cloudbase/database":"0.9.18-next","@cloudbase/functions":"^1.3.1-alpha.0","@cloudbase/realtime":"^1.1.4-alpha.0","@cloudbase/storage":"^1.3.1-alpha.0","@cloudbase/types":"^1.1.3-alpha.0","@cloudbase/utilities":"^1.3.1-alpha.0"},"devDependencies":{"@babel/core":"^7.9.0","@babel/plugin-proposal-class-properties":"^7.8.3","@babel/plugin-transform-runtime":"^7.9.0","@babel/preset-env":"^7.9.5","@babel/preset-typescript":"^7.9.0","@typescript-eslint/eslint-plugin":"^3.8.0","@typescript-eslint/parser":"^3.8.0","awesome-typescript-loader":"^5.2.1","babel-loader":"^8.1.0","eslint":"^7.6.0","eslint-config-alloy":"^3.7.4","gulp":"^4.0.2","gulp-clean":"^0.4.0","gulp-rename":"^2.0.0","gulp-sourcemaps":"^2.6.5","gulp-typescript":"^6.0.0-alpha.1","json-loader":"^0.5.7","merge-stream":"^2.0.0","package-json-cleanup-loader":"^1.0.3","typescript":"^3.8.3","webpack":"4.41.3","webpack-cli":"^3.3.11","webpack-node-externals":"^1.7.2","webpack-stream":"^5.2.1","webpack-visualizer-plugin":"^0.1.11"},"browserslist":["last 2 version","> 1%","not dead","chrome 53"],"gitHead":"b48020bc063beb58e13360052be4bf80844c0c4d","__npminstall_done":"Thu Jul 01 2021 22:30:30 GMT+0800 (GMT+08:00)","_from":"@cloudbase/js-sdk@1.5.1","_resolved":"https://registry.nlark.com/@cloudbase/js-sdk/download/@cloudbase/js-sdk-1.5.1.tgz"}')},7319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPlainObject=t.isInternalObject=t.isRegExp=t.isDate=t.isArray=t.isFunction=t.isPromise=t.isNumber=t.isString=t.isObject=t.getType=void 0;var r=n("d4ea"),o=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()};t.getType=o;var i=function(e){return"object"===o(e)};t.isObject=i;var a=function(e){return"string"===o(e)};t.isString=a;var s=function(e){return"number"===o(e)};t.isNumber=s;var u=function(e){return"promise"===o(e)};t.isPromise=u;var c=function(e){return"function"===typeof e};t.isFunction=c;var f=function(e){return Array.isArray(e)};t.isArray=f;var l=function(e){return"date"===o(e)};t.isDate=l;var p=function(e){return"regexp"===o(e)};t.isRegExp=p;var h=function(e){return e&&e._internalType instanceof r.InternalSymbol};t.isInternalObject=h;var d=function(e){if("object"!==typeof e||null===e)return!1;var t=e;while(null!==Object.getPrototypeOf(t))t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};t.isPlainObject=d},7478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerDateConstructor=u,t.ServerDate=void 0;var r=n("1f74");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.offset,r=void 0===n?0:n;o(this,e),this.offset=r}return a(e,[{key:"parse",value:function(){return{$tcb_server_date:{offset:this.offset}}}},{key:"_internalType",get:function(){return r.SYMBOL_SERVER_DATE}}]),e}();function u(e){return new s(e)}t.ServerDate=s},7484:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Snapshot=void 0;var o=function e(t){r(this,e);var n,o,i=t.id,a=t.docChanges,s=t.docs,u=t.msgType,c=t.type;Object.defineProperties(this,{id:{get:function(){return i},enumerable:!0},docChanges:{get:function(){return n||(n=JSON.parse(JSON.stringify(a))),n},enumerable:!0},docs:{get:function(){return o||(o=JSON.parse(JSON.stringify(s))),o},enumerable:!0},msgType:{get:function(){return u},enumerable:!0},type:{get:function(){return c},enumerable:!0}})};t.Snapshot=o},"752b":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function i(e){var t=f();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){var t="function"===typeof Map?new Map:void 0;return u=function(e){if(null===e||!l(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},u(e)}function c(e,t,n){return c=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),i=new o;return n&&p(i,n.prototype),i},c.apply(null,arguments)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isRealtimeErrorMessageError=t.RealtimeErrorMessageError=void 0;var d=function(e){o(n,e);var t=i(n);function n(e){var o;return r(this,n),o=t.call(this,"Watch Error ".concat(JSON.stringify(e.msgData)," (requestid: ").concat(e.requestId,")")),o.isRealtimeErrorMessageError=!0,o.payload=e,o}return n}(u(Error));t.RealtimeErrorMessageError=d;var y=function(e){return e&&e.isRealtimeErrorMessageError};t.isRealtimeErrorMessageError=y},7562:function(e,t,n){"use strict";(function(e){var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CloudbaseCache=void 0;var a=n("58ef"),s=n("2365"),u=n("e032"),c=function(e){function t(t){var n=e.call(this)||this;return n._root=t,t["tcbCacheObject"]||(t["tcbCacheObject"]={}),n}return r(t,e),t.prototype.setItem=function(e,t){this._root["tcbCacheObject"][e]=t},t.prototype.getItem=function(e){return this._root["tcbCacheObject"][e]},t.prototype.removeItem=function(e){delete this._root["tcbCacheObject"][e]},t.prototype.clear=function(){delete this._root["tcbCacheObject"]},t}(a.AbstractStorage);function f(e,t){switch(e){case"local":return t.localStorage?t.localStorage:(s.printWarn(u.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new c(t.root));case"none":return new c(t.root);case"session":return t.sessionStorage?t.sessionStorage:(s.printWarn(u.ERRORS.INVALID_PARAMS,"sessionStorage is not supported on current platform"),new c(t.root));default:return t.localStorage?t.localStorage:(s.printWarn(u.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new c(t.root))}}var l=function(){function t(e){this.keys={};var t=e.persistence,n=e.platformInfo,r=void 0===n?{}:n,o=e.keys,i=void 0===o?{}:o,a=e.alwaysLocalKeys,s=void 0===a?[]:a;this._platformInfo=r,this._alwaysLocalKeys=s,this._storage||(this._persistence=r.adapter.primaryStorage||t,this._storage=f(this._persistence,r.adapter),this.keys=i)}return Object.defineProperty(t.prototype,"mode",{get:function(){return this._storage.mode||"sync"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"persistence",{get:function(){return this._persistence},enumerable:!1,configurable:!0}),t.prototype.updatePersistence=function(e){if("async"!==this.mode){if(e!==this._persistence){var t="local"===this._persistence;this._persistence=e;var n=f(e,this._platformInfo.adapter);for(var r in this.keys){var o=this.keys[r];if(!t||!this._alwaysLocalKeys.includes(r)){var i=this._storage.getItem(o);s.isUndefined(i)||s.isNull(i)||(n.setItem(o,i),this._storage.removeItem(o))}}this._storage=n}}else s.printWarn(u.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use updatePersistenceAsync insteed")},t.prototype.updatePersistenceAsync=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,a,u,c,l;return i(this,(function(i){switch(i.label){case 0:if(e===this._persistence)return[2];for(o in t="local"===this._persistence,this._persistence=e,n=f(e,this._platformInfo.adapter),r=[],this.keys)r.push(o);a=0,i.label=1;case 1:return a<r.length?(u=r[a],c=this.keys[u],t&&this._alwaysLocalKeys.includes(u)?[3,4]:[4,this._storage.getItem(c)]):[3,5];case 2:return l=i.sent(),s.isUndefined(l)||s.isNull(l)?[3,4]:(n.setItem(c,l),[4,this._storage.removeItem(c)]);case 3:i.sent(),i.label=4;case 4:return a++,[3,1];case 5:return this._storage=n,[2]}}))}))},t.prototype.setStore=function(e,t,n){if("async"!==this.mode){if(this._storage)try{var r={version:n||"localCachev1",content:t};this._storage.setItem(e,JSON.stringify(r))}catch(o){throw new Error(JSON.stringify({code:u.ERRORS.OPERATION_FAIL,msg:"["+u.getSdkName()+"]["+u.ERRORS.OPERATION_FAIL+"]setStore failed",info:o}))}}else s.printWarn(u.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use setStoreAsync insteed")},t.prototype.setStoreAsync=function(e,t,n){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:if(!this._storage)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),r={version:n||"localCachev1",content:t},[4,this._storage.setItem(e,JSON.stringify(r))];case 2:return o.sent(),[3,4];case 3:return o.sent(),[2];case 4:return[2]}}))}))},t.prototype.getStore=function(t,n){var r;if("async"!==this.mode){try{if("undefined"!==typeof e&&(null===(r=Object({NODE_ENV:"production",VUE_APP_NAME:"升阶助手",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}))||void 0===r?void 0:r.tcb_token))return Object({NODE_ENV:"production",VUE_APP_NAME:"升阶助手",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).tcb_token;if(!this._storage)return""}catch(a){return""}n=n||"localCachev1";var o=this._storage.getItem(t);if(!o)return"";if(o.indexOf(n)>=0){var i=JSON.parse(o);return i.content}return""}s.printWarn(u.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use getStoreAsync insteed")},t.prototype.getStoreAsync=function(t,n){var r;return o(this,void 0,void 0,(function(){var o,a;return i(this,(function(i){switch(i.label){case 0:try{if("undefined"!==typeof e&&(null===(r=Object({NODE_ENV:"production",VUE_APP_NAME:"升阶助手",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}))||void 0===r?void 0:r.tcb_token))return[2,Object({NODE_ENV:"production",VUE_APP_NAME:"升阶助手",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).tcb_token];if(!this._storage)return[2,""]}catch(s){return[2,""]}return n=n||"localCachev1",[4,this._storage.getItem(t)];case 1:return o=i.sent(),o&&o.indexOf(n)>=0?(a=JSON.parse(o),[2,a.content]):[2,""]}}))}))},t.prototype.removeStore=function(e){"async"!==this.mode?this._storage.removeItem(e):s.printWarn(u.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use removeStoreAsync insteed")},t.prototype.removeStoreAsync=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._storage.removeItem(e)];case 1:return t.sent(),[2]}}))}))},t}();t.CloudbaseCache=l}).call(this,n("4362"))},"76d0":function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("59ad"),t)},"7a36":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0;var r={};t.Platform=r},"7ae2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneAuthProvider=void 0;var r=n("5fbe"),o=n("fd2f"),i=n("2707"),a=n("be7e"),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p=r.utils.throwError,h=r.utils.isString,d=r.utils.transformPhone,y=r.constants.ERRORS,g=r.constants.COMMUNITY_SITE_URL,v=r.helpers.catchErrorsDecorator,_={SIGNIN:"SIGNIN",SIGNUP:"SIGNUP"},m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.signIn=function(e){return f(this,void 0,void 0,(function(){var t,n,r,o,s,u,c,f,g;return l(this,(function(l){switch(l.label){case 0:return t=e.phoneNumber,n=e.phoneCode,r=e.password,o=e.signMethod,h(t)||p(y.INVALID_PARAMS,"phoneNumber must be a string"),h(n)||h(r)||p(y.INVALID_PARAMS,"phoneCode or password must be a string"),o||(o=_.SIGNIN),s=this._cache.keys.refreshTokenKey,[4,this._request.send("auth.signIn",{loginType:i.LOGINTYPE.PHONE,phoneNumber:d(t),phoneCode:n,password:r,refresh_token:this._cache.getStore(s)||"",signMethod:o})];case 1:return u=l.sent(),c=u.refresh_token,f=u.access_token,g=u.access_token_expire,c?[4,this.setRefreshToken(c)]:[3,8];case 2:return l.sent(),f&&g?[4,this.setAccessToken(f,g)]:[3,4];case 3:return l.sent(),[3,6];case 4:return[4,this._request.refreshAccessToken()];case 5:l.sent(),l.label=6;case 6:return[4,this.refreshUserInfo()];case 7:return l.sent(),a.eventBus.fire(a.EVENTS.LOGIN_STATE_CHANGED),a.eventBus.fire(a.EVENTS.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:i.LOGINTYPE.PHONE,persistence:this._config.persistence}),[2,new a.LoginState({envId:this._config.env,cache:this._cache,request:this._request})];case 8:u.code?p(y.OPERATION_FAIL,"Phone login fail["+u.code+"] "+u.message):p(y.OPERATION_FAIL,"Phone login fail"),l.label=9;case 9:return[2]}}))}))},t.prototype.signUp=function(e,t,n){return f(this,void 0,void 0,(function(){return l(this,(function(r){return[2,this.signIn({phoneNumber:e,phoneCode:t,password:n,signMethod:_.SIGNUP})]}))}))},u([v({title:"手机号登录失败",messages:["请确认以下各项：","  1 - 调用 auth().SmsAuthProvider() 的语法或参数是否正确","  2 - 当前环境是否开通了短信验证码登录","  3 - 短信验证码/密码是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+g]}),c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",Promise)],t.prototype,"signIn",null),u([v({title:"手机短信注册失败",messages:["请确认以下各项：","  1 - 调用 auth().signUpWithPhoneCode() 的语法或参数是否正确","  2 - 当前环境是否开通了短信验证码登录","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+g]}),c("design:type",Function),c("design:paramtypes",[String,String,String]),c("design:returntype",Promise)],t.prototype,"signUp",null),t}(o.AuthProvider);t.PhoneAuthProvider=m},"7b7a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initRequest=S,t.getRequestByEnvId=O,t.CloudbaseRequest=void 0;var r=n("1e0c"),o=n("5fbe"),i=n("a996"),a=n("c6a4"),s=n("a22f"),u=n("7a36"),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},f=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p=o.constants.ERRORS,h=o.utils.genSeqId,d=o.utils.isFormData,y=o.utils.formatUrl,g=o.utils.createSign,v=o.adapters.RUNTIME,_=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"];function m(e,t,n){var r=e[t];e[t]=function(t){var o={},i={};n.forEach((function(n){var r=n.call(e,t),a=r.data,s=r.headers;Object.assign(o,a),Object.assign(i,s)}));var a=t.data;return a&&function(){if(d(a))for(var e in o)a.append(e,o[e]);else t.data=c(c({},a),o)}(),t.headers=c(c({},t.headers||{}),i),r.call(e,t)}}function b(){var e=h();return{data:{seqId:e},headers:{"X-SDK-Version":"@cloudbase/js-sdk/"+(0,r.getSdkVersion)(),"x-seqid":e}}}var E=function(){function e(e){this._throwWhenRequestFail=!1,this.config=e,this._reqClass=new u.Platform.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:"[@cloudbase/js-sdk] 请求在"+this.config.timeout/1e3+"s内未完成，已中断",restrictedMethods:["post"]}),this._throwWhenRequestFail=e.throw||!1,this._cache=(0,a.getCacheByEnvId)(this.config.env),this._localCache=(0,a.getLocalCache)(this.config.env),m(this._reqClass,"post",[b]),m(this._reqClass,"upload",[b]),m(this._reqClass,"download",[b])}return e.prototype.post=function(e){return f(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return[4,this._reqClass.post(e)];case 1:return t=n.sent(),[2,t]}}))}))},e.prototype.upload=function(e){return f(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return[4,this._reqClass.upload(e)];case 1:return t=n.sent(),[2,t]}}))}))},e.prototype.download=function(e){return f(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return[4,this._reqClass.download(e)];case 1:return t=n.sent(),[2,t]}}))}))},e.prototype.refreshAccessToken=function(){return f(this,void 0,void 0,(function(){var e,t,n;return l(this,(function(r){switch(r.label){case 0:this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken()),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._refreshAccessTokenPromise];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),t=n,[3,4];case 4:if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return[2,e]}}))}))},e.prototype.getAccessToken=function(){return f(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,s,u,c;return l(this,(function(f){switch(f.label){case 0:return e=this._cache.keys,t=e.accessTokenKey,n=e.accessTokenExpireKey,r=e.refreshTokenKey,[4,this._cache.getStoreAsync(r)];case 1:if(o=f.sent(),!o)throw new Error(JSON.stringify({code:p.OPERATION_FAIL,msg:"refresh token is not exist, your local data might be messed up, please retry after clear localStorage or sessionStorage"}));return[4,this._cache.getStoreAsync(t)];case 2:return i=f.sent(),s=Number,[4,this._cache.getStoreAsync(n)];case 3:return a=s.apply(void 0,[f.sent()]),u=!0,c=this._shouldRefreshAccessTokenHook,c?[4,this._shouldRefreshAccessTokenHook(i,a)]:[3,5];case 4:c=!f.sent(),f.label=5;case 5:return c&&(u=!1),i&&a&&!(a<Date.now())||!u?[3,7]:[4,this.refreshAccessToken()];case 6:return[2,f.sent()];case 7:return[2,{accessToken:i,accessTokenExpire:a}]}}))}))},e.prototype.request=function(e,t,n){return f(this,void 0,void 0,(function(){var o,i,a,s,f,p,h,d,m,b,E,w,S,O,A,I,T,N,R,D,P,C,L,B,M,x,k;return l(this,(function(l){switch(l.label){case 0:return o="x-tcb-trace_"+this.config.env,i="application/x-www-form-urlencoded",a=c({action:e,dataVersion:r.DATA_VERSION,env:this.config.env},t),-1!==_.indexOf(e)?[3,3]:(s=this._cache.keys.refreshTokenKey,[4,this._cache.getStoreAsync(s)]);case 1:return f=l.sent(),f?(p=a,[4,this.getAccessToken()]):[3,3];case 2:p.access_token=l.sent().accessToken,l.label=3;case 3:if("storage.uploadFile"===e){for(d in h=new FormData,h)h.hasOwnProperty(d)&&void 0!==h[d]&&h.append(d,a[d]);i="multipart/form-data"}else for(d in i="application/json;charset=UTF-8",h={},a)void 0!==a[d]&&(h[d]=a[d]);return m={headers:{"content-type":i}},(null===n||void 0===n?void 0:n["onUploadProgress"])&&(m.onUploadProgress=n["onUploadProgress"]),this.config.region&&(m.headers["X-TCB-Region"]=this.config.region),b=this._localCache.getStore(o),b&&(m.headers["X-TCB-Trace"]=b),u.Platform.runtime!==v.WEB&&(E=this.config,w=E.appSign,S=E.appSecret,O=Date.now(),A=S.appAccessKey,I=S.appAccessKeyId,T=g({data:h,timestamp:O,appAccessKeyId:I,appSign:w},A),m.headers["X-TCB-App-Source"]="timestamp="+O+";appAccessKeyId="+I+";appSign="+w+";sign="+T),N=t.parse,R=t.inQuery,D=t.search,P={env:this.config.env},N&&(P.parse=!0),R&&(P=c(c({},R),P)),C=(0,r.getEndPoint)(),L=C.BASE_URL,B=C.PROTOCOL,M=y(B,L,P),D&&(M+=D),[4,this.post(c({url:M,data:h},m))];case 4:if(x=l.sent(),k=x.header&&x.header["x-tcb-trace"],k&&this._localCache.setStore(o,k),200!==Number(x.status)&&200!==Number(x.statusCode)||!x.data)throw new Error("network request error");return[2,x]}}))}))},e.prototype.send=function(e,t){return void 0===t&&(t={}),f(this,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return[4,this.request(e,t,{onUploadProgress:t.onUploadProgress})];case 1:return n=r.sent(),"ACCESS_TOKEN_EXPIRED"!==n.data.code||-1!==_.indexOf(e)?[3,4]:[4,this.refreshAccessToken()];case 2:return r.sent(),[4,this.request(e,t,{onUploadProgress:t.onUploadProgress})];case 3:n=r.sent(),r.label=4;case 4:if(n.data.code&&this._throwWhenRequestFail)throw new Error(JSON.stringify({code:p.OPERATION_FAIL,msg:"["+n.data.code+"] "+n.data.message}));return[2,n.data]}}))}))},e.prototype._refreshAccessToken=function(e){return void 0===e&&(e=1),f(this,void 0,void 0,(function(){var t,n,o,a,u,c,f,h,d,y,g,v,_,m;return l(this,(function(l){switch(l.label){case 0:return t=this._cache.keys,n=t.accessTokenKey,o=t.accessTokenExpireKey,a=t.refreshTokenKey,u=t.loginTypeKey,c=t.anonymousUuidKey,[4,this._cache.removeStoreAsync(n)];case 1:return l.sent(),[4,this._cache.removeStoreAsync(o)];case 2:return l.sent(),[4,this._cache.getStoreAsync(a)];case 3:if(f=l.sent(),!f)throw new Error(JSON.stringify({code:p.INVALID_OPERATION,msg:"not login"}));return h={refresh_token:f},[4,this.request("auth.fetchAccessTokenWithRefreshToken",h)];case 4:return d=l.sent(),d.data.code?(y=d.data.code,"SIGN_PARAM_INVALID"!==y&&"REFRESH_TOKEN_EXPIRED"!==y&&"INVALID_REFRESH_TOKEN"!==y?[3,11]:[4,this._cache.getStoreAsync(u)]):[3,12];case 5:return g=l.sent()===r.LOGINTYPE.ANONYMOUS,g&&"INVALID_REFRESH_TOKEN"===y?[4,this._cache.getStoreAsync(c)]:[3,9];case 6:return v=l.sent(),[4,this._cache.getStoreAsync(a)];case 7:return _=l.sent(),[4,this.send("auth.signInAnonymously",{anonymous_uuid:v,refresh_token:_})];case 8:if(m=l.sent(),this._setRefreshToken(m.refresh_token),e>=1)return[2,this._refreshAccessToken(--e)];throw new Error(JSON.stringify({code:p.OPERATION_FAIL,message:"重试获取 refresh token 失败"}));case 9:return i.cloudbase.fire(s.EVENTS.LOGIN_STATE_EXPIRED),[4,this._cache.removeStoreAsync(a)];case 10:l.sent(),l.label=11;case 11:throw new Error(JSON.stringify({code:p.NETWORK_ERROR,msg:"refresh access_token failed："+d.data.code}));case 12:return d.data.access_token?(i.cloudbase.fire(s.EVENTS.ACCESS_TOKEN_REFRESHD),[4,this._cache.setStoreAsync(n,d.data.access_token)]):[3,15];case 13:return l.sent(),[4,this._cache.setStoreAsync(o,d.data.access_token_expire+Date.now())];case 14:return l.sent(),[2,{accessToken:d.data.access_token,accessTokenExpire:d.data.access_token_expire}];case 15:return d.data.refresh_token?[4,this._cache.removeStoreAsync(a)]:[3,19];case 16:return l.sent(),[4,this._cache.setStoreAsync(a,d.data.refresh_token)];case 17:return l.sent(),[4,this._refreshAccessToken()];case 18:l.sent(),l.label=19;case 19:return[2]}}))}))},e.prototype._setRefreshToken=function(e){return f(this,void 0,void 0,(function(){var t,n,r,o;return l(this,(function(i){switch(i.label){case 0:return t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,o=t.refreshTokenKey,[4,this._cache.removeStoreAsync(n)];case 1:return i.sent(),[4,this._cache.removeStoreAsync(r)];case 2:return i.sent(),[4,this._cache.setStoreAsync(o,e)];case 3:return i.sent(),[2]}}))}))},e}();t.CloudbaseRequest=E;var w={};function S(e){w[e.env]=new E(c(c({},e),{throw:!0}))}function O(e){return w[e]}},"7e98":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSDKError=m,t.isCancelledError=t.CancelledError=t.isTimeoutError=t.TimeoutError=t.isGenericError=t.CloudSDKError=void 0;var r=n("7319"),o=n("36ac");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function c(e){var t=d();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t="function"===typeof Map?new Map:void 0;return p=function(e){if(null===e||!y(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,v(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},p(e)}function h(e,t,n){return h=d()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),i=new o;return n&&g(i,n.prototype),i},h.apply(null,arguments)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var _=function(e){u(n,e);var t=c(n);function n(e){var r;return i(this,n),r=t.call(this,e.errMsg),r.errCode="UNKNOWN_ERROR",Object.defineProperties(l(r),{message:{get:function(){return"errCode: ".concat(this.errCode," ").concat(o.ERR_CODE[this.errCode]||""," | errMsg: ")+this.errMsg},set:function(e){this.errMsg=e}}}),r.errCode=e.errCode||"UNKNOWN_ERROR",r.errMsg=e.errMsg,r}return s(n,[{key:"message",get:function(){return"errCode: ".concat(this.errCode," | errMsg: ")+this.errMsg},set:function(e){this.errMsg=e}}]),n}(p(Error));function m(e){return e&&e instanceof Error&&(0,r.isString)(e.errMsg)}t.CloudSDKError=_;var b=function(e){return e.generic};t.isGenericError=b;var E=function(e){u(n,e);var t=c(n);function n(e){var r;return i(this,n),r=t.call(this,e),r.type="timeout",r.payload=null,r.generic=!0,r}return n}(p(Error));t.TimeoutError=E;var w=function(e){return"timeout"===e.type};t.isTimeoutError=w;var S=function(e){u(n,e);var t=c(n);function n(e){var r;return i(this,n),r=t.call(this,e),r.type="cancelled",r.payload=null,r.generic=!0,r}return n}(p(Error));t.CancelledError=S;var O=function(e){return"cancelled"===e.type};t.isCancelledError=O},8844:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RealtimeListener=void 0;var o=function e(t){r(this,e),this.close=t.close,this.onChange=t.onChange,this.onError=t.onError,t.debug&&Object.defineProperty(this,"virtualClient",{get:function(){return t.virtualClient}})};t.RealtimeListener=o},8930:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Snapshot=void 0;var r=function(){function e(e){var t,n,r=e.id,o=e.docChanges,i=e.docs,a=e.msgType,s=e.type;Object.defineProperties(this,{id:{get:function(){return r},enumerable:!0},docChanges:{get:function(){return t||(t=JSON.parse(JSON.stringify(o))),t},enumerable:!0},docs:{get:function(){return n||(n=JSON.parse(JSON.stringify(i))),n},enumerable:!0},msgType:{get:function(){return a},enumerable:!0},type:{get:function(){return s},enumerable:!0}})}return e}();t.Snapshot=r},"8c42":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=h,t.deserialize=y;var r=n("1f74"),o=n("7319"),i=n("6fe9"),a=n("7478");function s(e){return l(e)||f(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function f(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){return d(e,[e])}function d(e,t){if(!(0,o.isInternalObject)(e)){if((0,o.isDate)(e))return e;if((0,o.isRegExp)(e))return{$regularExpression:{pattern:e.source,options:e.flags}};if((0,o.isArray)(e))return e.map((function(e){if(t.indexOf(e)>-1)throw new Error("Cannot convert circular structure to JSON");return d(e,[].concat(s(t),[e]))}));if((0,o.isObject)(e)){var n=Object.assign({},e),i={};for(var a in n){if(t.indexOf(n[a])>-1)throw new Error("Cannot convert circular structure to JSON");void 0!==n[a]&&(i[a]=d(n[a],[].concat(s(t),[n[a]])))}return i}return e}switch(e._internalType){case r.SYMBOL_GEO_POINT:return e.toJSON();case r.SYMBOL_SERVER_DATE:return e.parse();case r.SYMBOL_REGEXP:return e.parse();default:return e.toJSON?e.toJSON():e}}function y(e){var t=Object.assign({},e);for(var n in t)switch(n){case"$date":switch((0,o.getType)(t[n])){case"number":return new Date(t[n]);case"object":return new a.ServerDate(t[n])}break;case"type":switch(t.type){case"Point":if((0,o.isArray)(t.coordinates)&&(0,o.isNumber)(t.coordinates[0])&&(0,o.isNumber)(t.coordinates[1]))return new i.Point(t.coordinates[0],t.coordinates[1]);break}break}return e}},"8fd0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLogicCommand=d,t.isKnownLogicCommand=y,t.default=t.LogicCommand=t.LOGIC_COMMANDS_LITERAL=t.NOR=t.NOT=t.OR=t.AND=void 0;var r=n("1f74"),o=n("fe94");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var u="and";t.AND=u;var c="or";t.OR=c;var f="not";t.NOT=f;var l,p="nor";t.NOR=p,t.LOGIC_COMMANDS_LITERAL=l,function(e){e["AND"]="and",e["OR"]="or",e["NOT"]="not",e["NOR"]="nor"}(l||(t.LOGIC_COMMANDS_LITERAL=l={}));var h=function(){function e(t,n,a){if(i(this,e),this._internalType=r.SYMBOL_LOGIC_COMMAND,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=n,this.fieldName=a||r.SYMBOL_UNSET_FIELD_NAME,this.fieldName!==r.SYMBOL_UNSET_FIELD_NAME)if(Array.isArray(n)){n=n.slice(),this.operands=n;for(var s=0,u=n.length;s<u;s++){var c=n[s];(d(c)||(0,o.isQueryCommand)(c))&&(n[s]=c._setFieldName(this.fieldName))}}else{var f=n;(d(f)||(0,o.isQueryCommand)(f))&&(n=f._setFieldName(this.fieldName))}}return s(e,[{key:"_setFieldName",value:function(t){var n=this.operands.map((function(n){return n instanceof e?n._setFieldName(t):n})),r=new e(this.operator,n,t);return r}},{key:"and",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return o.unshift(this),new e(l.AND,o,this.fieldName)}},{key:"or",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return o.unshift(this),new e(l.OR,o,this.fieldName)}}]),e}();function d(e){return e&&e instanceof h&&e._internalType===r.SYMBOL_LOGIC_COMMAND}function y(e){return d&&e.operator.toUpperCase()in l}t.LogicCommand=h;var g=h;t.default=g},9152:function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?o-1:0,p=n?-1:1,h=e[t+l];for(l+=p,i=h&(1<<-f)-1,h>>=-f,f+=s;f>0;i=256*i+e[t+l],l+=p,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+e[t+l],l+=p,f-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,d=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+l>=1?p/u:p*Math.pow(2,1-l),t*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(t*u-1)*Math.pow(2,o),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[n+h]=255&a,h+=d,a/=256,c-=8);e[n+h-d]|=128*y}},"93dc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerStorage=b;var r=n("5fbe"),o=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},u=r.constants.getSdkName,c=r.constants.ERRORS,f=r.constants.COMMUNITY_SITE_URL,l=r.utils.isArray,p=r.utils.isString,h=r.utils.isPalinObject,d=r.utils.execCallback,y=r.helpers.catchErrorsDecorator,g="storage",v=function(){function e(){}return e.prototype.uploadFile=function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,i,a,f,l,h,y,v,_,m,b,E,w,S;return s(this,(function(s){switch(s.label){case 0:if(n=e.cloudPath,r=e.filePath,o=e.onUploadProgress,!p(n)||!r)throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+g+".uploadFile] invalid params"}));return i="storage.getUploadMetadata",a=this.request,[4,a.send(i,{path:n})];case 1:return f=s.sent(),l=f.data,h=l.url,y=l.authorization,v=l.token,_=l.fileId,m=l.cosFileId,b=l.download_url,E=f.requestId,w={key:n,signature:y,"x-cos-meta-fileid":m,success_action_status:"201","x-cos-security-token":v},[4,a.upload({url:h,data:w,file:r,name:n,onUploadProgress:o})];case 2:return S=s.sent(),201===S.statusCode?[2,d(t,null,{fileID:_,download_url:b,requestId:E})]:[2,d(t,new Error("["+u()+"]["+c.OPERATION_FAIL+"]["+g+"]:"+S.data))]}}))}))},e.prototype.getUploadMetadata=function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,i,a;return s(this,(function(s){switch(s.label){case 0:if(n=e.cloudPath,!p(n))throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+g+".getUploadMetadata] invalid cloudPath"}));r=this.request,o="storage.getUploadMetadata",s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.send(o,{path:n})];case 2:return i=s.sent(),[2,d(t,null,i)];case 3:return a=s.sent(),[2,d(t,a)];case 4:return[2]}}))}))},e.prototype.deleteFile=function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,i,a,u,f,h;return s(this,(function(s){switch(s.label){case 0:if(n=e.fileList,!n||!l(n)||0===n.length)throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+g+".deleteFile] fileList must not be empty"}));for(r=0,o=n;r<o.length;r++)if(i=o[r],!i||!p(i))throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+g+".deleteFile] fileID must be string"}));return a="storage.batchDeleteFile",u=this.request,[4,u.send(a,{fileid_list:n})];case 1:return f=s.sent(),f.code?[2,d(t,null,f)]:(h={fileList:f.data.delete_list,requestId:f.requestId},[2,d(t,null,h)])}}))}))},e.prototype.getTempFileURL=function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,i,a,u,f,y;return s(this,(function(s){switch(s.label){case 0:if(n=e.fileList,!n||!l(n)||0===n.length)throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+g+".getTempFileURL] fileList must not be empty"}));for(r=[],o=0,i=n;o<i.length;o++)if(a=i[o],h(a)){if(!a.hasOwnProperty("fileID")||!a.hasOwnProperty("maxAge"))throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+g+".getTempFileURL] file info must include fileID and maxAge"}));r.push({fileid:a.fileID,max_age:a.maxAge})}else{if(!p(a))throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+g+".getTempFileURL] invalid fileList"}));r.push({fileid:a})}return u="storage.batchGetDownloadUrl",f=this.request,[4,f.send(u,{file_list:r})];case 1:return y=s.sent(),y.code?[2,d(t,null,y)]:[2,d(t,null,{fileList:y.data.download_list,requestId:y.requestId})]}}))}))},e.prototype.downloadFile=function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,i,a,u;return s(this,(function(s){switch(s.label){case 0:if(n=e.fileID,!p(n))throw new Error(JSON.stringify({code:c.INVALID_PARAMS,msg:"["+g+".getTempFileURL] fileID must be string"}));return[4,this.getTempFileURL.call(this,{fileList:[{fileID:n,maxAge:600}]})];case 1:return r=s.sent(),o=r.fileList[0],"SUCCESS"!==o.code?[2,d(t,o)]:(i=this.request,a=encodeURI(o.download_url),[4,i.download({url:a})]);case 2:return u=s.sent(),[2,d(t,null,u)]}}))}))},o([y({customInfo:{className:"Cloudbase",methodName:"uploadFile"},title:"上传文件失败",messages:["请确认以下各项：","  1 - 调用 uploadFile() 的语法或参数是否正确","  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety","  3 - 云存储安全规则是否限制了当前登录状态访问","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+f]}),i("design:type",Function),i("design:paramtypes",[Object,Function]),i("design:returntype",Promise)],e.prototype,"uploadFile",null),o([y({customInfo:{className:"Cloudbase",methodName:"getUploadMetadata"},title:"获取上传元信息失败",messages:["请确认以下各项：","  1 - 调用 getUploadMetadata() 的语法或参数是否正确","  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety","  3 - 云存储安全规则是否限制了当前登录状态访问","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+f]}),i("design:type",Function),i("design:paramtypes",[Object,Function]),i("design:returntype",Promise)],e.prototype,"getUploadMetadata",null),o([y({customInfo:{className:"Cloudbase",methodName:"deleteFile"},title:"删除文件失败",messages:["请确认以下各项：","  1 - 调用 deleteFile() 的语法或参数是否正确","  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety","  3 - 云存储安全规则是否限制了当前登录状态访问","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+f]}),i("design:type",Function),i("design:paramtypes",[Object,Function]),i("design:returntype",Promise)],e.prototype,"deleteFile",null),o([y({customInfo:{className:"Cloudbase",methodName:"getTempFileURL"},title:"获取文件下载链接",messages:["请确认以下各项：","  1 - 调用 getTempFileURL() 的语法或参数是否正确","  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety","  3 - 云存储安全规则是否限制了当前登录状态访问","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+f]}),i("design:type",Function),i("design:paramtypes",[Object,Function]),i("design:returntype",Promise)],e.prototype,"getTempFileURL",null),o([y({customInfo:{className:"Cloudbase",methodName:"downloadFile"},title:"下载文件失败",messages:["请确认以下各项：","  1 - 调用 downloadFile() 的语法或参数是否正确","  2 - 当前域名是否在安全域名列表中：https://console.cloud.tencent.com/tcb/env/safety","  3 - 云存储安全规则是否限制了当前登录状态访问","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+f]}),i("design:type",Function),i("design:paramtypes",[Object,Function]),i("design:returntype",Promise)],e.prototype,"downloadFile",null),e}(),_=new v,m={name:g,entity:{uploadFile:_.uploadFile,deleteFile:_.deleteFile,getTempFileURL:_.getTempFileURL,downloadFile:_.downloadFile,getUploadMetadata:_.getUploadMetadata}};try{cloudbase.registerComponent(m)}catch(E){}function b(e){try{e.registerComponent(m)}catch(E){console.warn(E)}}},9482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualWebSocketClient=void 0;var r=l(n("a6ea")),o=l(n("f418")),i=l(n("cd3f")),a=n("4895"),s=n("4201"),u=n("8930"),c=n("99b4"),f=n("3d9a");function l(e){return e&&e.__esModule?e:{default:e}}var p,h=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},y=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};(function(e){e["LOGGINGIN"]="LOGGINGIN",e["INITING"]="INITING",e["REBUILDING"]="REBUILDING",e["ACTIVE"]="ACTIVE",e["ERRORED"]="ERRORED",e["CLOSING"]="CLOSING",e["CLOSED"]="CLOSED",e["PAUSED"]="PAUSED",e["RESUMING"]="RESUMING"})(p||(p={}));var g=100,v=2,_=2,m=1e4,b=1e4,E=1e4,w=function(){function e(e){var t=this;this.watchStatus=p.INITING,this._login=function(e,n){return h(t,void 0,void 0,(function(){var t;return d(this,(function(r){switch(r.label){case 0:return this.watchStatus=p.LOGGINGIN,[4,this.login(e,n)];case 1:return t=r.sent(),this.envId||(this.envId=t.envId),[2,t]}}))}))},this.initWatch=function(e){return h(t,void 0,void 0,(function(){var t,n=this;return d(this,(function(r){switch(r.label){case 0:if(this._initWatchPromise)return[2,this._initWatchPromise];this._initWatchPromise=new Promise((function(t,r){return h(n,void 0,void 0,(function(){var n,o,i,s,c,f,l,h,y,g,_;return d(this,(function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),this.watchStatus===p.PAUSED?(console.log("[realtime] initWatch cancelled on pause"),[2,t()]):[4,this._login(this.envId,e)];case 1:return n=d.sent().envId,this.watchStatus===p.PAUSED?(console.log("[realtime] initWatch cancelled on pause"),[2,t()]):(this.watchStatus=p.INITING,o={watchId:this.watchId,requestId:(0,a.genRequestId)(),msgType:"INIT_WATCH",msgData:{envId:n,collName:this.collectionName,query:this.query,limit:this.limit,orderBy:this.orderBy}},[4,this.send({msg:o,waitResponse:!0,skipOnMessage:!0,timeout:b})]);case 2:if(i=d.sent(),s=i.msgData,c=s.events,f=s.currEvent,this.sessionInfo={queryID:i.msgData.queryID,currentEventId:f-1,currentDocs:[]},c.length>0){for(l=0,h=c;l<h.length;l++)y=h[l],y.ID=f;this.handleServerEvents(i)}else this.sessionInfo.currentEventId=f,g=new u.Snapshot({id:f,docChanges:[],docs:[],type:"init"}),this.listener.onChange(g),this.scheduleSendACK();return this.onWatchStart(this,this.sessionInfo.queryID),this.watchStatus=p.ACTIVE,this._availableRetries.INIT_WATCH=v,t(),[3,4];case 3:return _=d.sent(),this.handleWatchEstablishmentError(_,{operationName:"INIT_WATCH",resolve:t,reject:r}),[3,4];case 4:return[2]}}))}))})),t=!1,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this._initWatchPromise];case 2:return r.sent(),t=!0,[3,4];case 3:return this._initWatchPromise=void 0,[7];case 4:return console.log("[realtime] initWatch "+(t?"success":"fail")),[2]}}))}))},this.rebuildWatch=function(e){return h(t,void 0,void 0,(function(){var t,n=this;return d(this,(function(r){switch(r.label){case 0:if(this._rebuildWatchPromise)return[2,this._rebuildWatchPromise];this._rebuildWatchPromise=new Promise((function(t,r){return h(n,void 0,void 0,(function(){var n,o,i,s;return d(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),this.watchStatus===p.PAUSED?(console.log("[realtime] rebuildWatch cancelled on pause"),[2,t()]):[4,this._login(this.envId,e)];case 1:if(n=u.sent().envId,!this.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");return this.watchStatus===p.PAUSED?(console.log("[realtime] rebuildWatch cancelled on pause"),[2,t()]):(this.watchStatus=p.REBUILDING,o={watchId:this.watchId,requestId:(0,a.genRequestId)(),msgType:"REBUILD_WATCH",msgData:{envId:n,collName:this.collectionName,queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:o,waitResponse:!0,skipOnMessage:!1,timeout:E})]);case 2:return i=u.sent(),this.handleServerEvents(i),this.watchStatus=p.ACTIVE,this._availableRetries.REBUILD_WATCH=v,t(),[3,4];case 3:return s=u.sent(),this.handleWatchEstablishmentError(s,{operationName:"REBUILD_WATCH",resolve:t,reject:r}),[3,4];case 4:return[2]}}))}))})),t=!1,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this._rebuildWatchPromise];case 2:return r.sent(),t=!0,[3,4];case 3:return this._rebuildWatchPromise=void 0,[7];case 4:return console.log("[realtime] rebuildWatch "+(t?"success":"fail")),[2]}}))}))},this.handleWatchEstablishmentError=function(e,n){return h(t,void 0,void 0,(function(){var t,r,o,i=this;return d(this,(function(a){return t="INIT_WATCH"===n.operationName,r=function(){i.closeWithError(new c.CloudSDKError({errCode:t?c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:e})),n.reject(e)},o=function(e){i.useRetryTicket(n.operationName)?t?(i._initWatchPromise=void 0,n.resolve(i.initWatch(e))):(i._rebuildWatchPromise=void 0,n.resolve(i.rebuildWatch(e))):r()},this.handleCommonError(e,{onSignError:function(){return o(!0)},onTimeoutError:function(){return o(!1)},onNotRetryableError:r,onCancelledError:n.reject,onUnknownError:function(){return h(i,void 0,void 0,(function(){var e,t=this;return d(this,(function(r){switch(r.label){case 0:return r.trys.push([0,8,,9]),e=function(){return h(t,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this.pause(),[4,this.onceWSConnected()];case 1:return e.sent(),o(!0),[2]}}))}))},this.isWSConnected()?[3,2]:[4,e()];case 1:return r.sent(),[3,7];case 2:return[4,(0,f.sleep)(g)];case 3:return r.sent(),this.watchStatus!==p.PAUSED?[3,4]:(n.reject(new c.CancelledError(n.operationName+" cancelled due to pause after unknownError")),[3,7]);case 4:return this.isWSConnected()?[3,6]:[4,e()];case 5:return r.sent(),[3,7];case 6:o(!1),r.label=7;case 7:return[3,9];case 8:return r.sent(),o(!0),[3,9];case 9:return[2]}}))}))}}),[2]}))}))},this.closeWatch=function(){return h(t,void 0,void 0,(function(){var e,t,n;return d(this,(function(r){switch(r.label){case 0:if(e=this.sessionInfo?this.sessionInfo.queryID:"",this.watchStatus!==p.ACTIVE)return this.watchStatus=p.CLOSED,this.onWatchClose(this,e),[2];r.label=1;case 1:return r.trys.push([1,3,4,5]),this.watchStatus=p.CLOSING,t={watchId:this.watchId,requestId:(0,a.genRequestId)(),msgType:"CLOSE_WATCH",msgData:null},[4,this.send({msg:t})];case 2:return r.sent(),this.sessionInfo=void 0,this.watchStatus=p.CLOSED,[3,5];case 3:return n=r.sent(),this.closeWithError(new c.CloudSDKError({errCode:c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL,errMsg:n})),[3,5];case 4:return this.onWatchClose(this,e),[7];case 5:return[2]}}))}))},this.scheduleSendACK=function(){t.clearACKSchedule(),t._ackTimeoutId=setTimeout((function(){t._waitExpectedTimeoutId?t.scheduleSendACK():t.sendACK()}),m)},this.clearACKSchedule=function(){t._ackTimeoutId&&clearTimeout(t._ackTimeoutId)},this.sendACK=function(){return h(t,void 0,void 0,(function(){var e,t,n;return d(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.watchStatus!==p.ACTIVE?(this.scheduleSendACK(),[2]):this.sessionInfo?(e={watchId:this.watchId,requestId:(0,a.genRequestId)(),msgType:"CHECK_LAST",msgData:{queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:e})]):(console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)"),[2]);case 1:return r.sent(),this.scheduleSendACK(),[3,3];case 2:if(t=r.sent(),(0,c.isRealtimeErrorMessageError)(t))switch(n=t.payload,n.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return this.rebuildWatch(),[2];case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return this.closeWithError(new c.CloudSDKError({errCode:c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:n.msgData.code})),[2];default:break}return this._availableRetries.CHECK_LAST&&this._availableRetries.CHECK_LAST>0?(this._availableRetries.CHECK_LAST--,this.scheduleSendACK()):this.closeWithError(new c.CloudSDKError({errCode:c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:t})),[3,3];case 3:return[2]}}))}))},this.handleCommonError=function(e,t){if((0,c.isRealtimeErrorMessageError)(e)){var n=e.payload;switch(n.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return void t.onNotRetryableError(e);default:return void t.onNotRetryableError(e)}}else{if((0,c.isTimeoutError)(e))return void t.onTimeoutError(e);if((0,c.isCancelledError)(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId="watchid_"+ +new Date+"_"+Math.random(),this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.onceWSConnected=e.onceWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.debug=e.debug,this._availableRetries={INIT_WATCH:v,REBUILD_WATCH:v,CHECK_LAST:_},this.listener=new s.RealtimeListener({close:this.closeWatch,onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this.initWatch()}return e.prototype.onMessage=function(e){var t=this;switch(this.watchStatus){case p.PAUSED:if("ERROR"!==e.msgType)return;break;case p.LOGGINGIN:case p.INITING:case p.REBUILDING:return void console.warn("[realtime listener] internal non-fatal error: unexpected message received while "+this.watchStatus);case p.CLOSED:return void console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has closed");case p.ERRORED:return void console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has ended with error")}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":console.warn("nextevent "+e.msgData.currEvent+" ignored",e),this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((function(){t.rebuildWatch()}),this.getWaitExpectedTimeoutLength()),console.log("[realtime] waitExpectedTimeoutLength "+this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new c.CloudSDKError({errCode:c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:e.msgData.code+" - "+e.msgData.message}));break;default:console.warn("[realtime listener] virtual client receive unexpected msg "+e.msgType+": ",e);break}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")},e.prototype.closeWithError=function(e){this.watchStatus=p.ERRORED,this.clearACKSchedule(),this.listener.onError(e),this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),console.log("[realtime] client closed ("+this.collectionName+" "+this.query+") (watchId "+this.watchId+")")},e.prototype.pause=function(){this.watchStatus=p.PAUSED,console.log("[realtime] client paused ("+this.collectionName+" "+this.query+") (watchId "+this.watchId+")")},e.prototype.resume=function(){return h(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:this.watchStatus=p.RESUMING,console.log("[realtime] client resuming with "+(this.sessionInfo?"REBUILD_WATCH":"INIT_WATCH")+" ("+this.collectionName+" "+this.query+") ("+this.watchId+")"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sessionInfo?this.rebuildWatch():this.initWatch()];case 2:return t.sent(),console.log("[realtime] client successfully resumed ("+this.collectionName+" "+this.query+") ("+this.watchId+")"),[3,4];case 3:return e=t.sent(),console.error("[realtime] client resume failed ("+this.collectionName+" "+this.query+") ("+this.watchId+")",e),[3,4];case 4:return[2]}}))}))},e.prototype.useRetryTicket=function(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,console.log("[realtime] "+e+" use a retry ticket, now only "+this._availableRetries[e]+" retry left"),!0)},e.prototype.handleServerEvents=function(e){return h(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.scheduleSendACK(),[4,this._handleServerEvents(e)];case 1:return n.sent(),this._postHandleServerEventsValidityCheck(e),[3,3];case 2:throw t=n.sent(),console.error("[realtime listener] internal non-fatal error: handle server events failed with error: ",t),t;case 3:return[2]}}))}))},e.prototype._handleServerEvents=function(e){return h(this,void 0,void 0,(function(){var t,n,a,s,f,l,p,h,g,v,_,m;return d(this,(function(b){switch(b.label){case 0:if(t=e.requestId,n=e.msgData.events,a=e.msgType,!n.length||!this.sessionInfo)return[2];s=this.sessionInfo;try{f=n.map(S)}catch(E){return this.closeWithError(new c.CloudSDKError({errCode:c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:E})),[2]}l=y(s.currentDocs),p=!1,h=function(n,h){var v,_,m,b,E,w,S,O,A,I,T;return d(this,(function(d){switch(d.label){case 0:return v=f[n],s.currentEventId>=v.id?(!f[n-1]||v.id>f[n-1].id?console.warn("[realtime] duplicate event received, cur "+s.currentEventId+" but got "+v.id):console.error("[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId "+t+")"),[2,"continue"]):[3,1];case 1:if(s.currentEventId!==v.id-1)return[3,2];switch(v.dataType){case"update":if(!v.doc)switch(v.queueType){case"update":case"dequeue":if(_=l.find((function(e){return e._id===v.docId})),_){if(w=(0,i.default)(_),v.updatedFields)for(E in v.updatedFields)(0,r.default)(w,E,v.updatedFields[E]);if(v.removedFields)for(m=0,b=v.removedFields;m<b.length;m++)E=b[m],(0,o.default)(w,E);v.doc=w}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated.");break;case"enqueue":throw S=new c.CloudSDKError({errCode:c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId '+e.requestId+")"}),g.closeWithError(S),S;default:break}break;case"replace":if(!v.doc)throw S=new c.CloudSDKError({errCode:c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="replace" (requestId '+e.requestId+")"}),g.closeWithError(S),S;break;case"remove":w=l.find((function(e){return e._id===v.docId})),w?v.doc=w:console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated.");break;case"limit":if(!v.doc)switch(v.queueType){case"dequeue":w=l.find((function(e){return e._id===v.docId})),w?v.doc=w:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType event where no doc is associated.");break;case"enqueue":throw S=new c.CloudSDKError({errCode:c.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="limit" and queueType="enqueue" (requestId '+e.requestId+")"}),g.closeWithError(S),S;default:break}break}switch(v.queueType){case"init":p?l.push(v.doc):(p=!0,l=[v.doc]);break;case"enqueue":l.push(v.doc);break;case"dequeue":O=l.findIndex((function(e){return e._id===v.docId})),O>-1?l.splice(O,1):console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated.");break;case"update":O=l.findIndex((function(e){return e._id===v.docId})),O>-1?l[O]=v.doc:console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated.");break}return(n===h-1||f[n+1]&&f[n+1].id!==v.id)&&(A=y(l),I=f.slice(0,n+1).filter((function(e){return e.id===v.id})),g.sessionInfo.currentEventId=v.id,g.sessionInfo.currentDocs=l,T=new u.Snapshot({id:v.id,docChanges:I,docs:A,msgType:a}),g.listener.onChange(T)),[3,4];case 2:return console.warn("[realtime listener] event received is out of order, cur "+g.sessionInfo.currentEventId+" but got "+v.id),[4,g.rebuildWatch()];case 3:return d.sent(),[2,{value:void 0}];case 4:return[2]}}))},g=this,v=0,_=f.length,b.label=1;case 1:return v<_?[5,h(v,_)]:[3,4];case 2:if(m=b.sent(),"object"===typeof m)return[2,m.value];b.label=3;case 3:return v++,[3,1];case 4:return[2]}}))}))},e.prototype._postHandleServerEventsValidityCheck=function(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn("[realtime listener] internal non-fatal error: client eventId does not match with server event id after server event handling")):console.error("[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur")},e.prototype.clearWaitExpectedEvent=function(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)},e}();function S(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=JSON.parse(e.removedFields))),t}t.VirtualWebSocketClient=w},"96cf":function(e,t){!function(t){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",c="object"===typeof e,f=t.regeneratorRuntime;if(f)c&&(e.exports=f);else{f=t.regeneratorRuntime=c?e.exports:{},f.wrap=b;var l="suspendedStart",p="suspendedYield",h="executing",d="completed",y={},g={};g[a]=function(){return this};var v=Object.getPrototypeOf,_=v&&v(v(C([])));_&&_!==r&&o.call(_,a)&&(g=_);var m=O.prototype=w.prototype=Object.create(g);S.prototype=m.constructor=O,O.constructor=S,O[u]=S.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(m),e},f.awrap=function(e){return{__await:e}},A(I.prototype),I.prototype[s]=function(){return this},f.AsyncIterator=I,f.async=function(e,t,n,r){var o=new I(b(e,t,n,r));return f.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},A(m),m[u]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(D),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return s.type="throw",s.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),y}}}function b(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new P(r||[]);return i._invoke=T(e,n,a),i}function E(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function w(){}function S(){}function O(){}function A(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){function t(n,r,i,a){var s=E(e[n],e,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"===typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,i,a)}),(function(e){t("throw",e,i,a)})):Promise.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return t("throw",e,i,a)}))}a(s.arg)}var n;function r(e,r){function o(){return new Promise((function(n,o){t(e,r,n,o)}))}return n=n?n.then(o,o):o()}this._invoke=r}function T(e,t,n){var r=l;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return L()}n.method=o,n.arg=i;while(1){var a=n.delegate;if(a){var s=N(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=E(e,t,n);if("normal"===u.type){if(r=n.done?d:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}function N(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,N(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=E(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,y;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,y):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){while(++r<e.length)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},9911:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Validate=void 0;var r=n("bdc9"),o=n("60fd"),i=n("295d"),a=n("d877"),s=n("7319"),u=n("1f74");function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var p=["limit","offset","projection","order","multiple","timeout"],h=function(){function e(){c(this,e)}return l(e,null,[{key:"isGeopoint",value:function(e,t){if(o.Util.whichType(t)!==r.FieldType.Number)throw new Error("Geo Point must be number type");var n=Math.abs(t);if("latitude"===e&&n>90)throw new Error("latitude should be a number ranges from -90 to 90");if("longitude"===e&&n>180)throw new Error("longitude should be a number ranges from -180 to 180");return!0}},{key:"isInteger",value:function(e,t){if(!Number.isInteger(t))throw new Error(e+r.ErrorCode.IntergerError);return!0}},{key:"mustBeBoolean",value:function(e,t){if("boolean"!==typeof t)throw new Error(e+r.ErrorCode.BooleanError);return!0}},{key:"isProjection",value:function(e,t){if("object"!==(0,s.getType)(t))throw(0,a.E)(Object.assign(Object.assign({},i.ERRORS.INVALID_PARAM),{message:"".concat(e," projection must be an object")}));for(var n in t){var r=t[n];if("number"===(0,s.getType)(r)){if(0!==r&&1!==r)throw(0,a.E)(Object.assign(Object.assign({},i.ERRORS.INVALID_PARAM),{message:"if the value in projection is of number, it must be 0 or 1"}))}else if("object"!==(0,s.getType)(r))throw(0,a.E)(Object.assign(Object.assign({},i.ERRORS.INVALID_PARAM),{message:"invalid projection"}))}return!0}},{key:"isOrder",value:function(e,t){if("object"!==(0,s.getType)(t))throw(0,a.E)(Object.assign(Object.assign({},i.ERRORS.INVALID_PARAM),{message:"".concat(e," order must be an object")}));for(var n in t){var r=t[n];if(1!==r&&-1!==r)throw(0,a.E)(Object.assign(Object.assign({},i.ERRORS.INVALID_PARAM),{message:"order value must be 1 or -1"}))}return!0}},{key:"isFieldOrder",value:function(e){if(-1===r.OrderDirectionList.indexOf(e))throw new Error(r.ErrorCode.DirectionError);return!0}},{key:"isFieldPath",value:function(e){if(!/^[a-zA-Z0-9-_\.]/.test(e))throw new Error;return!0}},{key:"isOperator",value:function(e){if(-1===r.WhereFilterOpList.indexOf(e))throw new Error(r.ErrorCode.OpStrError);return!0}},{key:"isCollName",value:function(e){if(!/^[a-zA-Z0-9]([a-zA-Z0-9-_]){1,32}$/.test(e))throw new Error(r.ErrorCode.CollNameError);return!0}},{key:"isDocID",value:function(e){if(!/^([a-fA-F0-9]){24}$/.test(e))throw new Error(r.ErrorCode.DocIDError);return!0}},{key:"isValidOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==(0,s.getType)(t))throw(0,a.E)(Object.assign(Object.assign({},i.ERRORS.INVALID_PARAM),{message:"options must be an object"}));var n=Object.keys(t);for(var r in n)if(p.indexOf(n[r])<0)throw(0,a.E)(Object.assign(Object.assign({},i.ERRORS.INVALID_PARAM),{message:"".concat(n[r]," is invalid options key")}));var o=t.limit,u=t.offset,c=t.projection,f=t.order,l=t.multiple;return void 0!==o&&e.isInteger("limit",o),void 0!==u&&e.isInteger("offset",u),void 0!==c&&e.isProjection("projection",c),void 0!==f&&e.isOrder("order",f),void 0!==l&&e.mustBeBoolean("multiple",l),void 0!==t.timeout&&e.isInteger("timeout",t.timeout),!0}},{key:"isCentersPhere",value:function(t){if(Array.isArray(t)&&2===t.length){if("object"===(0,s.getType)(t[0])&&t[0]._internalType===u.SYMBOL_GEO_POINT&&"number"===typeof t[1])return!0;if(Array.isArray(t[0])&&2===t[0].length){var n=t[0][0],o=t[0][1];if(e.isGeopoint("longitude",n),e.isGeopoint("latitude",o),"number"===typeof t[1])return!0}}throw new Error("".concat(r.ErrorCode.CentersPhereError))}}]),e}();t.Validate=h},"99b4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERR_CODE=t.CloudSDKError=t.isCancelledError=t.CancelledError=t.isTimeoutError=t.TimeoutError=t.isRealtimeErrorMessageError=t.RealtimeErrorMessageError=void 0;var r=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(e){function t(t){var n=e.call(this,"Watch Error "+JSON.stringify(t.msgData)+" (requestid: "+t.requestId+")")||this;return n.isRealtimeErrorMessageError=!0,n.payload=t,n}return r(t,e),t}(Error);t.RealtimeErrorMessageError=o;var i=function(e){return null===e||void 0===e?void 0:e.isRealtimeErrorMessageError};t.isRealtimeErrorMessageError=i;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="timeout",t.payload=null,t.generic=!0,t}return r(t,e),t}(Error);t.TimeoutError=a;var s=function(e){return"timeout"===e.type};t.isTimeoutError=s;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cancelled",t.payload=null,t.generic=!0,t}return r(t,e),t}(Error);t.CancelledError=u;var c=function(e){return"cancelled"===e.type};t.isCancelledError=c;var f=function(e){function t(t){var n=e.call(this,t.errMsg)||this;return n.errCode="UNKNOWN_ERROR",Object.defineProperties(n,{message:{get:function(){return"errCode: "+this.errCode+" "+(l[this.errCode]||"")+" | errMsg: "+this.errMsg},set:function(e){this.errMsg=e}}}),n.errCode=t.errCode||"UNKNOWN_ERROR",n.errMsg=t.errMsg,n}return r(t,e),Object.defineProperty(t.prototype,"message",{get:function(){return"errCode: "+this.errCode+" | errMsg: "+this.errMsg},set:function(e){this.errMsg=e},enumerable:!1,configurable:!0}),t}(Error);t.CloudSDKError=f;var l={UNKNOWN_ERROR:"UNKNOWN_ERROR",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:"SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:"SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:"SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR"};t.ERR_CODE=l},"9d1a":function(e,t,n){(function(t,r){e.exports=r(n("36b8"))})(0,(function(e){return function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[],u=[];(function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}var r=2,o=0;while(o<64)e(r)&&(o<8&&(s[o]=n(t.pow(r,.5))),u[o]=n(t.pow(r,1/3)),o++),r++})();var c=[],f=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],f=n[5],l=n[6],p=n[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var d=c[h-15],y=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,g=c[h-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[h]=y+c[h-7]+v+c[h-16]}var _=s&f^~s&l,m=r&o^r&i^o&i,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),E=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),w=p+E+_+u[h]+c[h],S=b+m;p=l,l=f,f=s,s=a+w|0,a=i,i=o,o=r,r=w+S|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+f|0,n[6]=n[6]+l|0,n[7]=n[7]+p|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(f),n.HmacSHA256=i._createHmacHelper(f)}(Math),e.SHA256}))},"9eb6":function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={});var r=/\?/.test(t),o="";for(var i in n)""===o?!r&&(t+="?"):o+="&",o+=i+"="+encodeURIComponent(n[i]);return t+=o,/^http(s)?\:\/\//.test(t)?t:""+e+t}Object.defineProperty(t,"__esModule",{value:!0}),t.formatUrl=r},a22f:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTS=void 0;var r={LOGIN_STATE_CHANGED:"loginStateChanged",LOGIN_STATE_EXPIRED:"loginStateExpire",LOGIN_TYPE_CHANGED:"loginTypeChanged",ANONYMOUS_CONVERTED:"anonymousConverted",ACCESS_TOKEN_REFRESHD:"refreshAccessToken"};t.EVENTS=r},a32c:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentReference=void 0;var r=d(n("a34a")),o=n("f399"),i=n("60fd"),a=n("e5d0"),s=n("8c42"),u=n("a8f7"),c=n("1a3f"),f=n("bdc9"),l=n("d877"),p=n("295d"),h=n("63ea");function d(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){y(i,r,o,a,s,"next",e)}function s(e){y(i,r,o,a,s,"throw",e)}a(void 0)}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}var b=function(){function e(t,n,r,i,a){var s=this;v(this,e),this.watch=function(e){return o.Db.ws||(o.Db.ws=new c.RealtimeWebSocketClient({context:{appConfig:{docSizeLimit:1e3,realtimePingInterval:1e4,realtimePongWaitTimeout:5e3,request:s.request}}})),o.Db.ws.watch(Object.assign(Object.assign({},e),{envId:s._db.config.env,collectionName:s._coll,query:JSON.stringify({_id:s.id})}))},this._db=t,this._coll=n,this.id=i,this._transactionId=a,this.request=new o.Db.reqClass(this._db.config),this._apiOptions=r}return m(e,[{key:"create",value:function(){var e=g(r.default.mark((function e(t){var n,o;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.id&&(t["_id"]=this.id),n={collectionName:this._coll,data:[(0,l.stringifyByEJSON)((0,s.serialize)(t))],transactionId:this._transactionId},e.next=4,this.request.send("database.insertDocument",n,(0,l.getReqOpts)(this._apiOptions));case 4:if(o=e.sent,!o.code){e.next=7;break}return e.abrupt("return",o);case 7:if(!this._transactionId){e.next=9;break}return e.abrupt("return",{inserted:1,ok:1,id:o.data.insertedIds[0],requestId:o.requestId});case 9:return e.abrupt("return",{id:o.data.insertedIds[0],requestId:o.requestId});case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"set",value:function(){var e=g(r.default.mark((function e(t){var n,o,i,a;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.id){e.next=2;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.INVALID_PARAM),{message:"docId不能为空"})));case 2:if(t&&"object"===typeof t){e.next=4;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.INVALID_PARAM),{message:"参数必需是非空对象"})));case 4:if(!t.hasOwnProperty("_id")){e.next=6;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.INVALID_PARAM),{message:"不能更新_id的值"})));case 6:if(n=!1,o=function e(t){if("object"===typeof t)for(var r in t)t[r]instanceof u.UpdateCommand?n=!0:"object"===typeof t[r]&&e(t[r])},o(t),!n){e.next=11;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.DATABASE_REQUEST_FAILED),{message:"update operator complicit"})));case 11:return i={collectionName:this._coll,queryType:f.QueryType.DOC,data:(0,l.stringifyByEJSON)((0,s.serialize)(t)),transactionId:this._transactionId,multi:!1,merge:!1,upsert:!0},this.id&&(i["query"]=(0,l.stringifyByEJSON)({_id:this.id})),e.next=15,this.request.send("database.modifyDocument",i,(0,l.getReqOpts)(this._apiOptions));case 15:if(a=e.sent,!a.code){e.next=18;break}return e.abrupt("return",a);case 18:if(!this._transactionId){e.next=20;break}return e.abrupt("return",{updated:a.data.updated,upserted:[{_id:a.data.upsert_id}],requestId:a.requestId});case 20:return e.abrupt("return",{updated:a.data.updated,upsertedId:a.data.upsert_id,requestId:a.requestId});case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=g(r.default.mark((function e(t){var n,o,i;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&"object"===typeof t){e.next=2;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.INVALID_PARAM),{message:"参数必需是非空对象"})));case 2:if(!t.hasOwnProperty("_id")){e.next=4;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.INVALID_PARAM),{message:"不能更新_id的值"})));case 4:return n=(0,l.stringifyByEJSON)({_id:this.id}),o={collectionName:this._coll,transactionId:this._transactionId,data:a.UpdateSerializer.encodeEJSON(t),query:n,queryType:f.QueryType.DOC,multi:!1,merge:!0,upsert:!1},e.next=8,this.request.send("database.modifyDocument",o,(0,l.getReqOpts)(this._apiOptions));case 8:if(i=e.sent,!i.code){e.next=11;break}return e.abrupt("return",i);case 11:return e.abrupt("return",{updated:i.data.updated,requestId:i.requestId});case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=g(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.remove());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){var e=g(r.default.mark((function e(){var t,n,o;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,l.stringifyByEJSON)({_id:this.id}),n={collectionName:this._coll,transactionId:this._transactionId,query:t,queryType:f.QueryType.DOC,multi:!1},e.next=4,this.request.send("database.removeDocument",n,(0,l.getReqOpts)(this._apiOptions));case 4:if(o=e.sent,!o.code){e.next=7;break}return e.abrupt("return",o);case 7:return e.abrupt("return",{deleted:o.data.deleted,requestId:o.requestId});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get",value:function(){var e=g(r.default.mark((function e(){var t,n,o,a,s,u;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,l.stringifyByEJSON)({_id:this.id}),n=this._apiOptions.projection,o={collectionName:this._coll,query:t,transactionId:this._transactionId,queryType:f.QueryType.DOC,multi:!1},n&&(o.projection=(0,l.stringifyByEJSON)(n)),e.next=6,this.request.send("database.getDocument",o,(0,l.getReqOpts)(this._apiOptions));case 6:if(a=e.sent,!a.code){e.next=9;break}return e.abrupt("return",a);case 9:if(s=a.data.list.map((function(e){return h.EJSON.parse(e)})),u=i.Util.formatResDocumentData(s),!this._transactionId){e.next=13;break}return e.abrupt("return",{data:u[0]||null,requestId:a.requestId});case 13:return e.abrupt("return",{data:u,requestId:a.requestId,offset:a.data.offset,limit:a.data.limit});case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"field",value:function(t){var n={};for(var r in t)"boolean"===typeof t[r]&&(n[r]=!0===t[r]?1:0),"number"===typeof t[r]&&(n[r]=t[r]>0?1:0),"object"===typeof t[r]&&(n[r]=t[r]);var o=Object.assign({},this._apiOptions);return o.projection=n,new e(this._db,this._coll,o,this.id,this._transactionId)}}]),e}();t.DocumentReference=b},a34a:function(e,t,n){e.exports=n("bbdd")},a405:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e?"".concat(e,"_"):"").concat(+new Date,"_").concat(Math.random())}function o(e){return"INIT_EVENT"===e.msgType}Object.defineProperty(t,"__esModule",{value:!0}),t.genRequestId=r,t.isInitEventMessage=o},a6ea:function(e,t,n){(function(t){var n="Expected a function",r="__lodash_hash_undefined__",o=1/0,i=9007199254740991,a="[object Function]",s="[object GeneratorFunction]",u="[object Symbol]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,l=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/[\\^$.*+?()[\]{}|]/g,d=/\\(\\)?/g,y=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,v="object"==typeof t&&t&&t.Object===Object&&t,_="object"==typeof self&&self&&self.Object===Object&&self,m=v||_||Function("return this")();function b(e,t){return null==e?void 0:e[t]}function E(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}var w=Array.prototype,S=Function.prototype,O=Object.prototype,A=m["__core-js_shared__"],I=function(){var e=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),T=S.toString,N=O.hasOwnProperty,R=O.toString,D=RegExp("^"+T.call(N).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=m.Symbol,C=w.splice,L=ue(m,"Map"),B=ue(Object,"create"),M=P?P.prototype:void 0,x=M?M.toString:void 0;function k(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function j(){this.__data__=B?B(null):{}}function U(e){return this.has(e)&&delete this.__data__[e]}function $(e){var t=this.__data__;if(B){var n=t[e];return n===r?void 0:n}return N.call(t,e)?t[e]:void 0}function W(e){var t=this.__data__;return B?void 0!==t[e]:N.call(t,e)}function F(e,t){var n=this.__data__;return n[e]=B&&void 0===t?r:t,this}function q(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Y(){this.__data__=[]}function V(e){var t=this.__data__,n=ne(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():C.call(t,n,1),!0}function G(e){var t=this.__data__,n=ne(t,e);return n<0?void 0:t[n][1]}function H(e){return ne(this.__data__,e)>-1}function K(e,t){var n=this.__data__,r=ne(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function z(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function J(){this.__data__={hash:new k,map:new(L||q),string:new k}}function Q(e){return se(this,e)["delete"](e)}function X(e){return se(this,e).get(e)}function Z(e){return se(this,e).has(e)}function ee(e,t){return se(this,e).set(e,t),this}function te(e,t,n){var r=e[t];N.call(e,t)&&ve(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function ne(e,t){var n=e.length;while(n--)if(ve(e[n][0],t))return n;return-1}function re(e){if(!be(e)||pe(e))return!1;var t=me(e)||E(e)?D:y;return t.test(ye(e))}function oe(e,t,n,r){if(!be(e))return e;t=fe(t,e)?[t]:ae(t);var o=-1,i=t.length,a=i-1,s=e;while(null!=s&&++o<i){var u=de(t[o]),c=n;if(o!=a){var f=s[u];c=r?r(f,u,s):void 0,void 0===c&&(c=be(f)?f:ce(t[o+1])?[]:{})}te(s,u,c),s=s[u]}return e}function ie(e){if("string"==typeof e)return e;if(we(e))return x?x.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}function ae(e){return _e(e)?e:he(e)}function se(e,t){var n=e.__data__;return le(t)?n["string"==typeof t?"string":"hash"]:n.map}function ue(e,t){var n=b(e,t);return re(n)?n:void 0}function ce(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||g.test(e))&&e>-1&&e%1==0&&e<t}function fe(e,t){if(_e(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!we(e))||(f.test(e)||!c.test(e)||null!=t&&e in Object(t))}function le(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function pe(e){return!!I&&I in e}k.prototype.clear=j,k.prototype["delete"]=U,k.prototype.get=$,k.prototype.has=W,k.prototype.set=F,q.prototype.clear=Y,q.prototype["delete"]=V,q.prototype.get=G,q.prototype.has=H,q.prototype.set=K,z.prototype.clear=J,z.prototype["delete"]=Q,z.prototype.get=X,z.prototype.has=Z,z.prototype.set=ee;var he=ge((function(e){e=Se(e);var t=[];return l.test(e)&&t.push(""),e.replace(p,(function(e,n,r,o){t.push(r?o.replace(d,"$1"):n||e)})),t}));function de(e){if("string"==typeof e||we(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function ye(e){if(null!=e){try{return T.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ge(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var r=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return r.cache=new(ge.Cache||z),r}function ve(e,t){return e===t||e!==e&&t!==t}ge.Cache=z;var _e=Array.isArray;function me(e){var t=be(e)?R.call(e):"";return t==a||t==s}function be(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ee(e){return!!e&&"object"==typeof e}function we(e){return"symbol"==typeof e||Ee(e)&&R.call(e)==u}function Se(e){return null==e?"":ie(e)}function Oe(e,t,n){return null==e?e:oe(e,t,n)}e.exports=Oe}).call(this,n("c8ba"))},a8f7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUpdateCommand=c,t.isKnownUpdateCommand=f,t.default=t.UpdateCommand=t.UPDATE_COMMANDS_LITERAL=void 0;var r,o=n("1f74");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}t.UPDATE_COMMANDS_LITERAL=r,function(e){e["SET"]="set",e["REMOVE"]="remove",e["INC"]="inc",e["MUL"]="mul",e["PUSH"]="push",e["PULL"]="pull",e["PULL_ALL"]="pullAll",e["POP"]="pop",e["SHIFT"]="shift",e["UNSHIFT"]="unshift",e["ADD_TO_SET"]="addToSet",e["BIT"]="bit",e["RENAME"]="rename",e["MAX"]="max",e["MIN"]="min"}(r||(t.UPDATE_COMMANDS_LITERAL=r={}));var u=function(){function e(t,n,r){i(this,e),this._internalType=o.SYMBOL_UPDATE_COMMAND,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=n,this.fieldName=r||o.SYMBOL_UNSET_FIELD_NAME}return s(e,[{key:"_setFieldName",value:function(t){var n=new e(this.operator,this.operands,t);return n}}]),e}();function c(e){return e&&e instanceof u&&e._internalType===o.SYMBOL_UPDATE_COMMAND}function f(e){return c(e)&&e.operator.toUpperCase()in r}t.UpdateCommand=u;var l=u;t.default=l},a996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.cloudbase=void 0;var r=n("5fbe"),o=f(n("c20f")),i=n("12de"),a=n("7a36"),s=n("c6a4"),u=n("7b7a"),c=n("1e0c");function f(e){return e&&e.__esModule?e:{default:e}}var l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},p=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},g=r.adapters.useAdapters,v=r.adapters.useDefaultAdapter,_=r.adapters.RUNTIME,m=r.constants.ERRORS,b=r.constants.COMMUNITY_SITE_URL,E=r.utils.printWarn,w=r.helpers.catchErrorsDecorator,S={timeout:15e3,persistence:"local"},O=6e5,A=100,I={},T=function(){function e(e){this._config=e||this._config,this.authInstance=null}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"platform",{get:function(){return a.Platform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cache",{get:function(){return(0,s.getCacheByEnvId)(this._config.env)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localCache",{get:function(){return(0,s.getLocalCache)(this._config.env)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"request",{get:function(){return(0,u.getRequestByEnvId)(this._config.env)},enumerable:!1,configurable:!0}),e.prototype.init=function(t){if(!t.env)throw new Error(JSON.stringify({code:m.INVALID_PARAMS,msg:"env must not be specified"}));if(a.Platform.adapter||this._useDefaultAdapter(),this.requestClient=new a.Platform.adapter.reqClass({timeout:t.timeout||5e3,timeoutMsg:"["+(0,c.getSdkName)()+"][REQUEST TIMEOUT] request had been abort since didn't finished within"+t.timeout/1e3+"s"}),a.Platform.runtime!==_.WEB){if(!t.appSecret)throw new Error(JSON.stringify({code:m.INVALID_PARAMS,msg:"invalid appSecret"}));var n=a.Platform.adapter.getAppSign?a.Platform.adapter.getAppSign():"";if(t.appSign&&n&&t.appSign!==n)throw new Error(JSON.stringify({code:m.INVALID_PARAMS,msg:"invalid appSign"}));if(n&&(t.appSign=n),!t.appSign)throw new Error(JSON.stringify({code:m.INVALID_PARAMS,msg:"invalid appSign"}))}this._config=l(l({},S),t),this._config.timeout=this._formatTimeout(this._config.timeout);var r=this._config,o=r.env,i=r.persistence,f=r.debug,p=r.timeout,h=r.appSecret,d=r.appSign;(0,s.initCache)({env:o,persistence:i,debug:f,platformInfo:this.platform}),(0,u.initRequest)({env:o,region:t.region||"",timeout:p,appSecret:h,appSign:d}),t.region&&(0,c.setRegionLevelEndpoint)(o,t.region||"");var y=new e(this._config);return y.requestClient=this.requestClient,y},e.prototype.updateConfig=function(e){var t=e.persistence,n=e.debug;this._config.persistence=t,this._config.debug=n,(0,s.initCache)({env:this._config.env,persistence:t,debug:n,platformInfo:this.platform})},e.prototype.registerExtension=function(e){I[e.name]=e},e.prototype.invokeExtension=function(e,t){return d(this,void 0,void 0,(function(){var n;return y(this,(function(r){switch(r.label){case 0:if(n=I[e],!n)throw new Error(JSON.stringify({code:m.INVALID_PARAMS,msg:"extension:"+e+" must be registered before invoke"}));return[4,n.invoke(t,this)];case 1:return[2,r.sent()]}}))}))},e.prototype.useAdapters=function(e){var t=g(e)||{},n=t.adapter,r=t.runtime;n&&(a.Platform.adapter=n),r&&(a.Platform.runtime=r)},e.prototype.registerHook=function(t){(0,i.registerHook)(e,t)},e.prototype.registerComponent=function(t){(0,i.registerComponent)(e,t)},e.prototype.registerVersion=function(e){(0,c.setSdkVersion)(e)},e.prototype.registerSdkName=function(e){(0,c.setSdkName)(e)},e.prototype.registerEndPoint=function(e,t){(0,c.setEndPoint)(e,t)},e.prototype._useDefaultAdapter=function(){var e=v(),t=e.adapter,n=e.runtime;a.Platform.adapter=t,a.Platform.runtime=n},e.prototype._formatTimeout=function(e){switch(!0){case e>O:return E(m.INVALID_PARAMS,"timeout is greater than maximum value[10min]"),O;case e<A:return E(m.INVALID_PARAMS,"timeout is less than maximum value[100ms]"),A;default:return e}},p([w({mode:"sync",title:"Cloudbase 初始化失败",messages:["请确认以下各项：","  1 - 调用 cloudbase.init() 的语法或参数是否正确","  2 - 如果是非浏览器环境，是否配置了安全应用来源（https://docs.cloudbase.net/api-reference/webv2/adapter.html#jie-ru-liu-cheng）","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+b]}),h("design:type",Function),h("design:paramtypes",[Object]),h("design:returntype",e)],e.prototype,"init",null),p([w({title:"调用扩展能力失败",messages:["请确认以下各项：","  1 - 调用 invokeExtension() 的语法或参数是否正确","  2 - 被调用的扩展能力是否已经安装并通过 registerExtension() 注册","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+b]}),h("design:type",Function),h("design:paramtypes",[String,Object]),h("design:returntype",Promise)],e.prototype,"invokeExtension",null),e}(),N=new T;t.cloudbase=N,N.useAdapters(o.default);var R=N;t.default=R},abb0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPolygon=void 0;var r=n("1f74"),o=n("7319"),i=n("6c71");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function u(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(t){if(f(this,e),!(0,o.isArray)(t))throw new TypeError('"polygons" must be of type Polygon[]. Received type '.concat(typeof t));if(0===t.length)throw new Error("MultiPolygon must contain 1 polygon at least");var n,r=s(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!(a instanceof i.Polygon))throw new TypeError('"polygon" must be of type Polygon[]. Received type '.concat(typeof a,"[]"))}}catch(u){r.e(u)}finally{r.f()}this.polygons=t}return p(e,[{key:"parse",value:function(e){return a({},e,{type:"MultiPolygon",coordinates:this.polygons.map((function(e){return e.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}))})}},{key:"toJSON",value:function(){return{type:"MultiPolygon",coordinates:this.polygons.map((function(e){return e.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}))}}},{key:"_internalType",get:function(){return r.SYMBOL_GEO_MULTI_POLYGON}}],[{key:"validate",value:function(e){if("MultiPolygon"!==e.type||!(0,o.isArray)(e.coordinates))return!1;var t,n=s(e.coordinates);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=s(i);try{for(a.s();!(r=a.n()).done;){var u,c=r.value,f=s(c);try{for(f.s();!(u=f.n()).done;){var l=u.value;if(!(0,o.isNumber)(l[0])||!(0,o.isNumber)(l[1]))return!1}}catch(p){f.e(p)}finally{f.f()}}}catch(p){a.e(p)}finally{a.f()}}}catch(p){n.e(p)}finally{n.f()}return!0}}]),e}();t.MultiPolygon=h},b0d0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerAnalytics=v;var r=n("5fbe"),o=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},u=r.constants.ERRORS,c=r.constants.COMMUNITY_SITE_URL,f=r.helpers.catchErrorsDecorator,l="analytics",p=["mall"];function h(e){if("Object"!==Object.prototype.toString.call(e).slice(8,-1))return!1;var t=e.report_data,n=e.report_type;return!1!==p.includes(n)&&("Object"===Object.prototype.toString.call(t).slice(8,-1)&&(!(void 0!==t.action_time&&!Number.isInteger(t.action_time))&&"string"===typeof t.action_type))}var d=function(){function e(){}return e.prototype.analytics=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o,i;return s(this,(function(a){if(!h(e))throw new Error(JSON.stringify({code:u.INVALID_PARAMS,msg:"["+l+".analytics] invalid report data"}));return t="analytics.report",n=void 0===e.report_data.action_time?Math.floor(Date.now()/1e3):e.report_data.action_time,r={analytics_scene:e.report_type,analytics_data:Object.assign({},e.report_data,{action_time:n})},o={requestData:r},i=this.request,i.send(t,o),[2]}))}))},o([f({customInfo:{className:"Cloudbase",methodName:"analytics"},title:"上报调用失败",messages:["请确认以下各项：","  1 - 调用 analytics() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+c]}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],e.prototype,"analytics",null),e}(),y=new d,g={name:l,entity:{analytics:y.analytics}};try{cloudbase.registerComponent(g)}catch(_){}function v(e){try{e.registerComponent(g)}catch(_){console.warn(_)}}},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),o=n("9152"),i=n("e3db");function a(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=c.prototype):(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return f(this,e,t,n)}function f(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?g(e,t,n,r):"string"===typeof t?d(e,t,n):v(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"===typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}function h(e,t){if(l(t),e=u(e,t<0?0:0|_(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|b(t,n);e=u(e,r);var o=e.write(t,n);return o!==r&&(e=e.slice(0,o)),e}function y(e,t){var n=t.length<0?0:0|_(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function g(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),c.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=c.prototype):e=y(e,t),e}function v(e,t){if(c.isBuffer(t)){var n=0|_(t.length);return e=u(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?u(e,0):y(e,t);if("Buffer"===t.type&&i(t.data))return y(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),c.alloc(+e)}function b(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return J(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(r)return J(e).length;t=(""+t).toLowerCase(),r=!0}}function E(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function S(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:O(e,t,n,r,o);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):O(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function O(e,t,n,r,o){var i,a=1,s=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var f=-1;for(i=n;i<s;i++)if(c(e,i)===c(t,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){for(var l=!0,p=0;p<u;p++)if(c(e,i+p)!==c(t,p)){l=!1;break}if(l)return i}return-1}function A(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function I(e,t,n,r){return ee(J(t,e.length-n),e,n,r)}function T(e,t,n,r){return ee(Q(t),e,n,r)}function N(e,t,n,r){return T(e,t,n,r)}function R(e,t,n,r){return ee(Z(t),e,n,r)}function D(e,t,n,r){return ee(X(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);var r=[],o=t;while(o<n){var i,a,s,u,c=e[o],f=null,l=c>239?4:c>223?3:c>191?2:1;if(o+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:i=e[o+1],128===(192&i)&&(u=(31&c)<<6|63&i,u>127&&(f=u));break;case 3:i=e[o+1],a=e[o+2],128===(192&i)&&128===(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a,u>2047&&(u<55296||u>57343)&&(f=u));break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128===(192&i)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s,u>65535&&u<1114112&&(f=u))}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=l}return B(r)}t.Buffer=c,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:a(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return f(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return p(null,e,t,n)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},c.byteLength=b,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):E.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var i=o-r,a=n-t,s=Math.min(i,a),u=this.slice(r,o),f=e.slice(t,n),l=0;l<s;++l)if(u[l]!==f[l]){i=u[l],a=f[l];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return I(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return N(this,e,t,n);case"base64":return R(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function B(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=L));return n}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=z(e[i]);return o}function j(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function U(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function $(e,t,n,r,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function W(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function q(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Y(e,t,n,r,i){return i||q(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,r,23,4),n+4}function V(e,t,n,r,i){return i||q(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=c.prototype;else{var o=t-e;n=new c(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=this[e],o=1,i=0;while(++i<t&&(o*=256))r+=this[e+i]*o;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=this[e+--t],o=1;while(t>0&&(o*=256))r+=this[e+--t]*o;return r},c.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=this[e],o=1,i=0;while(++i<t&&(o*=256))r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);var r=t,o=1,i=this[e+--r];while(r>0&&(o*=256))i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;$(this,e,t,n,o,0)}var i=1,a=0;this[t]=255&e;while(++a<n&&(i*=256))this[t+a]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;$(this,e,t,n,o,0)}var i=n-1,a=1;this[t+i]=255&e;while(--i>=0&&(a*=256))this[t+i]=e/a&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):W(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):W(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);$(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;this[t]=255&e;while(++i<n&&(a*=256))e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);$(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;this[t+i]=255&e;while(--i>=0&&(a*=256))e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):W(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):W(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return Y(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return Y(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=c.isBuffer(e)?e:J(new c(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function H(e){if(e=K(e).replace(G,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function K(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function J(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function X(e,t){for(var n,r,o,i=[],a=0;a<e.length;++a){if((t-=2)<0)break;n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r)}return i}function Z(e){return r.toByteArray(H(e))}function ee(e,t,n,r){for(var o=0;o<r;++o){if(o+n>=t.length||o>=e.length)break;t[o+n]=e[o]}return o}function te(e){return e!==e}}).call(this,n("c8ba"))},b93b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n("a34a")),o=n("f399"),i=n("63ea"),a=n("21da"),s=n("d877"),u=n("7319");function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var g=function(){function e(t,n){h(this,e),this._stages=[],t&&n&&(this._db=t,this._request=new o.Db.reqClass(this._db.config),this._collectionName=n)}return y(e,[{key:"end",value:function(){var e=p(r.default.mark((function e(){var t;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._collectionName&&this._db){e.next=2;break}throw new Error("Aggregation pipeline cannot send request");case 2:return e.next=4,this._request.send("database.aggregateDocuments",{collectionName:this._collectionName,stages:this._stages});case 4:if(t=e.sent,!(t&&t.data&&t.data.list)){e.next=7;break}return e.abrupt("return",{requestId:t.requestId,data:t.data.list.map(i.EJSON.parse)});case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"unwrap",value:function(){return this._stages}},{key:"done",value:function(){return this._stages.map((function(e){var t=e.stageKey,n=e.stageValue;return f({},t,JSON.parse(n))}))}},{key:"_pipe",value:function(e,t){var n="";return n="object"===(0,u.getType)(t)?(0,s.stringifyByEJSON)(t):JSON.stringify(t),this._stages.push({stageKey:"$".concat(e),stageValue:n}),this}},{key:"addFields",value:function(e){return this._pipe("addFields",e)}},{key:"bucket",value:function(e){return this._pipe("bucket",e)}},{key:"bucketAuto",value:function(e){return this._pipe("bucketAuto",e)}},{key:"count",value:function(e){return this._pipe("count",e)}},{key:"geoNear",value:function(e){return e.query&&(e.query=a.QuerySerializer.encode(e.query)),this._pipe("geoNear",e)}},{key:"group",value:function(e){return this._pipe("group",e)}},{key:"limit",value:function(e){return this._pipe("limit",e)}},{key:"match",value:function(e){return this._pipe("match",a.QuerySerializer.encode(e))}},{key:"project",value:function(e){return this._pipe("project",e)}},{key:"lookup",value:function(e){return this._pipe("lookup",e)}},{key:"replaceRoot",value:function(e){return this._pipe("replaceRoot",e)}},{key:"sample",value:function(e){return this._pipe("sample",e)}},{key:"skip",value:function(e){return this._pipe("skip",e)}},{key:"sort",value:function(e){return this._pipe("sort",e)}},{key:"sortByCount",value:function(e){return this._pipe("sortByCount",e)}},{key:"unwind",value:function(e){return this._pipe("unwind",e)}}]),e}();t.default=g},bbdd:function(e,t,n){var r=function(){return this||"object"===typeof self&&self}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n("96cf"),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(a){r.regeneratorRuntime=void 0}},bdc9:function(e,t,n){"use strict";var r,o;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.QueryType=t.UpdateOperatorList=t.OrderDirectionList=t.OperatorMap=t.Opeartor=t.WhereFilterOpList=t.FieldType=t.ErrorCode=void 0,t.ErrorCode=o,function(e){e["DocIDError"]="文档ID不合法",e["CollNameError"]="集合名称不合法",e["OpStrError"]="操作符不合法",e["DirectionError"]="排序字符不合法",e["IntergerError"]="must be integer",e["BooleanError"]="must be boolean",e["ArrayError"]="must be array",e["QueryParamTypeError"]="查询参数必须为对象",e["QueryParamValueError"]="查询参数对象值不能均为undefined",e["CentersPhereError"]="centersPhere结构不合法"}(o||(t.ErrorCode=o={}));var a={String:"String",Number:"Number",Object:"Object",Array:"Array",Boolean:"Boolean",Null:"Null",GeoPoint:"GeoPoint",GeoLineString:"GeoLineString",GeoPolygon:"GeoPolygon",GeoMultiPoint:"GeoMultiPoint",GeoMultiLineString:"GeoMultiLineString",GeoMultiPolygon:"GeoMultiPolygon",Date:"Date",Command:"Command",ServerDate:"ServerDate",BsonDate:"BsonDate"};t.FieldType=a;var s=["desc","asc"];t.OrderDirectionList=s;var u,c=["<","<=","==",">=",">"];t.WhereFilterOpList=c,t.Opeartor=u,function(e){e["lt"]="<",e["gt"]=">",e["lte"]="<=",e["gte"]=">=",e["eq"]="=="}(u||(t.Opeartor=u={}));var f=(r={},i(r,u.eq,"$eq"),i(r,u.lt,"$lt"),i(r,u.lte,"$lte"),i(r,u.gt,"$gt"),i(r,u.gte,"$gte"),r);t.OperatorMap=f;var l,p=["$set","$inc","$mul","$unset","$push","$pop","$unshift","$shift","$currentDate","$each","$position"];t.UpdateOperatorList=p,t.QueryType=l,function(e){e["WHERE"]="WHERE",e["DOC"]="DOC"}(l||(t.QueryType=l={}))},be7e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerAuth=C,t.registerProvider=L,Object.defineProperty(t,"AuthProvider",{enumerable:!0,get:function(){return u.AuthProvider}}),t.eventBus=t.EVENTS=t.Auth=t.LoginState=void 0;var r=n("5fbe"),o=n("5c2c"),i=n("221a"),a=n("ee3a"),s=n("2707"),u=n("fd2f"),c=n("052b"),f=n("2e91"),l=n("7ae2"),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)},h=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},v=r.events.CloudbaseEventEmitter,_=r.adapters.RUNTIME,m=r.utils.printWarn,b=r.utils.throwError,E=r.utils.transformPhone,w=r.constants.ERRORS,S=r.constants.COMMUNITY_SITE_URL,O=r.helpers.catchErrorsDecorator,A="auth",I=new v;t.eventBus=I;var T=function(){function e(e){var t=e.cache,n=e.request;this._cache=t,this._request=n,this._setUserInfo()}return e.prototype.checkLocalInfo=function(){return y(this,void 0,void 0,(function(){return g(this,(function(e){return this.uid=this._getLocalUserInfo("uid"),this.loginType=this._getLocalUserInfo("loginType"),this.openid=this._getLocalUserInfo("wxOpenId"),this.wxOpenId=this._getLocalUserInfo("wxOpenId"),this.wxPublicId=this._getLocalUserInfo("wxPublicId"),this.unionId=this._getLocalUserInfo("wxUnionId"),this.qqMiniOpenId=this._getLocalUserInfo("qqMiniOpenId"),this.customUserId=this._getLocalUserInfo("customUserId"),this.nickName=this._getLocalUserInfo("nickName"),this.gender=this._getLocalUserInfo("gender"),this.avatarUrl=this._getLocalUserInfo("avatarUrl"),this.email=this._getLocalUserInfo("email"),this.hasPassword=Boolean(this._getLocalUserInfo("hasPassword")),this.phone=this._getLocalUserInfo("phone"),this.location={country:this._getLocalUserInfo("country"),province:this._getLocalUserInfo("province"),city:this._getLocalUserInfo("city")},[2]}))}))},e.prototype.checkLocalInfoAsync=function(){return y(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,s,u,c,f,l,p,h,d,y,v;return g(this,(function(g){switch(g.label){case 0:return e=this,[4,this._getLocalUserInfoAsync("uid")];case 1:return e.uid=g.sent(),t=this,[4,this._getLocalUserInfoAsync("loginType")];case 2:return t.loginType=g.sent(),n=this,[4,this._getLocalUserInfoAsync("wxOpenId")];case 3:return n.openid=g.sent(),r=this,[4,this._getLocalUserInfoAsync("wxOpenId")];case 4:return r.wxOpenId=g.sent(),o=this,[4,this._getLocalUserInfoAsync("wxPublicId")];case 5:return o.wxPublicId=g.sent(),i=this,[4,this._getLocalUserInfoAsync("wxUnionId")];case 6:return i.unionId=g.sent(),a=this,[4,this._getLocalUserInfoAsync("qqMiniOpenId")];case 7:return a.qqMiniOpenId=g.sent(),s=this,[4,this._getLocalUserInfoAsync("customUserId")];case 8:return s.customUserId=g.sent(),u=this,[4,this._getLocalUserInfoAsync("nickName")];case 9:return u.nickName=g.sent(),c=this,[4,this._getLocalUserInfoAsync("gender")];case 10:return c.gender=g.sent(),f=this,[4,this._getLocalUserInfoAsync("avatarUrl")];case 11:return f.avatarUrl=g.sent(),l=this,[4,this._getLocalUserInfoAsync("email")];case 12:return l.email=g.sent(),p=this,h=Boolean,[4,this._getLocalUserInfoAsync("hasPassword")];case 13:return p.hasPassword=h.apply(void 0,[g.sent()]),d=this,[4,this._getLocalUserInfoAsync("phone")];case 14:return d.phone=g.sent(),y=this,v={},[4,this._getLocalUserInfoAsync("country")];case 15:return v.country=g.sent(),[4,this._getLocalUserInfoAsync("province")];case 16:return v.province=g.sent(),[4,this._getLocalUserInfoAsync("city")];case 17:return y.location=(v.city=g.sent(),v),[2]}}))}))},e.prototype.linkWithTicket=function(e){if("string"!==typeof e)throw new Error("ticket must be string");return this._request.send("auth.linkWithTicket",{ticket:e})},e.prototype.linkWithRedirect=function(e){e.signInWithRedirect()},e.prototype.getLinkedUidList=function(){return y(this,void 0,void 0,(function(){var e,t,n,r,o,i;return g(this,(function(a){switch(a.label){case 0:return[4,this._request.send("auth.getLinkedUidList",{})];case 1:for(e=a.sent().data,t=!1,n=e.users,r=0,o=n;r<o.length;r++)if(i=o[r],i.wxOpenId&&i.wxPublicId){t=!0;break}return[2,{users:n,hasPrimaryUid:t}]}}))}))},e.prototype.setPrimaryUid=function(e){return this._request.send("auth.setPrimaryUid",{uid:e})},e.prototype.unlink=function(e){return this._request.send("auth.unlink",{platform:e})},e.prototype.update=function(e){return y(this,void 0,void 0,(function(){var t,n,r,o,i,a,s;return g(this,(function(u){switch(u.label){case 0:return t=e.nickName,n=e.gender,r=e.avatarUrl,o=e.province,i=e.country,a=e.city,[4,this._request.send("auth.updateUserInfo",{nickName:t,gender:n,avatarUrl:r,province:o,country:i,city:a})];case 1:return s=u.sent().data,this._setLocalUserInfo(s),[2]}}))}))},e.prototype.updatePassword=function(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})},e.prototype.updateEmail=function(e){return this._request.send("auth.updateEmail",{newEmail:e})},e.prototype.updateUsername=function(e){return"string"!==typeof e&&b(w.INVALID_PARAMS,"username must be a string"),this._request.send("auth.updateUsername",{username:e})},e.prototype.refresh=function(){return y(this,void 0,void 0,(function(){var e,t;return g(this,(function(n){switch(n.label){case 0:return e="auth.getUserInfo",[4,this._request.send(e,{})];case 1:return t=n.sent().data,this._setLocalUserInfo(t),[2,t]}}))}))},e.prototype.linkWithPhoneNumber=function(e,t){return y(this,void 0,void 0,(function(){return g(this,(function(n){return[2,this._request.send("auth.linkOrUpdatePhoneNumber",{phoneNumber:E(e),phoneCode:t})]}))}))},e.prototype.updatePhoneNumber=function(e,t){return y(this,void 0,void 0,(function(){return g(this,(function(n){return[2,this._request.send("auth.linkOrUpdatePhoneNumber",{phoneNumber:E(e),phoneCode:t})]}))}))},e.prototype._getLocalUserInfo=function(e){var t=this._cache.keys.userInfoKey,n=this._cache.getStore(t);return n[e]},e.prototype._getLocalUserInfoAsync=function(e){return y(this,void 0,void 0,(function(){var t,n;return g(this,(function(r){switch(r.label){case 0:return t=this._cache.keys.userInfoKey,[4,this._cache.getStoreAsync(t)];case 1:return n=r.sent(),[2,n[e]]}}))}))},e.prototype._setUserInfo=function(){var e=this,t=this._cache.keys.userInfoKey,n=this._cache.getStore(t);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl","phone"].forEach((function(t){e[t]=n[t]})),this.location={country:n["country"],province:n["province"],city:n["city"]}},e.prototype._setLocalUserInfo=function(e){var t=this._cache.keys.userInfoKey;this._cache.setStore(t,e),this._setUserInfo()},h([O({title:"绑定自定义登录失败",messages:["请确认以下各项：","  1 - 调用 User.linkWithTicket() 的语法或参数是否正确","  2 - 此账户是否已经绑定自定义登录","  3 - ticket 参数是否归属当前环境","  4 - 创建 ticket 的自定义登录私钥是否过期","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String]),d("design:returntype",Promise)],e.prototype,"linkWithTicket",null),h([O({title:"绑定第三方登录方式失败",messages:["请确认以下各项：","  1 - 调用 User.linkWithRedirect() 的语法或参数是否正确","  2 - 此账户是否已经绑定此第三方","  3 - 此第三方是否已经授权","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e.prototype,"linkWithRedirect",null),h([O({title:"获取账户列表失败",messages:["请确认以下各项：","  1 - 调用 User.getLinkedUidList() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",Promise)],e.prototype,"getLinkedUidList",null),h([O({title:"设置微信主账号失败",messages:["请确认以下各项：","  1 - 调用 User.setPrimaryUid() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String]),d("design:returntype",void 0)],e.prototype,"setPrimaryUid",null),h([O({title:"接触绑定失败",messages:["请确认以下各项：","  1 - 调用 User.unlink() 的语法或参数是否正确","  2 - 当前账户是否已经与此登录方式解绑","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String]),d("design:returntype",void 0)],e.prototype,"unlink",null),h([O({title:"更新用户信息失败",messages:["请确认以下各项：","  1 - 调用 User.update() 的语法或参数是否正确","  2 - 用户信息中是否包含非法值","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",Promise)],e.prototype,"update",null),h([O({title:"更新密码失败",messages:["请确认以下各项：","  1 - 调用 User.updatePassword() 的语法或参数是否正确","  3 - 新密码中是否包含非法字符","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String,String]),d("design:returntype",void 0)],e.prototype,"updatePassword",null),h([O({title:"更新邮箱地址失败",messages:["请确认以下各项：","  1 - 调用 User.updateEmail() 的语法或参数是否正确","  2 - 当前环境是否开通了邮箱密码登录","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String]),d("design:returntype",void 0)],e.prototype,"updateEmail",null),h([O({title:"更新用户名失败",messages:["请确认以下各项：","  1 - 调用 User.updateUsername() 的语法或参数是否正确","  2 - 当前环境是否开通了用户名密码登录","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String]),d("design:returntype",void 0)],e.prototype,"updateUsername",null),h([O({title:"刷新本地用户信息失败",messages:["请确认以下各项：","  1 - 调用 User.refresh() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",Promise)],e.prototype,"refresh",null),h([O({title:"绑定手机号失败",messages:["请确认以下各项：","  1 - 调用 auth().linkWithPhoneNumber() 的语法或参数是否正确","  2 - 当前环境是否开通了短信验证码登录","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String,String]),d("design:returntype",Promise)],e.prototype,"linkWithPhoneNumber",null),h([O({title:"更新手机号失败",messages:["请确认以下各项：","  1 - 调用语法或参数是否正确","  2 - 当前环境是否开通了短信验证码登录","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String,String]),d("design:returntype",Promise)],e.prototype,"updatePhoneNumber",null),e}(),N=function(){function e(e){var t=e.envId,n=e.cache,r=e.request;t||b(w.INVALID_PARAMS,"envId is not defined"),this._cache=n,this.user=new T({cache:n,request:r})}return e.prototype.checkLocalState=function(){return y(this,void 0,void 0,(function(){var e,t,n,r,o,i,a;return g(this,(function(s){return e=this._cache.keys,t=e.refreshTokenKey,n=e.accessTokenKey,r=e.accessTokenExpireKey,o=this._cache.getStore(t),i=this._cache.getStore(n),a=this._cache.getStore(r),this.credential={refreshToken:o,accessToken:i,accessTokenExpire:a},this._loginType=this._cache.getStore(this._cache.keys.loginTypeKey),this.user.checkLocalInfo(),[2]}))}))},e.prototype.checkLocalStateAsync=function(){return y(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,s;return g(this,(function(u){switch(u.label){case 0:return e=this._cache.keys,t=e.refreshTokenKey,n=e.accessTokenKey,r=e.accessTokenExpireKey,[4,this._cache.getStoreAsync(t)];case 1:return o=u.sent(),[4,this._cache.getStoreAsync(n)];case 2:return i=u.sent(),[4,this._cache.getStoreAsync(r)];case 3:return a=u.sent(),this.credential={refreshToken:o,accessToken:i,accessTokenExpire:a},s=this,[4,this._cache.getStoreAsync(this._cache.keys.loginTypeKey)];case 4:return s._loginType=u.sent(),[4,this.user.checkLocalInfoAsync()];case 5:return u.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"isAnonymousAuth",{get:function(){return this.loginType===s.LOGINTYPE.ANONYMOUS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCustomAuth",{get:function(){return this.loginType===s.LOGINTYPE.CUSTOM},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWeixinAuth",{get:function(){return this.loginType===s.LOGINTYPE.WECHAT||this.loginType===s.LOGINTYPE.WECHAT_OPEN||this.loginType===s.LOGINTYPE.WECHAT_PUBLIC},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsernameAuth",{get:function(){return this.loginType===s.LOGINTYPE.USERNAME},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loginType",{get:function(){return this._loginType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPhoneAuth",{get:function(){return this.loginType===s.LOGINTYPE.PHONE},enumerable:!1,configurable:!0}),e}();t.LoginState=N;var R=function(){function e(e){this._config=e,this._cache=e.cache,this._request=e.request,this._runtime=e.runtime||_.WEB,I.on(D.LOGIN_TYPE_CHANGED,this._onLoginTypeChanged.bind(this))}return Object.defineProperty(e.prototype,"currentUser",{get:function(){if("async"!==this._cache.mode){var e=this.hasLoginState();return e&&e.user||null}m(w.INVALID_OPERATION,"current platform's storage is asynchronous, please use getCurrenUser insteed")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loginType",{get:function(){return this._cache.getStore(this._cache.keys.loginTypeKey)},enumerable:!1,configurable:!0}),e.prototype.getCurrenUser=function(){return y(this,void 0,void 0,(function(){var e;return g(this,(function(t){switch(t.label){case 0:return[4,this.getLoginState()];case 1:return e=t.sent(),e?[4,e.user.checkLocalInfoAsync()]:[3,3];case 2:return t.sent(),[2,e.user||null];case 3:return[2,null]}}))}))},e.prototype.getLoginType=function(){return y(this,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return[4,this._cache.getStoreAsync(this._cache.keys.loginTypeKey)];case 1:return[2,e.sent()]}}))}))},e.prototype.getAccessToken=function(){return y(this,void 0,void 0,(function(){var e;return g(this,(function(t){switch(t.label){case 0:return e={},[4,this._request.getAccessToken()];case 1:return[2,(e.accessToken=t.sent().accessToken,e.env=this._config.env,e)]}}))}))},e.prototype.weixinAuthProvider=function(e){var t=e.appid,n=e.scope,r=e.state;return this._weixinAuthProvider||(this._weixinAuthProvider=new o.WeixinAuthProvider(p(p({},this._config),{cache:this._cache,request:this._request,runtime:this._runtime}),t,n,r)),this._weixinAuthProvider},e.prototype.anonymousAuthProvider=function(){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new i.AnonymousAuthProvider(p(p({},this._config),{cache:this._cache,request:this._request}))),this._anonymousAuthProvider},e.prototype.customAuthProvider=function(){return this._customAuthProvider||(this._customAuthProvider=new a.CustomAuthProvider(p(p({},this._config),{cache:this._cache,request:this._request}))),this._customAuthProvider},e.prototype.emailAuthProvider=function(){return this._emailAuthProvider||(this._emailAuthProvider=new c.EmailAuthProvider(p(p({},this._config),{cache:this._cache,request:this._request}))),this._emailAuthProvider},e.prototype.usernameAuthProvider=function(){return this._usernameAuthProvider||(this._usernameAuthProvider=new f.UsernameAuthProvider(p(p({},this._config),{cache:this._cache,request:this._request}))),this._usernameAuthProvider},e.prototype.phoneAuthProvider=function(){return this._phoneAuthProvider||(this._phoneAuthProvider=new l.PhoneAuthProvider(p(p({},this._config),{cache:this._cache,request:this._request}))),this._phoneAuthProvider},e.prototype.signInWithUsernameAndPassword=function(e,t){return y(this,void 0,void 0,(function(){return g(this,(function(n){return[2,this.usernameAuthProvider().signIn(e,t)]}))}))},e.prototype.isUsernameRegistered=function(e){return y(this,void 0,void 0,(function(){var t;return g(this,(function(n){switch(n.label){case 0:return"string"!==typeof e&&b(w.INVALID_PARAMS,"username must be a string"),[4,this._request.send("auth.isUsernameRegistered",{username:e})];case 1:return t=n.sent().data,[2,null===t||void 0===t?void 0:t.isRegistered]}}))}))},e.prototype.signInWithEmailAndPassword=function(e,t){return y(this,void 0,void 0,(function(){return g(this,(function(n){return[2,this.emailAuthProvider().signIn(e,t)]}))}))},e.prototype.signUpWithEmailAndPassword=function(e,t){return y(this,void 0,void 0,(function(){return g(this,(function(n){return[2,this.emailAuthProvider().signUp(e,t)]}))}))},e.prototype.sendPasswordResetEmail=function(e){return y(this,void 0,void 0,(function(){return g(this,(function(t){return[2,this.emailAuthProvider().resetPassword(e)]}))}))},e.prototype.signOut=function(){return y(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,u;return g(this,(function(c){switch(c.label){case 0:return[4,this.getLoginType()];case 1:if(e=c.sent(),e===s.LOGINTYPE.ANONYMOUS)throw new Error(JSON.stringify({code:w.INVALID_OPERATION,msg:"anonymous user doesn't support signOut action"}));return t=this._cache.keys,n=t.refreshTokenKey,r=t.accessTokenKey,o=t.accessTokenExpireKey,i="auth.logout",[4,this._cache.getStoreAsync(n)];case 2:return a=c.sent(),a?[4,this._request.send(i,{refresh_token:a})]:[2];case 3:return u=c.sent(),this._cache.removeStoreAsync(n),this._cache.removeStoreAsync(r),this._cache.removeStoreAsync(o),I.fire(D.LOGIN_STATE_CHANGED),I.fire(D.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:s.LOGINTYPE.NULL,persistence:this._config.persistence}),[2,u]}}))}))},e.prototype.onLoginStateChanged=function(e){return y(this,void 0,void 0,(function(){var t,n=this;return g(this,(function(r){switch(r.label){case 0:return I.on(D.LOGIN_STATE_CHANGED,(function(){return y(n,void 0,void 0,(function(){var t;return g(this,(function(n){switch(n.label){case 0:return[4,this.getLoginState()];case 1:return t=n.sent(),e.call(this,t),[2]}}))}))})),[4,this.getLoginState()];case 1:return t=r.sent(),e.call(this,t),[2]}}))}))},e.prototype.onLoginStateExpired=function(e){I.on(D.LOGIN_STATE_EXPIRED,e.bind(this))},e.prototype.onAccessTokenRefreshed=function(e){I.on(D.ACCESS_TOKEN_REFRESHD,e.bind(this))},e.prototype.onAnonymousConverted=function(e){I.on(D.ANONYMOUS_CONVERTED,e.bind(this))},e.prototype.onLoginTypeChanged=function(e){var t=this;I.on(D.LOGIN_TYPE_CHANGED,(function(){return y(t,void 0,void 0,(function(){var t;return g(this,(function(n){switch(n.label){case 0:return[4,this.getLoginState()];case 1:return t=n.sent(),e.call(this,t),[2]}}))}))}))},e.prototype.hasLoginState=function(){if("async"!==this._cache.mode){var e=this._cache.keys.refreshTokenKey,t=this._cache.getStore(e);if(t){var n=new N({envId:this._config.env,cache:this._cache,request:this._request});return n.checkLocalState(),n}return null}m(w.INVALID_OPERATION,"current platform's storage is asynchronous, please use getLoginState insteed")},e.prototype.getLoginState=function(){return y(this,void 0,void 0,(function(){var e,t,n;return g(this,(function(r){switch(r.label){case 0:return e=this._cache.keys.refreshTokenKey,[4,this._cache.getStoreAsync(e)];case 1:return t=r.sent(),t?(n=new N({envId:this._config.env,cache:this._cache,request:this._request}),[4,n.checkLocalStateAsync()]):[3,3];case 2:return r.sent(),[2,n];case 3:return[2,null]}}))}))},e.prototype.shouldRefreshAccessToken=function(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)},e.prototype.getUserInfo=function(){return y(this,void 0,void 0,(function(){var e,t;return g(this,(function(n){switch(n.label){case 0:return e="auth.getUserInfo",[4,this._request.send(e,{})];case 1:return t=n.sent(),t.code?[2,t]:[2,p(p({},t.data),{requestId:t.seqId})]}}))}))},e.prototype.getAuthHeader=function(){var e=this._cache.keys,t=e.refreshTokenKey,n=e.accessTokenKey,r=this._cache.getStore(t),o=this._cache.getStore(n);return{"x-cloudbase-credentials":o+"/@@/"+r}},e.prototype.getAuthHeaderAsync=function(){return y(this,void 0,void 0,(function(){var e,t,n,r,o;return g(this,(function(i){switch(i.label){case 0:return[4,this._request.refreshAccessToken()];case 1:return i.sent(),e=this._cache.keys,t=e.refreshTokenKey,n=e.accessTokenKey,[4,this._cache.getStoreAsync(t)];case 2:return r=i.sent(),[4,this._cache.getStoreAsync(n)];case 3:return o=i.sent(),[2,{"x-cloudbase-credentials":o+"/@@/"+r}]}}))}))},e.prototype.sendPhoneCode=function(e){return y(this,void 0,void 0,(function(){var t;return g(this,(function(n){switch(n.label){case 0:return[4,this._request.send("auth.sendPhoneCode",{phoneNumber:E(e)})];case 1:return t=n.sent().data,[2,"Ok"===t.SendStatus]}}))}))},e.prototype.signUpWithPhoneCode=function(e,t,n){return y(this,void 0,void 0,(function(){return g(this,(function(r){return[2,this.phoneAuthProvider().signUp(e,t,n)]}))}))},e.prototype.signInWithPhoneCodeOrPassword=function(e){return y(this,void 0,void 0,(function(){return g(this,(function(t){return[2,this.phoneAuthProvider().signIn(e)]}))}))},e.prototype._onLoginTypeChanged=function(e){return y(this,void 0,void 0,(function(){var t,n,r,o;return g(this,(function(i){switch(i.label){case 0:return t=e.data,n=t.loginType,r=t.persistence,o=t.env,o!==this._config.env?[2]:[4,this._cache.updatePersistenceAsync(r)];case 1:return i.sent(),[4,this._cache.setStoreAsync(this._cache.keys.loginTypeKey,n)];case 2:return i.sent(),[2]}}))}))},h([O({title:"获取用户信息失败",messages:["请确认以下各项：","  1 - 调用 auth().getCurrenUser() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",Promise)],e.prototype,"getCurrenUser",null),h([O({title:"获取用户是否被占用失败",messages:["请确认以下各项：","  1 - 调用 auth().isUsernameRegistered() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String]),d("design:returntype",Promise)],e.prototype,"isUsernameRegistered",null),h([O({title:"用户登出失败",messages:["请确认以下各项：","  1 - 调用 auth().signOut() 的语法或参数是否正确","  2 - 当前用户是否为匿名登录（匿名登录不支持signOut）","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",Promise)],e.prototype,"signOut",null),h([O({title:"获取本地登录态失败",messages:["请确认以下各项：","  1 - 调用 auth().getLoginState() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",Promise)],e.prototype,"getLoginState",null),h([O({title:"获取用户信息失败",messages:["请确认以下各项：","  1 - 是否已登录","  2 - 调用 auth().getUserInfo() 的语法或参数是否正确","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",Promise)],e.prototype,"getUserInfo",null),h([O({title:"发送短信验证码失败",messages:["请确认以下各项：","  1 - 调用语法或参数是否正确","  2 - 当前环境是否开通了短信验证码登录","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+S]}),d("design:type",Function),d("design:paramtypes",[String]),d("design:returntype",Promise)],e.prototype,"sendPhoneCode",null),e}();t.Auth=R;var D={LOGIN_STATE_CHANGED:"loginStateChanged",LOGIN_STATE_EXPIRED:"loginStateExpire",LOGIN_TYPE_CHANGED:"loginTypeChanged",ANONYMOUS_CONVERTED:"anonymousConverted",ACCESS_TOKEN_REFRESHD:"refreshAccessToken"};t.EVENTS=D;var P={name:A,namespace:"auth",injectEvents:{bus:I,events:[D.LOGIN_TYPE_CHANGED,D.LOGIN_STATE_EXPIRED,D.LOGIN_STATE_CHANGED,D.ACCESS_TOKEN_REFRESHD,D.ANONYMOUS_CONVERTED]},entity:function(e){if(void 0===e&&(e={region:"",persistence:"local"}),this.authInstance)return m(w.INVALID_OPERATION,"every cloudbase instance should has only one auth object"),this.authInstance;var t=this.platform,n=t.adapter,r=t.runtime,o=e.persistence||n.primaryStorage;o&&o!==this.config.persistence&&this.updateConfig({persistence:o});var i=this.config,a=i.env,s=i.persistence,u=i.debug;return this.authInstance=new R({env:a,region:e.region,persistence:s,debug:u,cache:this.cache,request:this.request,runtime:r}),this.authInstance}};try{cloudbase.registerComponent(P)}catch(B){}function C(e){try{e.registerComponent(P)}catch(B){console.warn(B)}}function L(e,t){var n=R.prototype;n[e]=function(n){var r="_"+e;return this[r]||(this[r]=new t(p(p({},n),this._config))),this[r]}}},c20f:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.WxMpWebSocket=t.wxMpStorage=t.WxRequest=void 0;var r=n("58ef"),o=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};function u(){if("undefined"===typeof wx)return!1;if("undefined"===typeof Page)return!1;if(!wx.getSystemInfoSync)return!1;if(!wx.getStorageSync)return!1;if(!wx.setStorageSync)return!1;if(!wx.connectSocket)return!1;if(!wx.request)return!1;try{if(!wx.getSystemInfoSync())return!1;if("qq"===wx.getSystemInfoSync().AppPlatform)return!1}catch(e){return!1}return!0}function c(){return"undefined"===typeof App&&"undefined"===typeof getApp&&!wx.onAppHide&&!wx.offAppHide&&!wx.onAppShow&&!wx.offAppShow}var f=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this,r=t.timeout,o=t.timeoutMsg,i=t.restrictedMethods;return n._timeout=r||0,n._timeoutMsg=o||"请求超时",n._restrictedMethods=i||["get","post","upload","download"],n}return o(t,e),t.prototype.post=function(e){var t=this;return new Promise((function(n,o){var i=e.url,a=e.data,s=e.headers,u=wx.request({url:(0,r.formatUrl)("https:",i),data:a,timeout:t._timeout,method:"POST",header:s,success:function(e){n(e)},fail:function(e){o(e)},complete:function(e){if(e&&e.errMsg&&t._timeout&&-1!==t._restrictedMethods.indexOf("post")){var n=e.errMsg;if("request:fail timeout"===n){console.warn(t._timeoutMsg);try{u.abort()}catch(r){}}}}})}))},t.prototype.upload=function(e){var t=this,n=this;return new Promise((function(r){return a(t,void 0,void 0,(function(){var t,o,a,u,c,f;return s(this,(function(s){return t=e.url,o=e.file,a=e.data,u=e.headers,c=e.onUploadProgress,f=wx.uploadFile({url:t,filePath:o,name:"file",formData:i({},a),header:u,timeout:this._timeout,success:function(e){var t={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&a.success_action_status&&(t.statusCode=parseInt(a.success_action_status,10)),r(t)},fail:function(e){r(e)},complete:function(e){if(e&&e.errMsg&&n._timeout&&-1!==n._restrictedMethods.indexOf("upload")){var t=e.errMsg;if("request:fail timeout"===t){console.warn(n._timeoutMsg);try{f.abort()}catch(r){}}}}}),c&&f.onProgressUpdate((function(e){c(e)})),[2]}))}))}))},t.prototype.download=function(e){var t=this,n=this;return new Promise((function(o,i){var a=e.url,s=e.headers,u=wx.downloadFile({url:(0,r.formatUrl)("https:",a),header:s,timeout:t._timeout,success:function(e){200===e.statusCode&&e.tempFilePath?o({statusCode:200,tempFilePath:e.tempFilePath}):o(e)},fail:function(e){i(e)},complete:function(e){if(e&&e.errMsg&&n._timeout&&-1!==n._restrictedMethods.indexOf("download")){var t=e.errMsg;if("request:fail timeout"===t){console.warn(n._timeoutMsg);try{u.abort()}catch(r){}}}}})}))},t}(r.AbstractSDKRequest);t.WxRequest=f;var l={setItem:function(e,t){wx.setStorageSync(e,t)},getItem:function(e){return wx.getStorageSync(e)},removeItem:function(e){wx.removeStorageSync(e)},clear:function(){wx.clearStorageSync()}};t.wxMpStorage=l;var p=function(){function e(e,t){void 0===t&&(t={});var n=wx.connectSocket(i({url:e},t)),r={set onopen(e){n.onOpen(e)},set onmessage(e){n.onMessage(e)},set onclose(e){n.onClose(e)},set onerror(e){n.onError(e)},send:function(e){return n.send({data:e})},close:function(e,t){return n.close({code:e,reason:t})},get readyState(){return n.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};return r}return e}();function h(){var e={root:{},reqClass:f,wsClass:p,localStorage:l,primaryStorage:r.StorageType.local,getAppSign:function(){var e=wx.getAccountInfoSync();return c()?e&&e.plugin?e.plugin.appId:"":e&&e.miniProgram?e.miniProgram.appId:""}};return e}t.WxMpWebSocket=p;var d={genAdapter:h,isMatch:u,runtime:"wx_mp"},y=d;t.default=y},c508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Query=void 0;var r=d(n("a34a")),o=n("bdc9"),i=n("f399"),a=n("9911"),s=n("60fd"),u=n("21da"),c=n("e5d0"),f=n("1a3f"),l=n("d877"),p=n("295d"),h=n("63ea");function d(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){g(i,r,o,a,s,"next",e)}function s(e){g(i,r,o,a,s,"throw",e)}a(void 0)}))}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var E=function(){function e(t,n,r,o,a){var s=this;_(this,e),this.watch=function(e){i.Db.ws||(i.Db.ws=new f.RealtimeWebSocketClient({context:{appConfig:{docSizeLimit:1e3,realtimePingInterval:1e4,realtimePongWaitTimeout:5e3,request:s._request}}}));var t=s._apiOptions,n=t.limit,r=t.order;return i.Db.ws.watch(Object.assign(Object.assign({},e),{envId:s._db.config.env,collectionName:s._coll,query:JSON.stringify(s._fieldFilters),limit:n,orderBy:r?r.reduce((function(e,t){return e[t.field]=t.direction,e}),{}):void 0}))},this._db=t,this._coll=n,this._fieldFilters=r,this._apiOptions=o||{},this._request=new i.Db.reqClass(this._db.config),this._transactionId=a}return b(e,[{key:"get",value:function(){var e=v(r.default.mark((function e(){var t,n,i,a,u,c,f,p,d;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this._apiOptions.order,n={collectionName:this._coll,queryType:o.QueryType.WHERE,transactionId:this._transactionId},this._fieldFilters&&(n.query=this._fieldFilters),t&&(n.order=(0,l.stringifyByEJSON)(t)),i=this._apiOptions.offset,i&&(n.offset=i),a=this._apiOptions.limit,n.limit=a?a<1e3?a:1e3:100,u=this._apiOptions.projection,u&&(n.projection=(0,l.stringifyByEJSON)(u)),e.next=12,this._request.send("database.getDocument",n,(0,l.getReqOpts)(this._apiOptions));case 12:if(c=e.sent,!c.code){e.next=15;break}return e.abrupt("return",c);case 15:return f=c.data.list.map((function(e){return h.EJSON.parse(e)})),p=s.Util.formatResDocumentData(f),d={data:p,requestId:c.requestId},c.limit&&(d.limit=c.limit),c.offset&&(d.offset=c.offset),e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"count",value:function(){var e=v(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={collectionName:this._coll,queryType:o.QueryType.WHERE},this._fieldFilters&&(t.query=this._fieldFilters),e.next=4,this._request.send("database.calculateDocument",t,(0,l.getReqOpts)(this._apiOptions));case 4:if(n=e.sent,!n.code){e.next=7;break}return e.abrupt("return",n);case 7:return e.abrupt("return",{requestId:n.requestId,total:n.data.total});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"where",value:function(t){if("Object"!==Object.prototype.toString.call(t).slice(8,-1))throw Error(o.ErrorCode.QueryParamTypeError);var n=Object.keys(t),r=n.some((function(e){return void 0!==t[e]}));if(n.length&&!r)throw Error(o.ErrorCode.QueryParamValueError);return new e(this._db,this._coll,u.QuerySerializer.encodeEJSON(t),this._apiOptions,this._transactionId)}},{key:"options",value:function(t){return a.Validate.isValidOptions(t),new e(this._db,this._coll,this._fieldFilters,t,this._transactionId)}},{key:"orderBy",value:function(t,n){a.Validate.isFieldPath(t),a.Validate.isFieldOrder(n);var r=y({},t,"desc"===n?-1:1),o=this._apiOptions.order||{},i=Object.assign({},this._apiOptions,{order:Object.assign({},o,r)});return new e(this._db,this._coll,this._fieldFilters,i,this._transactionId)}},{key:"limit",value:function(t){a.Validate.isInteger("limit",t);var n=Object.assign({},this._apiOptions);return n.limit=t,new e(this._db,this._coll,this._fieldFilters,n,this._transactionId)}},{key:"skip",value:function(t){a.Validate.isInteger("offset",t);var n=Object.assign({},this._apiOptions);return n.offset=t,new e(this._db,this._coll,this._fieldFilters,n,this._transactionId)}},{key:"update",value:function(){var e=v(r.default.mark((function e(t){var n,i,a,s;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&"object"===typeof t){e.next=2;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.INVALID_PARAM),{message:"参数必需是非空对象"})));case 2:if(!t.hasOwnProperty("_id")){e.next=4;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.INVALID_PARAM),{message:"不能更新_id的值"})));case 4:return n=this._apiOptions.multiple,i=void 0===n||n,a={collectionName:this._coll,queryType:o.QueryType.WHERE,multi:i,merge:!0,upsert:!1,data:c.UpdateSerializer.encodeEJSON(t)},this._fieldFilters&&(a.query=this._fieldFilters),e.next=10,this._request.send("database.modifyDocument",a,(0,l.getReqOpts)(this._apiOptions));case 10:if(s=e.sent,!s.code){e.next=13;break}return e.abrupt("return",s);case 13:return e.abrupt("return",{requestId:s.requestId,updated:s.data.updated,upsertId:s.data.upsert_id});case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"field",value:function(t){var n={};for(var r in t)"boolean"===typeof t[r]&&(n[r]=!0===t[r]?1:0),"number"===typeof t[r]&&(n[r]=t[r]>0?1:0),"object"===typeof t[r]&&(n[r]=t[r]);var o=Object.assign({},this._apiOptions);return o.projection=n,new e(this._db,this._coll,this._fieldFilters,o,this._transactionId)}},{key:"remove",value:function(){var e=v(r.default.mark((function e(){var t,n,i,a,s,u,c,f,p;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this._apiOptions,n=t.offset,i=t.limit,a=t.projection,s=t.order,void 0===n&&void 0===i&&void 0===a&&void 0===s||console.warn("`offset`, `limit`, `projection`, `orderBy` are not supported in remove() operation"),u=this._apiOptions.multiple,c=void 0===u||u,f={collectionName:this._coll,query:this._fieldFilters,queryType:o.QueryType.WHERE,multi:c},e.next=7,this._request.send("database.removeDocument",f,(0,l.getReqOpts)(this._apiOptions));case 7:if(p=e.sent,!p.code){e.next=10;break}return e.abrupt("return",p);case 10:return e.abrupt("return",{requestId:p.requestId,deleted:p.data.deleted});case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAndReturn",value:function(){var e=v(r.default.mark((function e(t){var n,i;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&"object"===typeof t){e.next=2;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.INVALID_PARAM),{message:"参数必需是非空对象"})));case 2:if(!t.hasOwnProperty("_id")){e.next=4;break}return e.abrupt("return",(0,l.processReturn)(this._db.config.throwOnCode,Object.assign(Object.assign({},p.ERRORS.INVALID_PARAM),{message:"不能更新_id的值"})));case 4:return n={collectionName:this._coll,queryType:o.QueryType.WHERE,data:c.UpdateSerializer.encodeEJSON(t)},this._transactionId&&(n.transactionId=this._transactionId),this._fieldFilters&&(n.query=this._fieldFilters),e.next=9,this._request.send("database.modifyAndReturnDoc",n,(0,l.getReqOpts)(this._apiOptions));case 9:if(i=e.sent,!i.code){e.next=12;break}return e.abrupt("return",i);case 12:return e.abrupt("return",{requestId:i.requestId,updated:i.data.updated,doc:i.data.doc&&h.EJSON.parse(i.data.doc)});case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t.Query=E},c6a4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initCache=d,t.getCacheByEnvId=y,t.getLocalCache=g;var r=n("5fbe"),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)},i="access_token",a="access_token_expire",s="refresh_token",u="anonymous_uuid",c="login_type",f="user_info",l=r.cache.CloudbaseCache,p={},h={};function d(e){var t=e.env,n=e.persistence,r=e.platformInfo,d=i+"_"+t,y=a+"_"+t,g=s+"_"+t,v=u+"_"+t,_=c+"_"+t,m=f+"_"+t,b={accessTokenKey:d,accessTokenExpireKey:y,refreshTokenKey:g,anonymousUuidKey:v,loginTypeKey:_,userInfoKey:m};p[t]?p[t].updatePersistence(n):p[t]=new l(o(o({},e),{keys:b,platformInfo:r,alwaysLocalKeys:["anonymousUuidKey"]})),h[t]=h[t]||new l(o(o({},e),{keys:b,platformInfo:r,persistence:"local"}))}function y(e){return p[e]}function g(e){return h[e]}},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},ca7a:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWSCloseError=t.CLOSE_EVENT_CODE=t.CLOSE_EVENT_CODE_INFO=void 0;var r,o=n("7e98"),i=n("36ac"),a={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3050:{code:3050,name:"Server Close",description:"The client is terminating the connection because no heartbeat response is received from the server"}};t.CLOSE_EVENT_CODE_INFO=a,t.CLOSE_EVENT_CODE=r,function(e){e[e["NormalClosure"]=1e3]="NormalClosure",e[e["GoingAway"]=1001]="GoingAway",e[e["ProtocolError"]=1002]="ProtocolError",e[e["UnsupportedData"]=1003]="UnsupportedData",e[e["NoStatusReceived"]=1005]="NoStatusReceived",e[e["AbnormalClosure"]=1006]="AbnormalClosure",e[e["InvalidFramePayloadData"]=1007]="InvalidFramePayloadData",e[e["PolicyViolation"]=1008]="PolicyViolation",e[e["MessageTooBig"]=1009]="MessageTooBig",e[e["MissingExtension"]=1010]="MissingExtension",e[e["InternalError"]=1011]="InternalError",e[e["ServiceRestart"]=1012]="ServiceRestart",e[e["TryAgainLater"]=1013]="TryAgainLater",e[e["BadGateway"]=1014]="BadGateway",e[e["TLSHandshake"]=1015]="TLSHandshake",e[e["ReconnectWebSocket"]=3e3]="ReconnectWebSocket",e[e["NoRealtimeListeners"]=3001]="NoRealtimeListeners",e[e["HeartbeatPingError"]=3002]="HeartbeatPingError",e[e["HeartbeatPongTimeoutError"]=3003]="HeartbeatPongTimeoutError",e[e["NoAuthentication"]=3050]="NoAuthentication"}(r||(t.CLOSE_EVENT_CODE=r={}));var s=function(e,t){var n=a[e],r=n?"".concat(n.name,", code ").concat(e,", reason ").concat(t||n.description):"code ".concat(e);return new o.CloudSDKError({errCode:i.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:r})};t.getWSCloseError=s},caf4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenQueryObject=p,t.flattenObject=h,t.mergeConditionAfterEncode=d,t.isConversionRequired=y,t.encodeInternalDataType=g,t.decodeInternalDataType=v;var r=n("7319"),o=n("8c42");function i(e){return c(e)||u(e)||s(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function u(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,o){var a=Object.assign({},e);for(var s in e)if(!/^\$/.test(s)){var u=e[s];if(void 0!==u){if(u&&(0,r.isObject)(u)&&!t(u)){if(o.indexOf(u)>-1)throw new Error("Cannot convert circular structure to JSON");var c=[].concat(i(n),[s]),f=[].concat(i(o),[u]),p=l(u,t,c,f);a[s]=p;var h=!1;for(var d in p)/^\$/.test(d)?h=!0:(a["".concat(s,".").concat(d)]=p[d],delete a[s][d]);h||delete a[s]}}else delete a[s]}return a}function p(e){return l(e,y,[],[e])}function h(e){return l(e,(function(e){return!1}),[],[e])}function d(e,t,n){for(var o in t[n]||delete e[n],t)e[o]?(0,r.isArray)(e[o])?e[o].push(t[o]):(0,r.isObject)(e[o])?(0,r.isObject)(t[o])?Object.assign(e[o],t[o]):(console.warn("unmergable condition, query is object but condition is ".concat((0,r.getType)(t),", can only overwrite"),t,n),e[o]=t[o]):(console.warn("to-merge query is of type ".concat((0,r.getType)(e),", can only overwrite"),e,t,n),e[o]=t[o]):e[o]=t[o]}function y(e){return(0,r.isInternalObject)(e)||(0,r.isDate)(e)||(0,r.isRegExp)(e)}function g(e){return(0,o.serialize)(e)}function v(e){return(0,o.deserialize)(e)}},cbd6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startTransaction=v,t.runTransaction=m,t.Transaction=void 0;var r=s(n("a34a")),o=n("f399"),i=n("5b0f"),a=n("295d");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h="database.startTransaction",d="database.commitTransaction",y="database.abortTransaction",g=function(){function e(t){f(this,e),this._db=t,this._request=new o.Db.reqClass(this._db.config),this.aborted=!1,this.commited=!1,this.inited=!1}return p(e,[{key:"init",value:function(){var e=c(r.default.mark((function e(){var t;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._request.send(h);case 2:if(t=e.sent,!t.code){e.next=5;break}throw t;case 5:this.inited=!0,this._id=t.transactionId;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"collection",value:function(e){if(!e)throw new Error("Collection name is required");return new i.CollectionReference(this._db,e,{},this._id)}},{key:"getTransactionId",value:function(){return this._id}},{key:"getRequestMethod",value:function(){return this._request}},{key:"commit",value:function(){var e=c(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={transactionId:this._id},e.next=3,this._request.send(d,t);case 3:if(n=e.sent,!n.code){e.next=6;break}throw n;case 6:return this.commited=!0,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"rollback",value:function(){var e=c(r.default.mark((function e(t){var n,o;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={transactionId:this._id},e.next=3,this._request.send(y,n);case 3:if(o=e.sent,!o.code){e.next=6;break}throw o;case 6:return this.aborted=!0,this.abortReason=t,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();function v(){return _.apply(this,arguments)}function _(){return _=c(r.default.mark((function e(){var t;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new g(this),e.next=3,t.init();case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),_.apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return b=c(r.default.mark((function e(t){var n,o,i,s,u=arguments;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:3,e.prev=1,o=new g(this),e.next=5,o.init();case 5:return e.next=7,t(o);case 7:if(i=e.sent,!0!==o.aborted){e.next=10;break}throw o.abortReason;case 10:return e.next=12,o.commit();case 12:return e.abrupt("return",i);case 15:if(e.prev=15,e.t0=e["catch"](1),!1!==o.inited){e.next=19;break}throw e.t0;case 19:if(s=function(){var e=c(r.default.mark((function e(t){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.aborted||o.commited){e.next=9;break}return e.prev=1,e.next=4,o.rollback();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:throw t;case 9:if(!0!==o.aborted){e.next=11;break}throw o.abortReason;case 11:throw t;case 12:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),!(n<=0)){e.next=23;break}return e.next=23,s(e.t0);case 23:if(!e.t0||e.t0.code!==a.ERRORS.DATABASE_TRANSACTION_CONFLICT.code){e.next=27;break}return e.next=26,m.bind(this)(t,--n);case 26:return e.abrupt("return",e.sent);case 27:return e.next=29,s(e.t0);case 29:case"end":return e.stop()}}),e,this,[[1,15]])}))),b.apply(this,arguments)}t.Transaction=g},cd3f:function(e,t,n){(function(e,n){var r=200,o="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",f="[object Error]",l="[object Function]",p="[object GeneratorFunction]",h="[object Map]",d="[object Number]",y="[object Object]",g="[object Promise]",v="[object RegExp]",_="[object Set]",m="[object String]",b="[object Symbol]",E="[object WeakMap]",w="[object ArrayBuffer]",S="[object DataView]",O="[object Float32Array]",A="[object Float64Array]",I="[object Int8Array]",T="[object Int16Array]",N="[object Int32Array]",R="[object Uint8Array]",D="[object Uint8ClampedArray]",P="[object Uint16Array]",C="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,B=/\w*$/,M=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,k={};k[a]=k[s]=k[w]=k[S]=k[u]=k[c]=k[O]=k[A]=k[I]=k[T]=k[N]=k[h]=k[d]=k[y]=k[v]=k[_]=k[m]=k[b]=k[R]=k[D]=k[P]=k[C]=!0,k[f]=k[l]=k[E]=!1;var j="object"==typeof e&&e&&e.Object===Object&&e,U="object"==typeof self&&self&&self.Object===Object&&self,$=j||U||Function("return this")(),W=t&&!t.nodeType&&t,F=W&&"object"==typeof n&&n&&!n.nodeType&&n,q=F&&F.exports===W;function Y(e,t){return e.set(t[0],t[1]),e}function V(e,t){return e.add(t),e}function G(e,t){var n=-1,r=e?e.length:0;while(++n<r)if(!1===t(e[n],n,e))break;return e}function H(e,t){var n=-1,r=t.length,o=e.length;while(++n<r)e[o+n]=t[n];return e}function K(e,t,n,r){var o=-1,i=e?e.length:0;r&&i&&(n=e[++o]);while(++o<i)n=t(n,e[o],o,e);return n}function z(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function J(e,t){return null==e?void 0:e[t]}function Q(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function X(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Z(e,t){return function(n){return e(t(n))}}function ee(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var te=Array.prototype,ne=Function.prototype,re=Object.prototype,oe=$["__core-js_shared__"],ie=function(){var e=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ae=ne.toString,se=re.hasOwnProperty,ue=re.toString,ce=RegExp("^"+ae.call(se).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=q?$.Buffer:void 0,le=$.Symbol,pe=$.Uint8Array,he=Z(Object.getPrototypeOf,Object),de=Object.create,ye=re.propertyIsEnumerable,ge=te.splice,ve=Object.getOwnPropertySymbols,_e=fe?fe.isBuffer:void 0,me=Z(Object.keys,Object),be=It($,"DataView"),Ee=It($,"Map"),we=It($,"Promise"),Se=It($,"Set"),Oe=It($,"WeakMap"),Ae=It(Object,"create"),Ie=xt(be),Te=xt(Ee),Ne=xt(we),Re=xt(Se),De=xt(Oe),Pe=le?le.prototype:void 0,Ce=Pe?Pe.valueOf:void 0;function Le(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Be(){this.__data__=Ae?Ae(null):{}}function Me(e){return this.has(e)&&delete this.__data__[e]}function xe(e){var t=this.__data__;if(Ae){var n=t[e];return n===o?void 0:n}return se.call(t,e)?t[e]:void 0}function ke(e){var t=this.__data__;return Ae?void 0!==t[e]:se.call(t,e)}function je(e,t){var n=this.__data__;return n[e]=Ae&&void 0===t?o:t,this}function Ue(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function $e(){this.__data__=[]}function We(e){var t=this.__data__,n=it(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():ge.call(t,n,1),!0}function Fe(e){var t=this.__data__,n=it(t,e);return n<0?void 0:t[n][1]}function qe(e){return it(this.__data__,e)>-1}function Ye(e,t){var n=this.__data__,r=it(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function Ve(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Ge(){this.__data__={hash:new Le,map:new(Ee||Ue),string:new Le}}function He(e){return At(this,e)["delete"](e)}function Ke(e){return At(this,e).get(e)}function ze(e){return At(this,e).has(e)}function Je(e,t){return At(this,e).set(e,t),this}function Qe(e){this.__data__=new Ue(e)}function Xe(){this.__data__=new Ue}function Ze(e){return this.__data__["delete"](e)}function et(e){return this.__data__.get(e)}function tt(e){return this.__data__.has(e)}function nt(e,t){var n=this.__data__;if(n instanceof Ue){var o=n.__data__;if(!Ee||o.length<r-1)return o.push([e,t]),this;n=this.__data__=new Ve(o)}return n.set(e,t),this}function rt(e,t){var n=$t(e)||Ut(e)?z(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!se.call(e,i)||o&&("length"==i||Ct(i,r))||n.push(i);return n}function ot(e,t,n){var r=e[t];se.call(e,t)&&jt(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function it(e,t){var n=e.length;while(n--)if(jt(e[n][0],t))return n;return-1}function at(e,t){return e&&wt(t,Kt(t),e)}function st(e,t,n,r,o,i,s){var u;if(r&&(u=i?r(e,o,i,s):r(e)),void 0!==u)return u;if(!Gt(e))return e;var c=$t(e);if(c){if(u=Rt(e),!t)return Et(e,u)}else{var f=Nt(e),h=f==l||f==p;if(qt(e))return ht(e,t);if(f==y||f==a||h&&!i){if(Q(e))return i?e:{};if(u=Dt(h?{}:e),!t)return St(e,at(u,e))}else{if(!k[f])return i?e:{};u=Pt(e,f,st,t)}}s||(s=new Qe);var d=s.get(e);if(d)return d;if(s.set(e,u),!c)var g=n?Ot(e):Kt(e);return G(g||e,(function(o,i){g&&(i=o,o=e[i]),ot(u,i,st(o,t,n,r,i,e,s))})),u}function ut(e){return Gt(e)?de(e):{}}function ct(e,t,n){var r=t(e);return $t(e)?r:H(r,n(e))}function ft(e){return ue.call(e)}function lt(e){if(!Gt(e)||Bt(e))return!1;var t=Yt(e)||Q(e)?ce:M;return t.test(xt(e))}function pt(e){if(!Mt(e))return me(e);var t=[];for(var n in Object(e))se.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ht(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function dt(e){var t=new e.constructor(e.byteLength);return new pe(t).set(new pe(e)),t}function yt(e,t){var n=t?dt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function gt(e,t,n){var r=t?n(X(e),!0):X(e);return K(r,Y,new e.constructor)}function vt(e){var t=new e.constructor(e.source,B.exec(e));return t.lastIndex=e.lastIndex,t}function _t(e,t,n){var r=t?n(ee(e),!0):ee(e);return K(r,V,new e.constructor)}function mt(e){return Ce?Object(Ce.call(e)):{}}function bt(e,t){var n=t?dt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Et(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}function wt(e,t,n,r){n||(n={});var o=-1,i=t.length;while(++o<i){var a=t[o],s=r?r(n[a],e[a],a,n,e):void 0;ot(n,a,void 0===s?e[a]:s)}return n}function St(e,t){return wt(e,Tt(e),t)}function Ot(e){return ct(e,Kt,Tt)}function At(e,t){var n=e.__data__;return Lt(t)?n["string"==typeof t?"string":"hash"]:n.map}function It(e,t){var n=J(e,t);return lt(n)?n:void 0}Le.prototype.clear=Be,Le.prototype["delete"]=Me,Le.prototype.get=xe,Le.prototype.has=ke,Le.prototype.set=je,Ue.prototype.clear=$e,Ue.prototype["delete"]=We,Ue.prototype.get=Fe,Ue.prototype.has=qe,Ue.prototype.set=Ye,Ve.prototype.clear=Ge,Ve.prototype["delete"]=He,Ve.prototype.get=Ke,Ve.prototype.has=ze,Ve.prototype.set=Je,Qe.prototype.clear=Xe,Qe.prototype["delete"]=Ze,Qe.prototype.get=et,Qe.prototype.has=tt,Qe.prototype.set=nt;var Tt=ve?Z(ve,Object):zt,Nt=ft;function Rt(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&se.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Dt(e){return"function"!=typeof e.constructor||Mt(e)?{}:ut(he(e))}function Pt(e,t,n,r){var o=e.constructor;switch(t){case w:return dt(e);case u:case c:return new o(+e);case S:return yt(e,r);case O:case A:case I:case T:case N:case R:case D:case P:case C:return bt(e,r);case h:return gt(e,r,n);case d:case m:return new o(e);case v:return vt(e);case _:return _t(e,r,n);case b:return mt(e)}}function Ct(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||x.test(e))&&e>-1&&e%1==0&&e<t}function Lt(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Bt(e){return!!ie&&ie in e}function Mt(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||re;return e===n}function xt(e){if(null!=e){try{return ae.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function kt(e){return st(e,!0,!0)}function jt(e,t){return e===t||e!==e&&t!==t}function Ut(e){return Ft(e)&&se.call(e,"callee")&&(!ye.call(e,"callee")||ue.call(e)==a)}(be&&Nt(new be(new ArrayBuffer(1)))!=S||Ee&&Nt(new Ee)!=h||we&&Nt(we.resolve())!=g||Se&&Nt(new Se)!=_||Oe&&Nt(new Oe)!=E)&&(Nt=function(e){var t=ue.call(e),n=t==y?e.constructor:void 0,r=n?xt(n):void 0;if(r)switch(r){case Ie:return S;case Te:return h;case Ne:return g;case Re:return _;case De:return E}return t});var $t=Array.isArray;function Wt(e){return null!=e&&Vt(e.length)&&!Yt(e)}function Ft(e){return Ht(e)&&Wt(e)}var qt=_e||Jt;function Yt(e){var t=Gt(e)?ue.call(e):"";return t==l||t==p}function Vt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Gt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ht(e){return!!e&&"object"==typeof e}function Kt(e){return Wt(e)?rt(e):pt(e)}function zt(){return[]}function Jt(){return!1}n.exports=kt}).call(this,n("c8ba"),n("62e4")(e))},d340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RealtimeWebSocketClient=void 0;var r=n("9482"),o=n("4895"),i=n("5731"),a=n("99b4"),s=n("06af"),u=n("3d9a"),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},f=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},h=3,d=5e3,y=1e4,g=5,v=1e4,_=2,m=2,b=5e3,E=function(){function e(e){var t=this;this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._pingFailed=0,this._pongMissed=0,this._logins=new Map,this._wsReadySubsribers=[],this._wsResponseWait=new Map,this._rttObserved=[],this.send=function(e){return f(t,void 0,void 0,(function(){var t=this;return l(this,(function(n){return[2,new Promise((function(n,r){return f(t,void 0,void 0,(function(){var t,o,i,s,c,h,d,y=this;return l(this,(function(g){switch(g.label){case 0:o=!1,i=!1,s=function(e){o=!0,t&&clearTimeout(t),n(e)},c=function(e){i=!0,t&&clearTimeout(t),r(e)},e.timeout&&(t=setTimeout((function(){return f(y,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return o&&i?[3,2]:[4,(0,u.sleep)(0)];case 1:e.sent(),o&&i||c(new a.TimeoutError("wsclient.send timedout")),e.label=2;case 2:return[2]}}))}))}),e.timeout)),g.label=1;case 1:return g.trys.push([1,8,,9]),this._wsInitPromise?[4,this._wsInitPromise]:[3,3];case 2:g.sent(),g.label=3;case 3:if(!this._ws)return c(new Error("invalid state: ws connection not exists, can not send message")),[2];if(this._ws.readyState!==p.OPEN)return c(new Error("ws readyState invalid: "+this._ws.readyState+", can not send message")),[2];e.waitResponse&&this._wsResponseWait.set(e.msg.requestId,{resolve:s,reject:c,skipOnMessage:e.skipOnMessage}),g.label=4;case 4:return g.trys.push([4,6,,7]),[4,this._ws.send(JSON.stringify(e.msg))];case 5:return g.sent(),e.waitResponse||s(),[3,7];case 6:return h=g.sent(),h&&(c(h),e.waitResponse&&this._wsResponseWait.delete(e.msg.requestId)),[3,7];case 7:return[3,9];case 8:return d=g.sent(),c(d),[3,9];case 9:return[2]}}))}))}))]}))}))},this.closeAllClients=function(e){t._virtualWSClient.forEach((function(t){t.closeWithError(e)}))},this.pauseClients=function(e){(e||t._virtualWSClient).forEach((function(e){e.pause()}))},this.resumeClients=function(e){(e||t._virtualWSClient).forEach((function(e){e.resume()}))},this.initWebSocketConnection=function(e,n){return void 0===n&&(n=t._maxReconnect),f(t,void 0,void 0,(function(){var t=this;return l(this,(function(r){switch(r.label){case 0:if(e&&this._reconnectState)return[2];if(e&&(this._reconnectState=!0),this._wsInitPromise)return[2,this._wsInitPromise];e&&this.pauseClients(),this.close(i.CLOSE_EVENT_CODE.ReconnectWebSocket),this._wsInitPromise=new Promise((function(r,o){return f(t,void 0,void 0,(function(){var t,i,c,f=this;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,6,,11]),[4,this.getWsSign()];case 1:return t=l.sent(),[4,new Promise((function(e){var n=t.wsUrl||"wss://tcb-ws.tencentcloudapi.com",r=(0,s.getWsClass)();f._ws=r?new r(n):new WebSocket(n),e()}))];case 2:return l.sent(),this._ws.connect?[4,this._ws.connect()]:[3,4];case 3:l.sent(),l.label=4;case 4:return[4,this.initWebSocketEvent()];case 5:return l.sent(),r(),e&&(this.resumeClients(),this._reconnectState=!1),[3,11];case 6:return i=l.sent(),console.error("[realtime] initWebSocketConnection connect fail",i),n>0?(c=!0,this._wsInitPromise=void 0,c?[4,(0,u.sleep)(this._reconnectInterval)]:[3,8]):[3,9];case 7:l.sent(),e&&(this._reconnectState=!1),l.label=8;case 8:return r(this.initWebSocketConnection(e,n-1)),[3,10];case 9:o(i),e&&this.closeAllClients(new a.CloudSDKError({errCode:a.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL,errMsg:i})),l.label=10;case 10:return[3,11];case 11:return[2]}}))}))})),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._wsInitPromise];case 2:return r.sent(),this._wsReadySubsribers.forEach((function(e){var t=e.resolve;return t()})),[3,5];case 3:return r.sent(),this._wsReadySubsribers.forEach((function(e){var t=e.reject;return t()})),[3,5];case 4:return this._wsInitPromise=void 0,this._wsReadySubsribers=[],[7];case 5:return[2]}}))}))},this.initWebSocketEvent=function(){return new Promise((function(e,n){if(!t._ws)throw new Error("can not initWebSocketEvent, ws not exists");var r=!1;t._ws.onopen=function(t){console.warn("[realtime] ws event: open",t),r=!0,e()},t._ws.onerror=function(e){t._logins=new Map,r?(console.error("[realtime] ws event: error",e),t.clearHeartbeat(),t._virtualWSClient.forEach((function(t){return t.closeWithError(new a.CloudSDKError({errCode:a.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR,errMsg:e}))}))):(console.error("[realtime] ws open failed with ws event: error",e),n(e))},t._ws.onclose=function(e){switch(console.warn("[realtime] ws event: close",e),t._logins=new Map,t.clearHeartbeat(),e.code){case i.CLOSE_EVENT_CODE.ReconnectWebSocket:break;case i.CLOSE_EVENT_CODE.NoRealtimeListeners:break;case i.CLOSE_EVENT_CODE.HeartbeatPingError:case i.CLOSE_EVENT_CODE.HeartbeatPongTimeoutError:case i.CLOSE_EVENT_CODE.NormalClosure:case i.CLOSE_EVENT_CODE.AbnormalClosure:t._maxReconnect>0?t.initWebSocketConnection(!0,t._maxReconnect):t.closeAllClients((0,i.getWSCloseError)(e.code));break;case i.CLOSE_EVENT_CODE.NoAuthentication:t.closeAllClients((0,i.getWSCloseError)(e.code,e.reason));break;default:t._maxReconnect>0?t.initWebSocketConnection(!0,t._maxReconnect):t.closeAllClients((0,i.getWSCloseError)(e.code))}},t._ws.onmessage=function(e){var n,r=e.data;t.heartbeat();try{n=JSON.parse(r)}catch(d){throw new Error("[realtime] onMessage parse res.data error: "+d)}if("ERROR"===n.msgType){var o=null;t._virtualWSClient.forEach((function(e){e.watchId===n.watchId&&(o=e)})),o&&o.listener.onError(n)}var i=t._wsResponseWait.get(n.requestId);if(i){try{"ERROR"===n.msgType?i.reject(new a.RealtimeErrorMessageError(n)):i.resolve(n)}catch(d){console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",d)}finally{t._wsResponseWait.delete(n.requestId)}if(i.skipOnMessage)return}if("PONG"!==n.msgType){var s=n.watchId&&t._watchIdClientMap.get(n.watchId);if(s)s.onMessage(n);else switch(console.error("[realtime] no realtime listener found responsible for watchId "+n.watchId+": ",n),n.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":s=t._queryIdClientMap.get(n.msgData.queryID),s&&s.onMessage(n);break;default:for(var u=0,c=Array.from(t._watchIdClientMap.entries());u<c.length;u++){var f=c[u],l=f[1];l.onMessage(n);break}}}else if(t._lastPingSendTS){var p=Date.now()-t._lastPingSendTS;if(p>y)return void console.warn("[realtime] untrusted rtt observed: "+p);t._rttObserved.length>=h&&t._rttObserved.splice(0,t._rttObserved.length-h+1),t._rttObserved.push(p)}},t.heartbeat()}))},this.isWSConnected=function(){return Boolean(t._ws&&t._ws.readyState===p.OPEN)},this.onceWSConnected=function(){return f(t,void 0,void 0,(function(){var e=this;return l(this,(function(t){return this.isWSConnected()?[2]:this._wsInitPromise?[2,this._wsInitPromise]:[2,new Promise((function(t,n){e._wsReadySubsribers.push({resolve:t,reject:n})}))]}))}))},this.webLogin=function(e,n){return f(t,void 0,void 0,(function(){var t,r,i,a,u,c,p,h,d=this;return l(this,(function(y){switch(y.label){case 0:if(!n)if(e){if(t=this._logins.get(e),t){if(t.loggedIn&&t.loginResult)return[2,t.loginResult];if(t.loggingInPromise)return[2,t.loggingInPromise]}}else if(r=this._logins.get(""),null===r||void 0===r?void 0:r.loggingInPromise)return[2,r.loggingInPromise];i=new Promise((function(e,t){return f(d,void 0,void 0,(function(){var n,r,i,a,u;return l(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,this.getWsSign()];case 1:return n=c.sent(),r={envId:n.envId||"",accessToken:"",referrer:"web",sdkVersion:"",dataVersion:""},i={watchId:void 0,requestId:(0,o.genRequestId)(),msgType:"LOGIN",msgData:r,exMsgData:{runtime:(0,s.getRuntime)(),signStr:n.signStr,secretVersion:n.secretVersion}},[4,this.send({msg:i,waitResponse:!0,skipOnMessage:!0,timeout:b})];case 2:return a=c.sent(),a.msgData.code?t(new Error(a.msgData.code+" "+a.msgData.message)):e({envId:n.envId}),[3,4];case 3:return u=c.sent(),t(u),[3,4];case 4:return[2]}}))}))})),a=e&&this._logins.get(e),u=Date.now(),a?(a.loggedIn=!1,a.loggingInPromise=i,a.loginStartTS=u):(a={loggedIn:!1,loggingInPromise:i,loginStartTS:u},this._logins.set(e||"",a)),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,i];case 2:if(c=y.sent(),p=e&&this._logins.get(e),p&&p===a&&p.loginStartTS===u)return a.loggedIn=!0,a.loggingInPromise=void 0,a.loginStartTS=void 0,a.loginResult=c,[2,c];if(p){if(p.loggedIn&&p.loginResult)return[2,p.loginResult];if(p.loggingInPromise)return[2,p.loggingInPromise];throw new Error("ws unexpected login info")}throw new Error("ws login info reset");case 3:throw h=y.sent(),a.loggedIn=!1,a.loggingInPromise=void 0,a.loginStartTS=void 0,a.loginResult=void 0,h;case 4:return[2]}}))}))},this.getWsSign=function(){return f(t,void 0,void 0,(function(){var e,t,n,r,o,i,a;return l(this,(function(u){switch(u.label){case 0:return this._wsSign&&this._wsSign.expiredTs>Date.now()?[2,this._wsSign]:(e=Date.now()+6e4,[4,this._context.appConfig.request.send("auth.wsWebSign",{runtime:(0,s.getRuntime)()})]);case 1:if(t=u.sent(),t.code)throw new Error("[tcb-js-sdk] 获取实时数据推送登录票据失败: "+t.code);if(t.data)return n=t.data,r=n.signStr,o=n.wsUrl,i=n.secretVersion,a=n.envId,[2,{signStr:r,wsUrl:o,secretVersion:i,envId:a,expiredTs:e}];throw new Error("[tcb-js-sdk] 获取实时数据推送登录票据失败")}}))}))},this.getWaitExpectedTimeoutLength=function(){return t._rttObserved.length?t._rttObserved.reduce((function(e,t){return e+t}))/t._rttObserved.length*1.5:d},this.ping=function(){return f(t,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return e={watchId:void 0,requestId:(0,o.genRequestId)(),msgType:"PING",msgData:null},[4,this.send({msg:e})];case 1:return t.sent(),[2]}}))}))},this.onWatchStart=function(e,n){t._queryIdClientMap.set(n,e)},this.onWatchClose=function(e,n){n&&t._queryIdClientMap.delete(n),t._watchIdClientMap.delete(e.watchId),t._virtualWSClient.delete(e),t._virtualWSClient.size||t.close(i.CLOSE_EVENT_CODE.NoRealtimeListeners)},this._maxReconnect=e.maxReconnect||g,this._reconnectInterval=e.reconnectInterval||v,this._context=e.context}return e.prototype.clearHeartbeat=function(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)},e.prototype.close=function(e){this.clearHeartbeat(),this._ws&&(this._ws.close(e,i.CLOSE_EVENT_CODE_INFO[e].name),this._ws=void 0)},e.prototype.watch=function(e){this._ws||this._wsInitPromise||this.initWebSocketConnection(!1);var t=new r.VirtualWebSocketClient(c(c({},e),{send:this.send,login:this.webLogin,isWSConnected:this.isWSConnected,onceWSConnected:this.onceWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,debug:!0}));return this._virtualWSClient.add(t),this._watchIdClientMap.set(t.watchId,t),t.listener},e.prototype.heartbeat=function(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout((function(){return f(t,void 0,void 0,(function(){var e=this;return l(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this._ws&&this._ws.readyState===p.OPEN?(this._lastPingSendTS=Date.now(),[4,this.ping()]):[2];case 1:return t.sent(),this._pingFailed=0,this._pongTimeoutId=setTimeout((function(){console.error("pong timed out"),e._pongMissed<m?(e._pongMissed++,e.heartbeat(!0)):e.initWebSocketConnection(!0)}),this._context.appConfig.realtimePongWaitTimeout),[3,3];case 2:return t.sent(),this._pingFailed<_?(this._pingFailed++,this.heartbeat()):this.close(i.CLOSE_EVENT_CODE.HeartbeatPingError),[3,3];case 3:return[2]}}))}))}),e?0:this._context.appConfig.realtimePingInterval)},e}();t.RealtimeWebSocketClient=E},d4ea:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=f();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InternalSymbol=void 0;var h=[],d={},y=function e(t){p(this,e),Object.defineProperties(this,{target:{enumerable:!1,writable:!1,configurable:!1,value:t}})},g=function(e){i(n,e);var t=s(n);function n(e,r){if(p(this,n),r!==d)throw new TypeError("InternalSymbol cannot be constructed with new operator");return t.call(this,e)}return o(n,null,[{key:"for",value:function(e){for(var t=0,r=h.length;t<r;t++)if(h[t].target===e)return h[t].instance;var o=new n(e,d);return h.push({target:e,instance:o}),o}}]),n}(y);t.InternalSymbol=g;var v=g;t.default=v},d877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processReturn=A,t.E=t.TcbError=t.parseByEJSON=t.stringifyByEJSON=t.filterUndefined=t.getReqOpts=t.autoCount=t.sleep=void 0;var r=n("63ea"),o=n("7319");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function s(e){var t=p();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t="function"===typeof Map?new Map:void 0;return f=function(e){if(null===e||!h(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return l(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},f(e)}function l(e,t,n){return l=p()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),i=new o;return n&&d(i,n.prototype),i},l.apply(null,arguments)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))};t.sleep=g;var v={},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return v[e]||(v[e]=0),v[e]++};t.autoCount=_;var m=function(e){return void 0!==e.timeout?{timeout:e.timeout}:{}};t.getReqOpts=m;var b=function e(t){if(!(0,o.isObject)(t))return t;for(var n in t)void 0===t[n]?delete t[n]:(0,o.isObject)(t[n])&&(t[n]=e(t[n]));return t};t.filterUndefined=b;var E=function(e){return e=b(e),r.EJSON.stringify(e,{relaxed:!1})};t.stringifyByEJSON=E;var w=function(e){return r.EJSON.parse(e)};t.parseByEJSON=w;var S=function(e){a(n,e);var t=s(n);function n(e){var r;return i(this,n),r=t.call(this,e.message),r.code=e.code,r.message=e.message,r}return n}(f(Error));t.TcbError=S;var O=function(e){return new S(e)};function A(e,t){if(!1===e)return t;throw O(Object.assign({},t))}t.E=O},ddd8:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useDefaultAdapter=t.useAdapters=t.RUNTIME=void 0;var a,s=i(n("f9b8")),u=n("2365");function c(e){for(var t=u.isArray(e)?e:[e],n=0,r=t;n<r.length;n++){var o=r[n],i=o.isMatch,a=o.genAdapter,s=o.runtime;if(i())return{adapter:a(),runtime:s}}}function f(){return{adapter:s.genAdapter(),runtime:a.WEB}}(function(e){e["WEB"]="web",e["WX_MP"]="wx_mp"})(a=t.RUNTIME||(t.RUNTIME={})),t.useAdapters=c,t.useDefaultAdapter=f},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===r&&(o=!1,r=t+1);return-1===r?"":e.slice(n,r)}function o(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return t=n(o(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),a="/"===i(e,-1);return e=n(o(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&a&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),s=a,u=0;u<a;u++)if(o[u]!==i[u]){s=u;break}var c=[];for(u=s;u<o.length;u++)c.push("..");return c=c.concat(i.slice(s)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,i=e.length-1;i>=1;--i)if(t=e.charCodeAt(i),47===t){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,i=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(o=!1,r=a+1),46===s?-1===t?t=a:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){n=a+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e032:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("44a5"),t),o(n("3b46"),t)},e0fa:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.removeEventListener=t.activateEvent=t.addEventListener=t.CloudbaseEventEmitter=t.IErrorEvent=t.CloudbaseEvent=void 0;var i=n("2365");function a(e,t,n){n[e]=n[e]||[],n[e].push(t)}function s(e,t,n){if(null===n||void 0===n?void 0:n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var u=function(){function e(e,t){this.data=t||null,this.name=e}return e}();t.CloudbaseEvent=u;var c=function(e){function t(t,n){var r=e.call(this,"error",{error:t,data:n})||this;return r.error=t,r}return r(t,e),t}(u);t.IErrorEvent=c;var f=function(){function e(){this._listeners={}}return e.prototype.on=function(e,t){return a(e,t,this._listeners),this},e.prototype.off=function(e,t){return s(e,t,this._listeners),this},e.prototype.fire=function(e,t){if(i.isInstanceOf(e,c))return console.error(e.error),this;var n=i.isString(e)?new u(e,t||{}):e,r=n.name;if(this._listens(r)){n.target=this;for(var a=this._listeners[r]?o(this._listeners[r]):[],s=0,f=a;s<f.length;s++){var l=f[s];l.call(this,n)}}return this},e.prototype._listens=function(e){return this._listeners[e]&&this._listeners[e].length>0},e}();t.CloudbaseEventEmitter=f;var l=new f;function p(e,t){l.on(e,t)}function h(e,t){void 0===t&&(t={}),l.fire(e,t)}function d(e,t){l.off(e,t)}t.addEventListener=p,t.activateEvent=h,t.removeEventListener=d},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e5d0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateSerializer=void 0;var r=n("a8f7"),o=n("1f74"),i=n("7319"),a=n("0fc8"),s=n("caf4"),u=n("d877");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(){f(this,e)}return p(e,[{key:"encodeUpdate",value:function(e){return(0,r.isUpdateCommand)(e)?this.encodeUpdateCommand(e):"object"===(0,i.getType)(e)?this.encodeUpdateObject(e):e}},{key:"encodeUpdateCommand",value:function(e){if(e.fieldName===o.SYMBOL_UNSET_FIELD_NAME)throw new Error("Cannot encode a comparison command with unset field name");switch(e.operator){case r.UPDATE_COMMANDS_LITERAL.PUSH:case r.UPDATE_COMMANDS_LITERAL.PULL:case r.UPDATE_COMMANDS_LITERAL.PULL_ALL:case r.UPDATE_COMMANDS_LITERAL.POP:case r.UPDATE_COMMANDS_LITERAL.SHIFT:case r.UPDATE_COMMANDS_LITERAL.UNSHIFT:case r.UPDATE_COMMANDS_LITERAL.ADD_TO_SET:return this.encodeArrayUpdateCommand(e);default:return this.encodeFieldUpdateCommand(e)}}},{key:"encodeFieldUpdateCommand",value:function(e){var t=(0,a.operatorToString)(e.operator);switch(e.operator){case r.UPDATE_COMMANDS_LITERAL.REMOVE:return c({},t,c({},e.fieldName,""));default:return c({},t,c({},e.fieldName,e.operands[0]))}}},{key:"encodeArrayUpdateCommand",value:function(e){var t=(0,a.operatorToString)(e.operator);switch(e.operator){case r.UPDATE_COMMANDS_LITERAL.PUSH:var n;return n=(0,i.isArray)(e.operands)?{$each:e.operands.map(s.encodeInternalDataType)}:e.operands,c({},t,c({},e.fieldName,n));case r.UPDATE_COMMANDS_LITERAL.UNSHIFT:var o={$each:e.operands.map(s.encodeInternalDataType),$position:0};return c({},t,c({},e.fieldName,o));case r.UPDATE_COMMANDS_LITERAL.POP:return c({},t,c({},e.fieldName,1));case r.UPDATE_COMMANDS_LITERAL.SHIFT:return c({},t,c({},e.fieldName,-1));default:return c({},t,c({},e.fieldName,(0,s.encodeInternalDataType)(e.operands)))}}},{key:"encodeUpdateObject",value:function(e){var t=(0,s.flattenQueryObject)(e);for(var n in t)if(!/^\$/.test(n)){var o=t[n];if((0,r.isUpdateCommand)(o)){t[n]=o._setFieldName(n);var i=this.encodeUpdateCommand(t[n]);(0,s.mergeConditionAfterEncode)(t,i,n)}else{t[n]=o=(0,s.encodeInternalDataType)(o);var a=new r.UpdateCommand(r.UPDATE_COMMANDS_LITERAL.SET,[o],n),u=this.encodeUpdateCommand(a);(0,s.mergeConditionAfterEncode)(t,u,n)}}return t}}],[{key:"encode",value:function(t){var n=new e;return n.encodeUpdate(t)}},{key:"encodeEJSON",value:function(t){var n=new e;return(0,u.stringifyByEJSON)(n.encodeUpdate(t))}}]),e}();t.UpdateSerializer=h},e668:function(e,t,n){(function(t,r){e.exports=r(n("36b8"))})(0,(function(e){return e.enc.Utf8}))},ee3a:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAuthProvider=void 0;var r=n("5fbe"),o=n("fd2f"),i=n("2707"),a=n("be7e"),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},p=r.constants.ERRORS,h=r.constants.COMMUNITY_SITE_URL,d=r.utils.isString,y=r.helpers.catchErrorsDecorator,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.signIn=function(e){return f(this,void 0,void 0,(function(){var t,n,r,o,s,u,c;return l(this,(function(f){switch(f.label){case 0:if(!d(e))throw new Error(JSON.stringify({code:p.INVALID_PARAMS,msg:"ticket must be a string"}));return t=this._cache.keys.refreshTokenKey,o=(r=this._request).send,s=["auth.signInWithTicket"],u={ticket:e},[4,this._cache.getStoreAsync(t)];case 1:return[4,o.apply(r,s.concat([(u.refresh_token=f.sent()||"",u)]))];case 2:return n=f.sent(),n.refresh_token?[4,this.setRefreshToken(n.refresh_token)]:[3,7];case 3:return f.sent(),[4,this._request.refreshAccessToken()];case 4:return f.sent(),a.eventBus.fire(a.EVENTS.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:i.LOGINTYPE.CUSTOM,persistence:this._config.persistence}),a.eventBus.fire(a.EVENTS.LOGIN_STATE_CHANGED),[4,this.refreshUserInfo()];case 5:return f.sent(),c=new a.LoginState({envId:this._config.env,cache:this._cache,request:this._request}),[4,c.checkLocalStateAsync()];case 6:return f.sent(),[2,c];case 7:throw new Error(JSON.stringify({code:p.OPERATION_FAIL,msg:"custom signIn failed"}))}}))}))},u([y({title:"自定义登录失败",messages:["请确认以下各项：","  1 - 当前环境是否开启了自定义登录","  2 - 调用 auth().customAuthProvider().signIn() 的语法或参数是否正确","  3 - ticket 是否归属于当前环境","  4 - 创建 ticket 的自定义登录私钥是否过期","如果问题依然存在，建议到官方问答社区提问或寻找帮助："+h]}),c("design:type",Function),c("design:paramtypes",[String]),c("design:returntype",Promise)],t.prototype,"signIn",null),t}(o.AuthProvider);t.CustomAuthProvider=g},f0c5:function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s,u,c){var f,l="function"===typeof e?e.options:e;if(u){l.components||(l.components={});var p=Object.prototype.hasOwnProperty;for(var h in u)p.call(u,h)&&!p.call(l.components,h)&&(l.components[h]=u[h])}if(c&&((c.beforeCreate||(c.beforeCreate=[])).unshift((function(){this[c.__module]=this})),(l.mixins||(l.mixins=[])).push(c)),t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),a?(f=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=f):o&&(f=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),f)if(l.functional){l._injectStyles=f;var d=l.render;l.render=function(e,t){return f.call(t),d(e,t)}}else{var y=l.beforeCreate;l.beforeCreate=y?[].concat(y,f):[f]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},f399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CollectionReference",{enumerable:!0,get:function(){return o.CollectionReference}}),Object.defineProperty(t,"Query",{enumerable:!0,get:function(){return c.Query}}),Object.defineProperty(t,"DocumentReference",{enumerable:!0,get:function(){return f.DocumentReference}}),t.Db=void 0;var r=p(n("6fe9")),o=n("5b0f"),i=n("659a"),a=n("7478"),s=n("f664"),u=n("cbd6"),c=n("c508"),f=n("a32c");function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var g=function(){function e(t){h(this,e),this.config=t,this.Geo=r,this.serverDate=a.ServerDateConstructor,this.command=i.Command,this.RegExp=s.RegExpConstructor,this.startTransaction=u.startTransaction,this.runTransaction=u.runTransaction}return y(e,[{key:"collection",value:function(e){if(!e)throw new Error("Collection name is required");return new o.CollectionReference(this,e)}},{key:"createCollection",value:function(t){var n=new e.reqClass(this.config),r={collectionName:t};return n.send("database.addCollection",r)}}]),e}();t.Db=g},f418:function(e,t,n){(function(t){var n="Expected a function",r="__lodash_hash_undefined__",o=1/0,i="[object Function]",a="[object GeneratorFunction]",s="[object Symbol]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,f=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/[\\^$.*+?()[\]{}|]/g,h=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,y="object"==typeof t&&t&&t.Object===Object&&t,g="object"==typeof self&&self&&self.Object===Object&&self,v=y||g||Function("return this")();function _(e,t){return null==e?void 0:e[t]}function m(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}var b=Array.prototype,E=Function.prototype,w=Object.prototype,S=v["__core-js_shared__"],O=function(){var e=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),A=E.toString,I=w.hasOwnProperty,T=w.toString,N=RegExp("^"+A.call(I).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=v.Symbol,D=b.splice,P=se(v,"Map"),C=se(Object,"create"),L=R?R.prototype:void 0,B=L?L.toString:void 0;function M(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function x(){this.__data__=C?C(null):{}}function k(e){return this.has(e)&&delete this.__data__[e]}function j(e){var t=this.__data__;if(C){var n=t[e];return n===r?void 0:n}return I.call(t,e)?t[e]:void 0}function U(e){var t=this.__data__;return C?void 0!==t[e]:I.call(t,e)}function $(e,t){var n=this.__data__;return n[e]=C&&void 0===t?r:t,this}function W(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function F(){this.__data__=[]}function q(e){var t=this.__data__,n=Z(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():D.call(t,n,1),!0}function Y(e){var t=this.__data__,n=Z(t,e);return n<0?void 0:t[n][1]}function V(e){return Z(this.__data__,e)>-1}function G(e,t){var n=this.__data__,r=Z(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function H(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function K(){this.__data__={hash:new M,map:new(P||W),string:new M}}function z(e){return ae(this,e)["delete"](e)}function J(e){return ae(this,e).get(e)}function Q(e){return ae(this,e).has(e)}function X(e,t){return ae(this,e).set(e,t),this}function Z(e,t){var n=e.length;while(n--)if(ve(e[n][0],t))return n;return-1}function ee(e,t){t=ue(t,e)?[t]:ie(t);var n=0,r=t.length;while(null!=e&&n<r)e=e[he(t[n++])];return n&&n==r?e:void 0}function te(e){if(!be(e)||fe(e))return!1;var t=me(e)||m(e)?N:d;return t.test(de(e))}function ne(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;var i=Array(o);while(++r<o)i[r]=e[r+t];return i}function re(e){if("string"==typeof e)return e;if(we(e))return B?B.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}function oe(e,t){t=ue(t,e)?[t]:ie(t),e=le(e,t);var n=he(ye(t));return!(null!=e&&I.call(e,n))||delete e[n]}function ie(e){return _e(e)?e:pe(e)}function ae(e,t){var n=e.__data__;return ce(t)?n["string"==typeof t?"string":"hash"]:n.map}function se(e,t){var n=_(e,t);return te(n)?n:void 0}function ue(e,t){if(_e(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!we(e))||(c.test(e)||!u.test(e)||null!=t&&e in Object(t))}function ce(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function fe(e){return!!O&&O in e}function le(e,t){return 1==t.length?e:ee(e,ne(t,0,-1))}M.prototype.clear=x,M.prototype["delete"]=k,M.prototype.get=j,M.prototype.has=U,M.prototype.set=$,W.prototype.clear=F,W.prototype["delete"]=q,W.prototype.get=Y,W.prototype.has=V,W.prototype.set=G,H.prototype.clear=K,H.prototype["delete"]=z,H.prototype.get=J,H.prototype.has=Q,H.prototype.set=X;var pe=ge((function(e){e=Se(e);var t=[];return f.test(e)&&t.push(""),e.replace(l,(function(e,n,r,o){t.push(r?o.replace(h,"$1"):n||e)})),t}));function he(e){if("string"==typeof e||we(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function de(e){if(null!=e){try{return A.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ye(e){var t=e?e.length:0;return t?e[t-1]:void 0}function ge(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var r=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return r.cache=new(ge.Cache||H),r}function ve(e,t){return e===t||e!==e&&t!==t}ge.Cache=H;var _e=Array.isArray;function me(e){var t=be(e)?T.call(e):"";return t==i||t==a}function be(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ee(e){return!!e&&"object"==typeof e}function we(e){return"symbol"==typeof e||Ee(e)&&T.call(e)==s}function Se(e){return null==e?"":re(e)}function Oe(e,t){return null==e||oe(e,t)}e.exports=Oe}).call(this,n("c8ba"))},f664:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegExpConstructor=u,t.RegExp=void 0;var r=n("1f74");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=function(){function e(t){var n=t.regexp,r=t.options;if(o(this,e),!n)throw new TypeError("regexp must be a string");this.$regularExpression={pattern:n||"",options:r||""}}return a(e,[{key:"parse",value:function(){return{$regularExpression:{pattern:this.$regularExpression.pattern,options:this.$regularExpression.options}}}},{key:"_internalType",get:function(){return r.SYMBOL_REGEXP}}]),e}();function u(e){return new s(e)}t.RegExp=s},f9b8:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebRequest=t.genAdapter=void 0;var s=n("58ef"),u=n("2365"),c=n("44a5"),f=function(e){function t(t){var n=e.call(this)||this,r=t.timeout,o=t.timeoutMsg,i=t.restrictedMethods;return n._timeout=r||0,n._timeoutMsg=o||"请求超时",n._restrictedMethods=i||["get","post","upload","download"],n}return r(t,e),t.prototype.get=function(e){return this._request(o(o({},e),{method:"get"}),this._restrictedMethods.includes("get"))},t.prototype.post=function(e){return this._request(o(o({},e),{method:"post"}),this._restrictedMethods.includes("post"))},t.prototype.put=function(e){return this._request(o(o({},e),{method:"put"}))},t.prototype.upload=function(e){var t=e.data,n=e.file,r=e.name,i=new FormData;for(var a in t)i.append(a,t[a]);return i.append("key",r),i.append("file",n),this._request(o(o({},e),{data:i,method:"post"}),this._restrictedMethods.includes("upload"))},t.prototype.download=function(e){return i(this,void 0,void 0,(function(){var t,n,r,i;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.get(o(o({},e),{headers:{},responseType:"blob"}))];case 1:return t=a.sent().data,n=window.URL.createObjectURL(new Blob([t])),r=decodeURIComponent(new URL(e.url).pathname.split("/").pop()||""),i=document.createElement("a"),i.href=n,i.setAttribute("download",r),i.style.display="none",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),document.body.removeChild(i),[3,3];case 2:return a.sent(),[3,3];case 3:return[2,new Promise((function(t){t({statusCode:200,tempFilePath:e.url})}))]}}))}))},t.prototype._request=function(e,t){var n=this;void 0===t&&(t=!1);var r=String(e.method).toLowerCase()||"get";return new Promise((function(o){var i,a,s=e.url,f=e.headers,l=void 0===f?{}:f,p=e.data,h=e.responseType,d=e.withCredentials,y=e.body,g=e.onUploadProgress,v=u.formatUrl(c.getProtocol(),s,"get"===r?p:{}),_=new XMLHttpRequest;for(var m in _.open(r,v),h&&(_.responseType=h),l)_.setRequestHeader(m,l[m]);g&&_.upload.addEventListener("progress",g),_.onreadystatechange=function(){var e={};if(4===_.readyState){var t=_.getAllResponseHeaders(),n=t.trim().split(/[\r\n]+/),r={};n.forEach((function(e){var t=e.split(": "),n=t.shift().toLowerCase(),o=t.join(": ");r[n]=o})),e.header=r,e.statusCode=_.status;try{e.data="blob"===h?_.response:JSON.parse(_.responseText)}catch(a){e.data="blob"===h?_.response:_.responseText}clearTimeout(i),o(e)}},t&&n._timeout&&(i=setTimeout((function(){console.warn(n._timeoutMsg),_.abort()}),n._timeout)),a=u.isFormData(p)?p:"application/x-www-form-urlencoded"===l["content-type"]?u.toQueryString(p):y||(p?JSON.stringify(p):void 0),d&&(_.withCredentials=!0),_.send(a)}))},t}(s.AbstractSDKRequest);function l(){var e={root:window,reqClass:f,wsClass:WebSocket,localStorage:localStorage,sessionStorage:sessionStorage};return e}t.WebRequest=f,t.genAdapter=l},fd2f:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthProvider=void 0;var r=n("be7e"),o=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?n(e.value):o(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=function(){function e(e){this._config=e,this._cache=e.cache,this._request=e.request}return e.prototype.checkLocalLoginState=function(){return o(this,void 0,void 0,(function(){var e,t,n,o,a,s;return i(this,(function(i){switch(i.label){case 0:return e=this._cache.keys,t=e.accessTokenKey,n=e.accessTokenExpireKey,[4,this._cache.getStoreAsync(t)];case 1:return o=i.sent(),[4,this._cache.getStoreAsync(n)];case 2:return a=i.sent(),o?a&&a>Date.now()?(s=new r.LoginState({envId:this._config.env,cache:this._cache,request:this._request}),[4,s.checkLocalStateAsync()]):[3,4]:[3,7];case 3:return i.sent(),[2,s];case 4:return[4,this._cache.removeStoreAsync(t)];case 5:return i.sent(),[4,this._cache.removeStoreAsync(n)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},e.prototype.setRefreshToken=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,o=t.refreshTokenKey,[4,this._cache.removeStoreAsync(n)];case 1:return i.sent(),[4,this._cache.removeStoreAsync(r)];case 2:return i.sent(),[4,this._cache.setStoreAsync(o,e)];case 3:return i.sent(),[2]}}))}))},e.prototype.setAccessToken=function(e,t){return o(this,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return n=this._cache.keys,r=n.accessTokenKey,o=n.accessTokenExpireKey,[4,this._cache.setStoreAsync(r,e)];case 1:return i.sent(),[4,this._cache.setStoreAsync(o,t)];case 2:return i.sent(),[2]}}))}))},e.prototype.refreshUserInfo=function(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return e="auth.getUserInfo",[4,this._request.send(e,{})];case 1:return t=n.sent().data,[4,this.setLocalUserInfo(t)];case 2:return n.sent(),[2,t]}}))}))},e.prototype.setLocalUserInfo=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return t=this._cache.keys.userInfoKey,[4,this._cache.setStoreAsync(t,e)];case 1:return n.sent(),[2]}}))}))},e}();t.AuthProvider=a},fe94:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQueryCommand=B,t.isKnownQueryCommand=M,t.isComparisonCommand=x,t.default=t.QueryCommand=t.QUERY_COMMANDS_LITERAL=t.MOD=t.SIZE=t.EXISTS=t.ELEM_MATCH=t.ALL=t.NIN=t.IN=t.LTE=t.LT=t.GTE=t.GT=t.NEQ=t.EQ=void 0;var r=n("8fd0"),o=n("1f74"),i=n("6fe9"),a=n("7319"),s=n("9911");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=v();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var m="eq";t.EQ=m;var b="neq";t.NEQ=b;var E="gt";t.GT=E;var w="gte";t.GTE=w;var S="lt";t.LT=S;var O="lte";t.LTE=O;var A="in";t.IN=A;var I="nin";t.NIN=I;var T="all";t.ALL=T;var N="elemMatch";t.ELEM_MATCH=N;var R="exists";t.EXISTS=R;var D="size";t.SIZE=D;var P,C="mod";t.MOD=C,t.QUERY_COMMANDS_LITERAL=P,function(e){e["EQ"]="eq",e["NEQ"]="neq",e["GT"]="gt",e["GTE"]="gte",e["LT"]="lt",e["LTE"]="lte",e["IN"]="in",e["NIN"]="nin",e["ALL"]="all",e["ELEM_MATCH"]="elemMatch",e["EXISTS"]="exists",e["SIZE"]="size",e["MOD"]="mod",e["GEO_NEAR"]="geoNear",e["GEO_WITHIN"]="geoWithin",e["GEO_INTERSECTS"]="geoIntersects"}(P||(t.QUERY_COMMANDS_LITERAL=P={}));var L=function(e){p(n,e);var t=d(n);function n(e,r,i){var a;return c(this,n),a=t.call(this,e,r,i),a.operator=e,a._internalType=o.SYMBOL_QUERY_COMMAND,a}return l(n,[{key:"toJSON",value:function(){switch(this.operator){case P.IN:case P.NIN:return u({},"$"+this.operator,this.operands);case P.NEQ:return u({},"$ne",this.operands[0]);default:return u({},"$"+this.operator,this.operands[0])}}},{key:"_setFieldName",value:function(e){var t=new n(this.operator,this.operands,e);return t}},{key:"eq",value:function(e){var t=new n(P.EQ,[e],this.fieldName);return this.and(t)}},{key:"neq",value:function(e){var t=new n(P.NEQ,[e],this.fieldName);return this.and(t)}},{key:"gt",value:function(e){var t=new n(P.GT,[e],this.fieldName);return this.and(t)}},{key:"gte",value:function(e){var t=new n(P.GTE,[e],this.fieldName);return this.and(t)}},{key:"lt",value:function(e){var t=new n(P.LT,[e],this.fieldName);return this.and(t)}},{key:"lte",value:function(e){var t=new n(P.LTE,[e],this.fieldName);return this.and(t)}},{key:"in",value:function(e){var t=new n(P.IN,e,this.fieldName);return this.and(t)}},{key:"nin",value:function(e){var t=new n(P.NIN,e,this.fieldName);return this.and(t)}},{key:"geoNear",value:function(e){if(!(e.geometry instanceof i.Point))throw new TypeError('"geometry" must be of type Point. Received type '.concat(typeof e.geometry));if(void 0!==e.maxDistance&&!(0,a.isNumber)(e.maxDistance))throw new TypeError('"maxDistance" must be of type Number. Received type '.concat(typeof e.maxDistance));if(void 0!==e.minDistance&&!(0,a.isNumber)(e.minDistance))throw new TypeError('"minDistance" must be of type Number. Received type '.concat(typeof e.minDistance));var t=new n(P.GEO_NEAR,[e],this.fieldName);return this.and(t)}},{key:"geoWithin",value:function(e){if(!(e.geometry instanceof i.MultiPolygon)&&!(e.geometry instanceof i.Polygon)&&!s.Validate.isCentersPhere(e.centerSphere))throw new TypeError('"geometry" must be of type Polygon or MultiPolygon. Received type '.concat(typeof e.geometry));var t=new n(P.GEO_WITHIN,[e],this.fieldName);return this.and(t)}},{key:"geoIntersects",value:function(e){if(!(e.geometry instanceof i.Point)&&!(e.geometry instanceof i.LineString)&&!(e.geometry instanceof i.Polygon)&&!(e.geometry instanceof i.MultiPoint)&&!(e.geometry instanceof i.MultiLineString)&&!(e.geometry instanceof i.MultiPolygon))throw new TypeError('"geometry" must be of type Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon. Received type '.concat(typeof e.geometry));var t=new n(P.GEO_INTERSECTS,[e],this.fieldName);return this.and(t)}}]),n}(r.LogicCommand);function B(e){return e&&e instanceof L&&e._internalType===o.SYMBOL_QUERY_COMMAND}function M(e){return B(e)&&e.operator.toUpperCase()in P}function x(e){return B(e)}t.QueryCommand=L;var k=L;t.default=k}}]);